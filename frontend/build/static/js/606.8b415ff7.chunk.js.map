{"version":3,"file":"static/js/606.8b415ff7.chunk.js","mappings":"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","sources":["../node_modules/lucide-react/src/icons/bell.ts","api/notificationApi.ts","../node_modules/lucide-react/src/icons/check-check.ts","components/NotificationPopover.tsx","components/NotificationIcon.tsx","components/Navbar.tsx","layouts/MainLayout.tsx","../node_modules/framer-motion/dist/es/utils/reduced-motion/use-reduced-motion.mjs","../node_modules/lucide-react/src/icons/refresh-ccw.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M10.268 21a2 2 0 0 0 3.464 0', key: 'vwvbt9' }],\n  [\n    'path',\n    {\n      d: 'M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326',\n      key: '11g9vi',\n    },\n  ],\n];\n\n/**\n * @component @name Bell\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAuMjY4IDIxYTIgMiAwIDAgMCAzLjQ2NCAwIiAvPgogIDxwYXRoIGQ9Ik0zLjI2MiAxNS4zMjZBMSAxIDAgMCAwIDQgMTdoMTZhMSAxIDAgMCAwIC43NC0xLjY3M0MxOS40MSAxMy45NTYgMTggMTIuNDk5IDE4IDhBNiA2IDAgMCAwIDYgOGMwIDQuNDk5LTEuNDExIDUuOTU2LTIuNzM4IDcuMzI2IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/bell\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Bell = createLucideIcon('bell', __iconNode);\n\nexport default Bell;\n","import axios from 'axios';\nimport { API_BASE_URL } from '../config';\n\n// 通知类型定义\nexport interface Notification {\n  id: number;\n  recipient_user_id: number;\n  actor_user_id: number | null;\n  actor: {\n    id: number;\n    nickname: string;\n    avatar: string;\n  } | null;\n  action_type: string;\n  target_type: string;\n  target_id: number | null;\n  content: string;\n  is_read: boolean;\n  created_at: string;\n  related_url: string | null;\n}\n\ninterface NotificationsResponse {\n  notifications: Notification[];\n  total: number;\n  pages: number;\n}\n\n// 辅助函数：支持多种认证方式（Cookie & JWT）\nconst getAuthHeaders = () => {\n  const token = localStorage.getItem('token');\n  return token ? { Authorization: `Bearer ${token}` } : {};\n};\n\n// 创建带凭证的axios实例，确保既发送JWT也发送Cookies\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  withCredentials: true, // 启用跨域请求发送cookies\n  headers: {\n    'Content-Type': 'application/json',\n  }\n});\n\n// 请求拦截器添加认证头\napiClient.interceptors.request.use(config => {\n  // 每次请求时动态获取最新的token，而不是使用缓存\n  const token = localStorage.getItem('token');\n  \n  // 调试输出\n  console.log('[通知API] 发送请求, token状态:', token ? '有效' : '无效');\n  \n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  } else {\n    console.warn('[通知API] 没有找到有效的授权token');\n  }\n  return config;\n});\n\n// 获取通知列表\nexport const fetchNotifications = async (\n  page: number = 1, \n  pageSize: number = 10, \n  onlyUnread: boolean = false\n): Promise<NotificationsResponse> => {\n  try {\n    const response = await apiClient.get('/api/notifications', {\n      params: { \n        page, \n        per_page: pageSize,\n        unread_only: onlyUnread\n      }\n    });\n    return response.data;\n  } catch (error) {\n    console.error('获取通知失败:', error);\n    throw error;\n  }\n};\n\n// 标记单个通知为已读\nexport const markNotificationAsRead = async (notificationId: number): Promise<void> => {\n  try {\n    await apiClient.put(`/api/notifications/${notificationId}/read`, {});\n  } catch (error) {\n    console.error('标记通知已读失败:', error);\n    throw error;\n  }\n};\n\n// 标记所有通知为已读\nexport const markAllNotificationsAsRead = async (): Promise<void> => {\n  try {\n    await apiClient.post('/api/notifications/mark-all-read', {});\n  } catch (error) {\n    console.error('标记所有通知已读失败:', error);\n    throw error;\n  }\n};\n\n// 获取未读通知数量\nexport const fetchUnreadNotificationCount = async (): Promise<number> => {\n  try {\n    const response = await apiClient.get('/api/notifications/unread-count');\n    return response.data.unread_count;\n  } catch (error) {\n    console.error('获取未读通知数量失败:', error);\n    return 0; // 出错时返回0，避免UI崩溃\n  }\n}; ","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M18 6 7 17l-5-5', key: '116fxf' }],\n  ['path', { d: 'm22 10-7.5 7.5L13 16', key: 'ke71qq' }],\n];\n\n/**\n * @component @name CheckCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTggNiA3IDE3bC01LTUiIC8+CiAgPHBhdGggZD0ibTIyIDEwLTcuNSA3LjVMMTMgMTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/check-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CheckCheck = createLucideIcon('check-check', __iconNode);\n\nexport default CheckCheck;\n","import React, { useState, useEffect, useRef, useMemo } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { formatDistanceToNow } from 'date-fns';\nimport { zhCN } from 'date-fns/locale';\nimport { Check, CheckCheck, RefreshCcw } from 'lucide-react';\nimport { useNavigate } from 'react-router-dom';\nimport { motion } from 'framer-motion';\nimport type { Notification } from '../api/notificationApi';\nimport { \n  fetchNotifications,\n  markNotificationAsRead,\n  markAllNotificationsAsRead\n} from '../api/notificationApi';\n\ninterface NotificationPopoverProps {\n  onClose: () => void;\n  onUpdateUnreadCount: (count: number) => void;\n}\n\nconst NotificationPopover: React.FC<NotificationPopoverProps> = ({ \n  onClose, \n  onUpdateUnreadCount \n}) => {\n  const { user, token } = useAuth();\n  const navigate = useNavigate();\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [page, setPage] = useState<number>(1);\n  const [totalPages, setTotalPages] = useState<number>(1);\n  const [unreadFilter, setUnreadFilter] = useState<boolean>(false);\n  const retryCount = useRef<number>(0);\n  const [allNotifications, setAllNotifications] = useState<Notification[]>([]);\n  \n  // 基于所有通知和过滤条件计算出当前要显示的通知\n  const filteredNotifications = useMemo(() => {\n    return unreadFilter\n      ? allNotifications.filter(n => !n.is_read)\n      : allNotifications;\n  }, [allNotifications, unreadFilter]);\n  \n  // 验证是否有有效的登录状态\n  const hasValidAuth = (): boolean => {\n    // 从localStorage直接获取token，而不是依赖AuthContext中的token状态\n    // 这样可以避免在重新渲染或状态同步中出现延迟的问题\n    const localStorageToken = localStorage.getItem('token');\n    const contextToken = token;\n    \n    // 调试输出\n    console.log('[通知] 验证认证状态:', { \n      hasContextToken: !!contextToken, \n      hasLocalToken: !!localStorageToken,\n      hasUser: !!user\n    });\n    \n    // 同时检查localStorage和Context中的token\n    return !!(localStorageToken || contextToken) && !!user;\n  };\n\n  // 加载通知\n  const loadNotifications = async (silent: boolean = false) => {\n    if (!hasValidAuth()) {\n      setError('未登录或会话已过期');\n      return;\n    }\n    \n    if (!silent) {\n      setLoading(true);\n    }\n    setError(null);\n    \n    try {\n      // 添加额外的调试日志\n      const token = localStorage.getItem('token');\n      console.log('[通知] 开始获取通知列表...', {\n        使用的令牌前10位: token ? `${token.substring(0, 10)}...` : '无',\n        页码: page,\n        每页数量: 10,\n        仅未读: false // 始终获取所有通知\n      });\n      \n      // 始终获取全部通知（不传过滤器），在前端进行过滤\n      const result = await fetchNotifications(page, 10, false);\n      console.log('[通知] 获取到通知列表:', result);\n      setAllNotifications(result.notifications);\n      setTotalPages(result.pages);\n      \n      // 重置重试计数\n      retryCount.current = 0;\n      \n      // 更新未读数\n      const unreadCount = result.notifications.filter((n: Notification) => !n.is_read).length;\n      onUpdateUnreadCount(unreadCount);\n    } catch (error: any) {\n      console.error('[通知] 获取通知失败', error);\n      \n      // 更详细地记录错误信息\n      console.error('[通知] 错误详情:', {\n        状态码: error.response?.status,\n        错误消息: error.response?.data?.message || error.message,\n        错误类型: error.name,\n        请求URL: error.config?.url\n      });\n      \n      // 检查是否是401错误（未授权）\n      const isAuthError = error && (error.response?.status === 401 || error.status === 401);\n      \n      if (isAuthError) {\n        setError('认证失败，请重新登录');\n        \n        // 认证错误时，可以尝试将错误信息发送到上层组件\n        // 例如可以调用onAuthError函数（如果有的话）\n        console.warn('[通知] 检测到认证错误，请检查登录状态');\n      } else {\n        setError('获取通知失败，请稍后再试');\n      }\n      \n      // 如果首次加载失败且尝试次数少于3次，自动重试\n      if (retryCount.current < 3 && !isAuthError) {\n        retryCount.current += 1;\n        console.log(`[通知] 将在2秒后进行第${retryCount.current}次重试`);\n        setTimeout(() => loadNotifications(true), 2000);\n      }\n    } finally {\n      if (!silent) {\n        setLoading(false);\n      }\n    }\n  };\n  \n  // 初始化加载\n  useEffect(() => {\n    loadNotifications();\n  }, [page]); // 只依赖于页码，不依赖于过滤器\n\n  // 处理通知点击\n  const handleNotificationClick = async (notification: Notification) => {\n    if (!hasValidAuth()) return;\n    \n    try {\n      // 如果未读，标记为已读\n      if (!notification.is_read) {\n        await markNotificationAsRead(notification.id);\n        \n        // 更新本地状态\n        setAllNotifications(prev => \n          prev.map(n => \n            n.id === notification.id ? { ...n, is_read: true } : n\n          )\n        );\n        \n        // 更新未读数\n        onUpdateUnreadCount(allNotifications.filter(n => !n.is_read && n.id !== notification.id).length);\n      }\n      \n      // 关闭弹窗\n      onClose();\n      \n      // 导航到相关链接\n      if (notification.related_url) {\n        // 检查是否需要在新窗口打开链接\n        if (notification.related_url.includes('/profile/')) {\n          window.open(notification.related_url, '_blank');\n        } else {\n          navigate(notification.related_url);\n        }\n      }\n    } catch (error: any) {\n      console.error('[通知] 标记通知已读失败', error);\n      // 即使标记失败也允许导航\n      if (notification.related_url) {\n        onClose();\n        if (notification.related_url.includes('/profile/')) {\n          window.open(notification.related_url, '_blank');\n        } else {\n          navigate(notification.related_url);\n        }\n      }\n    }\n  };\n\n  // 标记所有为已读\n  const handleMarkAllAsRead = async () => {\n    if (!hasValidAuth()) return;\n    \n    // 如果没有通知或全部已读，无需操作\n    if (allNotifications.length === 0 || allNotifications.every(n => n.is_read)) {\n      return;\n    }\n    \n    try {\n      await markAllNotificationsAsRead();\n      \n      // 更新本地状态\n      setAllNotifications(prev => prev.map(n => ({ ...n, is_read: true })));\n      \n      // 更新未读数\n      onUpdateUnreadCount(0);\n    } catch (error) {\n      console.error('[通知] 标记全部已读失败', error);\n    }\n  };\n\n  // 格式化时间\n  const formatTime = (timeString: string) => {\n    try {\n      const date = new Date(timeString);\n      return formatDistanceToNow(date, { addSuffix: true, locale: zhCN });\n    } catch (error) {\n      console.error('[通知] 时间格式化失败', error);\n      return timeString;\n    }\n  };\n\n  // 处理图片加载错误\n  const handleImageError = (e: React.SyntheticEvent<HTMLImageElement>) => {\n    e.currentTarget.src = 'https://via.placeholder.com/32x32?text=?';\n  };\n\n  // 尝试重新加载\n  const handleRetry = () => {\n    setError(null);\n    loadNotifications();\n  };\n\n  // 切换过滤器的处理函数\n  const handleFilterChange = (showUnreadOnly: boolean) => {\n    setUnreadFilter(showUnreadOnly);\n  };\n\n  return (\n    <div className=\"flex flex-col w-full\">\n      {/* 顶部过滤器和操作栏 */}\n      <div className=\"flex justify-between items-center py-2 px-3 border-b border-gray-200/50\">\n        <div className=\"flex space-x-2\">\n          <button\n            className={`text-xs py-1 px-2 rounded text-black ${\n              !unreadFilter \n                ? 'bg-gray-200/70 font-medium' \n                : 'hover:bg-gray-100/70'\n            }`}\n            onClick={() => handleFilterChange(false)}\n          >\n            全部\n          </button>\n          <button\n            className={`text-xs py-1 px-2 rounded text-black ${\n              unreadFilter \n                ? 'bg-gray-200/70 font-medium' \n                : 'hover:bg-gray-100/70'\n            }`}\n            onClick={() => handleFilterChange(true)}\n          >\n            未读\n          </button>\n        </div>\n        <button\n          className=\"text-xs text-black py-1 px-2 rounded flex items-center space-x-1 hover:bg-gray-100/70\"\n          onClick={handleMarkAllAsRead}\n          disabled={allNotifications.length === 0 || allNotifications.every(n => n.is_read)}\n        >\n          <CheckCheck className=\"h-3 w-3\" />\n          <span>全部已读</span>\n        </button>\n      </div>\n\n      {/* 通知列表 */}\n      <div className=\"max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-100\">\n        {loading ? (\n          <div className=\"py-8 flex justify-center items-center\">\n            <div className=\"animate-spin rounded-full h-6 w-6 border-t-2 border-gray-600\"></div>\n          </div>\n        ) : error ? (\n          <div className=\"py-8 px-4 text-center\">\n            <p className=\"text-sm text-gray-600 mb-2\">{error}</p>\n            <button\n              className=\"text-xs bg-gray-200 text-gray-700 py-1 px-3 rounded-full flex items-center mx-auto space-x-1 hover:bg-gray-300\"\n              onClick={handleRetry}\n            >\n              <RefreshCcw className=\"h-3 w-3\" />\n              <span>重试</span>\n            </button>\n          </div>\n        ) : filteredNotifications.length === 0 ? (\n          <div className=\"py-12 px-4 text-center text-gray-600\">\n            <p className=\"text-sm\">{unreadFilter ? '没有未读通知' : '暂无通知'}</p>\n          </div>\n        ) : (\n          <ul className=\"divide-y divide-gray-200\">\n            {filteredNotifications.map((notification) => (\n              <li \n                key={notification.id}\n                className={`p-3 hover:bg-gray-100 cursor-pointer transition-colors duration-200 flex items-start space-x-3 ${\n                  !notification.is_read ? 'bg-blue-50' : ''\n                }`}\n                onClick={() => handleNotificationClick(notification)}\n              >\n                {notification.actor && notification.actor.avatar && (\n                  <img \n                    src={notification.actor.avatar} \n                    alt={notification.actor.nickname || '用户头像'} \n                    className=\"h-8 w-8 rounded-full object-cover flex-shrink-0\"\n                    onError={handleImageError}\n                  />\n                )}\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-start justify-between mb-1\">\n                    <span className=\"text-sm font-medium text-black truncate\">\n                      {notification.actor?.nickname || '系统通知'}\n                    </span>\n                    <span className=\"text-xs text-gray-500 ml-2 flex-shrink-0\">\n                      {formatTime(notification.created_at)}\n                    </span>\n                  </div>\n                  <p className=\"text-xs text-gray-700 line-clamp-2\">\n                    {notification.content}\n                  </p>\n                  {!notification.is_read && (\n                    <div className=\"mt-1 flex justify-end\">\n                      <span className=\"inline-flex items-center bg-green-100 text-green-700 rounded-full px-2 py-0.5 text-[10px]\">\n                        <span className=\"h-1.5 w-1.5 bg-green-500 rounded-full mr-1\"></span>\n                        新消息\n                      </span>\n                    </div>\n                  )}\n                </div>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n\n      {/* 分页控制 */}\n      {!loading && !error && totalPages > 1 && (\n        <div className=\"flex justify-between items-center px-3 py-2 border-t border-gray-200\">\n          <button\n            className=\"text-xs text-gray-600 hover:text-black disabled:text-gray-400 disabled:cursor-not-allowed\"\n            onClick={() => setPage(prev => Math.max(1, prev - 1))}\n            disabled={page === 1}\n          >\n            上一页\n          </button>\n          <span className=\"text-xs text-gray-600\">\n            {page} / {totalPages}\n          </span>\n          <button\n            className=\"text-xs text-gray-600 hover:text-black disabled:text-gray-400 disabled:cursor-not-allowed\"\n            onClick={() => setPage(prev => Math.min(totalPages, prev + 1))}\n            disabled={page === totalPages}\n          >\n            下一页\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default NotificationPopover; ","import React, { useState, useEffect, useRef } from 'react';\nimport { Bell } from 'lucide-react';\nimport { useAuth } from '../context/AuthContext';\nimport { fetchUnreadNotificationCount } from '../api/notificationApi';\nimport NotificationPopover from './NotificationPopover';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst NotificationIcon: React.FC = () => {\n  const { user, token } = useAuth();\n  const [unreadCount, setUnreadCount] = useState<number>(0);\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n  const [hasError, setHasError] = useState<boolean>(false);\n  const [errorCount, setErrorCount] = useState<number>(0);\n  const [shouldShow, setShouldShow] = useState<boolean>(true);\n  const errorTimerRef = useRef<NodeJS.Timeout | null>(null);\n  const loadingRef = useRef<boolean>(false);\n  const popoverRef = useRef<HTMLDivElement>(null);\n  \n  // 验证是否有有效的登录状态\n  const hasValidAuth = (): boolean => {\n    return !!(token && user && localStorage.getItem('token'));\n  };\n  \n  // 加载未读通知数量\n  useEffect(() => {\n    const loadUnreadCount = async () => {\n      // 验证登录状态\n      if (!hasValidAuth() || loadingRef.current) return;\n      \n      loadingRef.current = true;\n      \n      try {\n        console.log('[通知] 开始获取未读通知数量...');\n        const count = await fetchUnreadNotificationCount();\n        console.log(`[通知] 获取到未读通知数量: ${count}`);\n        setUnreadCount(count);\n        setHasError(false);\n        setErrorCount(0);\n        setShouldShow(true);\n      } catch (error) {\n        console.error('[通知] 获取未读通知数量失败', error);\n        // 检查是否是401错误（未授权）\n        const isAuthError = error && (\n          (error as any).response?.status === 401 || \n          (error as any).status === 401\n        );\n        \n        if (isAuthError) {\n          console.log('[通知] 认证错误，可能需要重新登录');\n          setShouldShow(false); // 认证错误时隐藏通知图标\n          return;\n        }\n        \n        setHasError(true);\n        setErrorCount(prev => prev + 1);\n        \n        if (errorCount >= 3) {\n          console.log('[通知] 连续错误超过3次，暂时隐藏通知图标');\n          setShouldShow(false);\n          \n          if (errorTimerRef.current) {\n            clearTimeout(errorTimerRef.current);\n          }\n          \n          errorTimerRef.current = setTimeout(() => {\n            console.log('[通知] 尝试恢复显示通知图标');\n            setShouldShow(true);\n            setErrorCount(0);\n            loadUnreadCount();\n          }, 30000);\n        }\n      } finally {\n        loadingRef.current = false;\n      }\n    };\n    \n    // 初始加载\n    if (hasValidAuth()) {\n      loadUnreadCount();\n    }\n    \n    // 设置轮询\n    const intervalId = setInterval(() => {\n      if (hasValidAuth()) {\n        loadUnreadCount();\n      }\n    }, 60000);\n    \n    return () => {\n      clearInterval(intervalId);\n      if (errorTimerRef.current) {\n        clearTimeout(errorTimerRef.current);\n      }\n    };\n  }, [user, token, errorCount]);\n\n  // 点击外部关闭弹窗\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (popoverRef.current && !popoverRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n    \n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    \n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [isOpen]);\n\n  // 打开/关闭通知面板\n  const toggleNotifications = () => {\n    if (hasError) {\n      setHasError(false);\n      if (!loadingRef.current && hasValidAuth()) {\n        fetchUnreadNotificationCount()\n          .then(count => {\n            setUnreadCount(count);\n            setIsOpen(true);\n          })\n          .catch(error => {\n            console.error('[通知] 重试获取未读通知数量失败', error);\n            setHasError(true);\n          });\n      }\n      return;\n    }\n    setIsOpen(!isOpen);\n  };\n\n  // 手动更新未读数\n  const updateUnreadCount = (newCount: number) => {\n    setUnreadCount(newCount);\n  };\n\n  // 未登录或不应显示时不显示通知图标\n  if (!hasValidAuth() || !shouldShow) return null;\n\n  return (\n    <div className=\"relative\" ref={popoverRef}>\n      <motion.button\n        onClick={toggleNotifications}\n        className={`z-50 flex items-center justify-center w-8 h-8 rounded-full transition-all duration-300 hover:bg-white/10 ${hasError ? 'opacity-50' : ''}`}\n        whileHover={{ scale: 1.05 }}\n        whileTap={{ scale: 0.95 }}\n        aria-label={hasError ? \"通知加载失败，点击重试\" : \"通知\"}\n      >\n        <Bell className=\"h-5 w-5 text-black\" strokeWidth={2} />\n        {!hasError && unreadCount > 0 && (\n          <span className=\"absolute top-0 right-0 h-4 w-4 flex items-center justify-center text-[9px] text-white bg-red-500 rounded-full\">\n            {unreadCount > 99 ? '99+' : unreadCount}\n          </span>\n        )}\n      </motion.button>\n      \n      <AnimatePresence>\n        {isOpen && !hasError && (\n          <motion.div\n            className=\"absolute right-0 top-full mt-1 w-80 z-50 flex flex-col items-start\"\n            initial={{ opacity: 0, y: -5, scale: 0.95 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: -5, scale: 0.95 }}\n            transition={{ \n              duration: 0.15,\n              ease: [0.4, 0, 0.2, 1]\n            }}\n          >\n            <motion.div \n              className=\"w-full bg-white border border-gray-200 shadow-xl rounded-lg overflow-hidden\"\n              variants={{\n                hidden: { opacity: 0, y: -10 },\n                show: { opacity: 1, y: 0 }\n              }}\n            >\n              <div className=\"p-2\">\n                <NotificationPopover\n                  onClose={() => setIsOpen(false)}\n                  onUpdateUnreadCount={updateUnreadCount}\n                />\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default NotificationIcon; ","/**\n * 此文件定义了 Navbar 组件，即应用程序的顶部导航栏。\n *\n * 主要功能:\n * - 显示网站 Logo 或名称。\n * - 提供主要的导航链接 (如文章、工具、社区等)，可在新窗口中打开。\n * - 可能包含用户状态显示 (登录/注册按钮或用户头像/菜单)。\n * - 整合了原侧边栏的导航功能，顶部水平显示\n * - 在不同屏幕尺寸下可能具有响应式布局。\n * - 导航内容居中显示，与页面主内容对齐\n *\n * 注意: 如果新增、删除或修改功能，必须在这开头的注释中同步修改，\n * 如发现功能与注释描述不同，也可以在确定后修改。\n */\nimport React, { useCallback, useEffect, useState, useRef } from 'react';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { useSidebar } from '../contexts/SidebarContext';\nimport { useUserFavorites, FavoriteItem } from '../hooks/useFavoriteQueries';\nimport { useQueryClient } from '@tanstack/react-query';\nimport CustomLink from './CustomLink';\nimport { useLinkBehavior } from '../contexts/LinkBehaviorContext';\nimport ReactDOM from 'react-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport NotificationIcon from './NotificationIcon';\n\n// 简易的工具提示组件\nconst SimpleTooltip = ({ text, isVisible }: { text: string, isVisible: boolean }) => {\n  const [portalNode, setPortalNode] = useState<HTMLElement | null>(null);\n  const [position, setPosition] = useState({ top: 0, left: 0 });\n  \n  // 初始化Portal节点\n  useEffect(() => {\n    let node = document.getElementById('simple-tooltip-portal');\n    if (!node) {\n      node = document.createElement('div');\n      node.id = 'simple-tooltip-portal';\n      document.body.appendChild(node);\n    }\n    setPortalNode(node);\n  }, []);\n  \n  // 计算位置\n  useEffect(() => {\n    if (isVisible) {\n      const handleMouseMove = (e: MouseEvent) => {\n        setPosition({\n          left: e.clientX - 50,\n          top: e.clientY + 20\n        });\n      };\n      \n      document.addEventListener('mousemove', handleMouseMove);\n      \n      if (window.event instanceof MouseEvent) {\n        handleMouseMove(window.event);\n      }\n      \n      return () => {\n        document.removeEventListener('mousemove', handleMouseMove);\n      };\n    }\n  }, [isVisible]);\n  \n  if (!portalNode || !isVisible) return null;\n  \n  return ReactDOM.createPortal(\n    <motion.div \n      className=\"fixed z-[9999] bg-gray-800 text-white rounded-md shadow-lg px-3 py-2 text-sm\"\n      style={{ \n        top: `${position.top}px`, \n        left: `${position.left}px`,\n        pointerEvents: 'none'\n      }}\n      initial={{ opacity: 0, y: 5 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: 5 }}\n      transition={{ duration: 0.2 }}\n    >\n      {text}\n    </motion.div>,\n    portalNode\n  );\n};\n\n// 通用导航链接组件，确保所有顶部链接行为一致\nconst NavLink = ({ to, children, title }: { to: string; children: React.ReactNode; title?: string }) => {\n  const location = useLocation();\n  \n  // 检查链接是否处于活动状态\n  const isActive = (path: string) => {\n    if (path === '/') {\n      return location.pathname === '/';\n    }\n    return location.pathname.startsWith(path);\n  };\n  \n  // 复用Navbar组件中的openInNewTabWithPreload方法\n  const openInNewTabWithPreload = (url: string) => (e: React.MouseEvent) => {\n    e.preventDefault();\n    const preloadUrl = `/preload.html?redirect=${encodeURIComponent(url)}`;\n    const newWindow = window.open(preloadUrl, '_blank');\n    if (newWindow) {\n      newWindow.opener = null;\n    }\n  };\n  \n  return (\n    <Link\n      to={to}\n      onClick={openInNewTabWithPreload(to)}\n      title={title || String(children)}\n      className={`flex items-center px-2 py-1.5 text-sm font-medium rounded-md transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] ${\n        isActive(to)\n          ? 'text-black bg-gradient-to-r from-green-200/30 to-blue-200/30 opacity-100 shadow-inner'\n          : 'text-black hover:bg-gradient-to-r hover:from-green-200/10 hover:to-blue-200/10 hover:opacity-90 hover:shadow-sm'\n      }`}\n    >\n      {children}\n    </Link>\n  );\n};\n\nconst Navbar: React.FC<{ className?: string }> = ({ className }) => {\n  const { token, user, logout, isLoading } = useAuth();\n  const { toggleSidebar } = useSidebar();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const queryClient = useQueryClient();\n  const { openInNewTab, toggleOpenInNewTab } = useLinkBehavior();\n  const menuRef = useRef<HTMLDivElement>(null);\n  const profileMenuRef = useRef<HTMLDivElement>(null);\n\n  const {\n    data: favoriteItems = [],\n    isLoading: loadingFavorites,\n  } = useUserFavorites(token);\n\n  const handleFavoritesUpdated = useCallback(() => {\n    queryClient.invalidateQueries({ queryKey: ['userFavorites'] });\n  }, [queryClient]);\n\n  useEffect(() => {\n    window.addEventListener('favoritesUpdated', handleFavoritesUpdated);\n    return () => {\n      window.removeEventListener('favoritesUpdated', handleFavoritesUpdated);\n    };\n  }, [handleFavoritesUpdated]);\n\n  const handleLogout = () => {\n    logout();\n  };\n\n  // 辅助函数：在新窗口中使用预加载页面打开链接\n  const openInNewTabWithPreload = (url: string) => (e: React.MouseEvent) => {\n    e.preventDefault();\n    const preloadUrl = `/preload.html?redirect=${encodeURIComponent(url)}`;\n    const newWindow = window.open(preloadUrl, '_blank');\n    if (newWindow) {\n      newWindow.opener = null;\n    }\n  };\n\n  const [writeTooltip, setWriteTooltip] = useState(false);\n  const [shareTooltip, setShareTooltip] = useState(false);\n  const [profileTooltip, setProfileTooltip] = useState(false);\n  const [isWriteMenuOpen, setIsWriteMenuOpen] = useState(false);\n  const [isProfileMenuOpen, setIsProfileMenuOpen] = useState(false);\n\n  // 处理点击外部关闭菜单\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        setIsWriteMenuOpen(false);\n      }\n      \n      if (profileMenuRef.current && !profileMenuRef.current.contains(event.target as Node)) {\n        setIsProfileMenuOpen(false);\n      }\n    };\n\n    // 只有当菜单打开时，才添加点击事件监听器\n    if (isWriteMenuOpen || isProfileMenuOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    \n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isWriteMenuOpen, isProfileMenuOpen]);\n\n  // 在新窗口打开个人主页\n  const goToProfile = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation(); // 阻止事件冒泡\n    setIsProfileMenuOpen(false);\n    \n    // 检查用户是否已登录\n    if (token && user) {\n      // 构建URL，添加时间戳参数防止缓存问题\n      const profileUrl = `/profile/me?t=${Date.now()}`;\n      \n      // 创建新的a标签并模拟点击\n      const a = document.createElement('a');\n      a.href = profileUrl;\n      a.target = '_blank';\n      a.rel = 'noopener noreferrer';\n      document.body.appendChild(a);\n      a.click();\n      setTimeout(() => {\n        document.body.removeChild(a);\n      }, 0);\n    } else {\n      // 如果用户未登录，则在当前窗口导航到登录页\n      navigate('/login', { state: { from: '/profile/me' } });\n    }\n  };\n\n  // 处理退出登录\n  const handleLogoutClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsProfileMenuOpen(false);\n    logout();\n    navigate('/login');\n  };\n\n  if (isLoading) {\n    return null;\n  }\n\n  return (\n    <nav className={`py-4 z-40 bg-transparent ${className || ''}`}>\n      <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between items-center\">\n          <div className=\"flex items-center\">\n            <CustomLink \n              to=\"/\" \n              forceSameTab={true}\n              className=\"flex items-center text-xl font-serif font-semibold text-black hover:text-gray-700 transition-colors duration-200\"\n              style={{ fontFamily: '-apple-system, BlinkMacSystemFont, \"PingFang SC\", \"Helvetica Neue\", Helvetica, Arial, sans-serif' }}\n            >\n              SynSpirit\n            </CustomLink>\n          </div>\n\n          {/* 中间的导航链接区域 */}\n          <div className=\"hidden md:flex items-center space-x-6\">\n            <NavLink to=\"/articles\" title=\"文章\">文章</NavLink>\n            <NavLink to=\"/tools\" title=\"工具\">工具</NavLink>\n            \n            {user && (\n              <>\n                <NavLink to=\"/community\" title=\"社区\">社区</NavLink>\n                <NavLink to=\"/space\" title=\"空间\">空间</NavLink>\n              </>\n            )}\n          </div>\n          \n          <div className=\"flex space-x-8 items-center\">\n            {/* 右侧操作区域 */}\n            <div className=\"flex items-center space-x-4\">\n              {!token ? (\n                <>\n                  <CustomLink\n                    to=\"/login\"\n                    className=\"text-gray-300 hover:text-white transition-colors duration-200 text-sm\"\n                  >\n                    登录\n                  </CustomLink>\n                  <CustomLink\n                    to=\"/register\"\n                    className=\"bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white px-4 py-1.5 rounded-full text-sm transition-all duration-300 shadow hover:shadow-lg\"\n                  >\n                    注册\n                  </CustomLink>\n                </>\n              ) : (\n                <>\n                  {/* 写文章/动态按钮 - 修改为动画下拉菜单 */}\n                  <div className=\"relative\" ref={menuRef}>\n                    <motion.button\n                      onClick={() => setIsWriteMenuOpen(!isWriteMenuOpen)}\n                      className=\"z-50 flex items-center justify-center w-8 h-8 rounded-full transition-all duration-300 hover:bg-white/10\"\n                      whileHover={{ scale: 1.05 }}\n                      whileTap={{ scale: 0.95 }}\n                      aria-label=\"创建新内容\"\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\" viewBox=\"0 0 24 24\" fill=\"none\">\n                        <path d=\"M12 4V20\" stroke=\"black\" strokeWidth=\"2.2\" strokeLinecap=\"round\" />\n                        <path d=\"M4 12H20\" stroke=\"black\" strokeWidth=\"2.2\" strokeLinecap=\"round\" />\n                      </svg>\n                    </motion.button>\n                    \n                    {/* 动画下拉菜单 */}\n                    <AnimatePresence>\n                      {isWriteMenuOpen && (\n                        <motion.div \n                          className=\"absolute right-0 top-full mt-1 w-28 z-50 flex flex-col items-start\"\n                          initial={{ opacity: 0, y: -5, scale: 0.95 }}\n                          animate={{ opacity: 1, y: 0, scale: 1 }}\n                          exit={{ opacity: 0, y: -5, scale: 0.95 }}\n                          transition={{ \n                            duration: 0.15,\n                            ease: [0.4, 0, 0.2, 1]\n                          }}\n                        >\n                          <motion.div \n                            className=\"w-full bg-white border border-gray-200 shadow-xl rounded-lg overflow-hidden\"\n                            variants={{\n                              hidden: { opacity: 0 },\n                              show: { opacity: 1 }\n                            }}\n                          >\n                            <motion.div\n                              initial={{ x: -5, opacity: 0 }}\n                              animate={{ x: 0, opacity: 1 }}\n                              transition={{ delay: 0.05, duration: 0.12 }}\n                              className=\"w-full\"\n                            >\n                              <CustomLink\n                                to=\"/new-article\"\n                                className=\"block px-3 py-1.5 text-xs text-black font-medium hover:bg-gray-100 transition-colors duration-150 w-full text-left\"\n                                onClick={() => setIsWriteMenuOpen(false)}\n                              >\n                                写文章\n                              </CustomLink>\n                            </motion.div>\n                            \n                            <motion.div\n                              initial={{ x: -5, opacity: 0 }}\n                              animate={{ x: 0, opacity: 1 }}\n                              transition={{ delay: 0.08, duration: 0.12 }}\n                              className=\"w-full\"\n                            >\n                              <button\n                                className=\"block px-3 py-1.5 text-xs text-black font-medium hover:bg-gray-100 transition-colors duration-150 w-full text-left\"\n                                onClick={(e) => {\n                                  e.preventDefault();\n                                  setIsWriteMenuOpen(false);\n                                  // 分发自定义事件，主页组件监听此事件以打开动态发布窗口\n                                  const event = new CustomEvent('openCreateDynamicModal');\n                                  window.dispatchEvent(event);\n                                }}\n                              >\n                                发动态\n                              </button>\n                            </motion.div>\n                          </motion.div>\n                        </motion.div>\n                      )}\n                    </AnimatePresence>\n                  </div>\n                  \n                  {/* 通知图标 */}\n                  <div className=\"relative hidden md:block\">\n                    <NotificationIcon key={`notification-${user?.id || 'guest'}`} />\n                  </div>\n                  \n                  {/* 个人资料图标 - 修改为带有菜单的按钮 */}\n                  <div className=\"relative\" ref={profileMenuRef}>\n                    <button\n                      onClick={() => setIsProfileMenuOpen(!isProfileMenuOpen)}\n                      className=\"border border-gray-600 rounded-full overflow-hidden hover:border-gray-400 transition-colors duration-200 flex items-center justify-center w-8 h-8\"\n                    >\n                      {user && user.avatar ? (\n                        <img \n                          src={user.avatar} \n                          alt={user.nickname || user.email || 'User avatar'} \n                          className=\"h-full w-full object-cover\"\n                          onError={(e) => {\n                            e.currentTarget.src = 'https://synspirit-test-131313901.cos.ap-shanghai.myqcloud.com/system/default_avatar.png';\n                          }}\n                        />\n                      ) : (\n                        <span className=\"text-white text-xs\">\n                          {user && user.nickname ? user.nickname.charAt(0).toUpperCase() : user && user.email ? user.email.charAt(0).toUpperCase() : 'U'}\n                        </span>\n                      )}\n                    </button>\n                    \n                    {/* 个人资料下拉菜单 */}\n                    <AnimatePresence>\n                      {isProfileMenuOpen && (\n                        <motion.div \n                          className=\"absolute right-0 top-full mt-1 w-28 z-50 flex flex-col items-start\"\n                          initial={{ opacity: 0, y: -5, scale: 0.95 }}\n                          animate={{ opacity: 1, y: 0, scale: 1 }}\n                          exit={{ opacity: 0, y: -5, scale: 0.95 }}\n                          transition={{ \n                            duration: 0.15,\n                            ease: [0.4, 0, 0.2, 1]\n                          }}\n                        >\n                          <motion.div \n                            className=\"w-full bg-white border border-gray-200 shadow-xl rounded-lg overflow-hidden\"\n                            variants={{\n                              hidden: { opacity: 0 },\n                              show: { opacity: 1 }\n                            }}\n                          >\n                            <motion.div\n                              initial={{ x: -5, opacity: 0 }}\n                              animate={{ x: 0, opacity: 1 }}\n                              transition={{ delay: 0.05, duration: 0.12 }}\n                              className=\"w-full\"\n                            >\n                              <button\n                                onClick={goToProfile}\n                                className=\"block px-3 py-1.5 text-xs text-black font-medium hover:bg-gray-100 transition-colors duration-150 w-full text-left\"\n                              >\n                                个人主页\n                              </button>\n                            </motion.div>\n                            \n                            <motion.div\n                              initial={{ x: -5, opacity: 0 }}\n                              animate={{ x: 0, opacity: 1 }}\n                              transition={{ delay: 0.08, duration: 0.12 }}\n                              className=\"w-full\"\n                            >\n                              <button\n                                onClick={handleLogoutClick}\n                                className=\"block px-3 py-1.5 text-xs text-black font-medium hover:bg-gray-100 transition-colors duration-150 w-full text-left\"\n                              >\n                                退出登录\n                              </button>\n                            </motion.div>\n                          </motion.div>\n                        </motion.div>\n                      )}\n                    </AnimatePresence>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </nav>\n  );\n};\n\nexport default Navbar;\n","import React, { useEffect, lazy, Suspense, useState } from 'react';\nimport { Outlet } from 'react-router-dom';\nimport { useTimeline } from '../contexts/TimelineContext';\nimport { motion, AnimatePresence, useReducedMotion } from 'framer-motion';\nimport Navbar from '../components/Navbar';\n\n/**\n * 主布局组件\n * \n * 功能：\n * - 提供全站统一的渐变背景色\n * - 显示顶部导航栏，包含所有导航功能\n * - 允许页面内容自然流动，确保子页面可以独立滚动\n * - 内容区域居中显示，左右边距相等\n * - 集成动态时间栏，支持流畅的展开和收起动画\n * - 时间栏展开时不锁定原动态栏，保持上下滚动功能\n * - 使用硬件加速和高性能动画配置\n * - 减少时间栏右侧边距，增加内容显示宽度\n * - 彻底解决左侧动态栏滚动问题\n * - 确保顶部导航栏始终位于时间栏上方，不会被遮挡\n * \n * 布局结构：\n * 1. 背景层：固定定位(fixed)，不随页面滚动\n * 2. 内容层：相对定位(relative)，完全流式布局，不控制滚动\n * 3. 子页面可以实现自己的独立滚动区域\n * 4. 时间栏层：右侧滑入滑出，带有丰富的动画效果，位于导航栏下方\n * \n * 注意：此组件是整个站点唯一的背景色来源，其他组件不应设置全局背景\n */\nconst DynamicTimelineView = lazy(() => import('../components/DynamicTimelineView'));\n\n// 主内容位移动画配置 - 使用transform替代位移\nconst contentVariants = {\n  open: { \n    x: '-70%',\n    transition: {\n      type: 'tween', \n      ease: 'easeInOut',\n      duration: 0.3,\n    }\n  },\n  closed: { \n    x: '0%',\n    transition: {\n      type: 'tween',\n      ease: 'easeInOut',\n      duration: 0.3,\n    }\n  }\n};\n\n// 时间栏动画配置 - 简化动画\nconst timelineVariants = {\n  hidden: { \n    x: '100%', \n    opacity: 0.3 \n  },\n  visible: { \n    x: 0, \n    opacity: 1,\n    transition: { \n      type: 'tween',\n      ease: 'easeInOut',\n      duration: 0.3,\n      when: \"beforeChildren\",\n      staggerChildren: 0.05\n    }\n  },\n  exit: { \n    x: '100%', \n    opacity: 0,\n    transition: { \n      type: 'tween',\n      ease: 'easeInOut',\n      duration: 0.3, \n    }\n  }\n};\n\n// 时间栏内部元素动画\nconst childVariants = {\n  hidden: { opacity: 0, x: 10 },\n  visible: { \n    opacity: 1, \n    x: 0,\n    transition: { \n      type: 'tween',\n      ease: 'easeInOut',\n      duration: 0.3\n    }\n  }\n};\n\n// 毛玻璃背景\nconst glassVariants = {\n  hidden: { backdropFilter: 'blur(0px)', backgroundColor: 'rgba(0, 0, 0, 0)' },\n  visible: { \n    backdropFilter: 'blur(0px)', \n    backgroundColor: 'rgba(0, 0, 0, 0)',\n    transition: { duration: 0.2 }\n  },\n  exit: { \n    backdropFilter: 'blur(0px)', \n    backgroundColor: 'rgba(0, 0, 0, 0)',\n    transition: { duration: 0.2 }\n  }\n};\n\nconst MainLayout: React.FC = () => {\n  const { isTimelineOpen, closeTimeline } = useTimeline();\n  const prefersReducedMotion = useReducedMotion();\n  const [rendered, setRendered] = useState(false);\n  const [navbarHeight, setNavbarHeight] = useState(0);\n\n  // 确保只在客户端渲染后才应用动画\n  useEffect(() => {\n    setRendered(true);\n    \n    // 获取导航栏高度，用于定位时间栏\n    const updateNavbarHeight = () => {\n      const navbar = document.querySelector('nav');\n      if (navbar) {\n        const height = navbar.offsetHeight;\n        // 只有当高度确实变化时才更新\n        if (height !== navbarHeight && height > 0) {\n          setNavbarHeight(height);\n          // 设置CSS变量以便CSS样式使用\n          document.documentElement.style.setProperty('--navbar-height', `${height}px`);\n        }\n      }\n    };\n    \n    // 初始计算\n    updateNavbarHeight();\n    \n    // 使用ResizeObserver代替resize事件，更精确地监听导航栏大小变化\n    const resizeObserver = new ResizeObserver(updateNavbarHeight);\n    const navbar = document.querySelector('nav');\n    if (navbar) {\n      resizeObserver.observe(navbar);\n    }\n    \n    // 添加一个延迟检查，确保在DOM完全渲染后再次更新高度\n    const timeout = setTimeout(updateNavbarHeight, 100);\n    \n    return () => {\n      if (navbar) {\n        resizeObserver.unobserve(navbar);\n      }\n      resizeObserver.disconnect();\n      clearTimeout(timeout);\n      // 清除CSS变量\n      document.documentElement.style.removeProperty('--navbar-height');\n    };\n  }, [navbarHeight]);\n\n  // 处理页面滚动问题的核心函数 - 大幅简化或移除\n  useEffect(() => {\n    // 此useEffect的目的是管理滚动。TimelineContext已经通过添加/移除 'timeline-view-active' 类到body来做这件事。\n    // 我们应该在全局CSS中定义 .timeline-view-active 如何影响body的滚动。\n    // 例如:\n    // body.timeline-view-active { overflow: hidden; /* 或者其他需要的样式 */ }\n    // framer-motion的AnimatePresence和motion组件会处理时间栏自身的出现和消失动画。\n    // 主内容区的位移 (contentVariants) 也会由framer-motion处理。\n  }, [isTimelineOpen]);\n\n  // 监听时间栏状态变化\n  useEffect(() => {\n    // 监听时间栏关闭\n    if (!isTimelineOpen && rendered) {\n      // 检查URL是否为动态详情页，如果是则强制恢复\n      if (window.location.pathname.startsWith('/dynamic/')) {\n        const previousUrl = sessionStorage.getItem('previousUrl') || '/';\n        console.log('[MainLayout] 检测到时间栏关闭，强制恢复URL到:', previousUrl);\n        sessionStorage.removeItem('previousUrl');\n        window.history.replaceState(null, '', previousUrl);\n      }\n    }\n  }, [isTimelineOpen, rendered]);\n\n  return (\n    <>\n      {/* 固定背景层 */}\n      <div \n        className=\"fixed inset-0 w-full h-full overflow-hidden\"\n        style={{ \n          background: '#ffffff', /* 修改为纯白色背景 */\n          zIndex: -10,\n          opacity: 1\n        }}\n      />\n      \n      {/* 顶部导航栏 - 提高z-index确保最顶层 */}\n      <Navbar className=\"relative z-50\" />\n      \n      {/* 居中容器 - 添加最大宽度和居中对齐 */}\n      <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 w-full min-h-screen overflow-visible\"> \n        \n        {/* 主内容层 - 使用transform:translateX而非定位 */}\n        <motion.div \n          className=\"w-full\"\n          animate={isTimelineOpen && rendered ? 'open' : 'closed'}\n          initial={false}\n          variants={contentVariants}\n          style={{\n            willChange: 'transform',\n            // 使用transform而非定位，避免影响滚动\n            position: 'static',\n            zIndex: 1\n          }}\n        >\n          <Outlet />\n        </motion.div>\n\n        {/* 背景遮罩层已移除 */}\n\n        {/* 时间栏容器 - 修改定位，确保位于导航栏下方 */}\n        <AnimatePresence>\n          {isTimelineOpen && rendered && (\n            <motion.div \n              className=\"fixed right-0 z-40 overflow-y-auto flex justify-center items-start\"\n              style={{ \n                width: '70%',\n                willChange: 'transform, opacity',\n                pointerEvents: 'auto',\n                touchAction: 'pan-y',\n                WebkitOverflowScrolling: 'touch',\n                top: `${navbarHeight}px`, // 根据导航栏高度动态设置顶部偏移\n                height: `calc(100vh - ${navbarHeight}px)`, // 调整高度，避免与导航栏重叠\n              }}\n              initial=\"hidden\"\n              animate=\"visible\"\n              exit=\"exit\"\n              variants={timelineVariants}\n            >\n              <motion.div \n                variants={childVariants} \n              >\n                <Suspense fallback={<div className=\"text-center text-white/50 mt-10\">加载中...</div>}>\n                  <DynamicTimelineView />\n                </Suspense>\n              </motion.div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </>\n  );\n};\n\nexport default MainLayout; ","import { useState } from 'react';\nimport { initPrefersReducedMotion } from './index.mjs';\nimport { warnOnce } from '../warn-once.mjs';\nimport { hasReducedMotionListener, prefersReducedMotion } from './state.mjs';\n\n/**\n * A hook that returns `true` if we should be using reduced motion based on the current device's Reduced Motion setting.\n *\n * This can be used to implement changes to your UI based on Reduced Motion. For instance, replacing motion-sickness inducing\n * `x`/`y` animations with `opacity`, disabling the autoplay of background videos, or turning off parallax motion.\n *\n * It will actively respond to changes and re-render your components with the latest setting.\n *\n * ```jsx\n * export function Sidebar({ isOpen }) {\n *   const shouldReduceMotion = useReducedMotion()\n *   const closedX = shouldReduceMotion ? 0 : \"-100%\"\n *\n *   return (\n *     <motion.div animate={{\n *       opacity: isOpen ? 1 : 0,\n *       x: isOpen ? 0 : closedX\n *     }} />\n *   )\n * }\n * ```\n *\n * @return boolean\n *\n * @public\n */\nfunction useReducedMotion() {\n    /**\n     * Lazy initialisation of prefersReducedMotion\n     */\n    !hasReducedMotionListener.current && initPrefersReducedMotion();\n    const [shouldReduceMotion] = useState(prefersReducedMotion.current);\n    if (process.env.NODE_ENV !== \"production\") {\n        warnOnce(shouldReduceMotion !== true, \"You have Reduced Motion enabled on your device. Animations may not appear as expected.\");\n    }\n    /**\n     * TODO See if people miss automatically updating shouldReduceMotion setting\n     */\n    return shouldReduceMotion;\n}\n\nexport { useReducedMotion };\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8', key: '14sxne' }],\n  ['path', { d: 'M3 3v5h5', key: '1xhq8a' }],\n  ['path', { d: 'M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16', key: '1hlbsb' }],\n  ['path', { d: 'M16 16h5v5', key: 'ccwih5' }],\n];\n\n/**\n * @component @name RefreshCcw\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMCAwLTktOSA5Ljc1IDkuNzUgMCAwIDAtNi43NCAyLjc0TDMgOCIgLz4KICA8cGF0aCBkPSJNMyAzdjVoNSIgLz4KICA8cGF0aCBkPSJNMyAxMmE5IDkgMCAwIDAgOSA5IDkuNzUgOS43NSAwIDAgMCA2Ljc0LTIuNzRMMjEgMTYiIC8+CiAgPHBhdGggZD0iTTE2IDE2aDV2NSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/refresh-ccw\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst RefreshCcw = createLucideIcon('refresh-ccw', __iconNode);\n\nexport default RefreshCcw;\n"],"names":["Bell","createLucideIcon","d","key","apiClient","axios","create","baseURL","API_BASE_URL","withCredentials","headers","interceptors","request","use","config","token","localStorage","getItem","console","log","Authorization","warn","fetchUnreadNotificationCount","async","get","data","unread_count","error","CheckCheck","_ref","onClose","onUpdateUnreadCount","user","useAuth","navigate","useNavigate","notifications","setNotifications","useState","loading","setLoading","setError","page","setPage","totalPages","setTotalPages","unreadFilter","setUnreadFilter","retryCount","useRef","allNotifications","setAllNotifications","filteredNotifications","useMemo","filter","n","is_read","hasValidAuth","localStorageToken","contextToken","hasContextToken","hasLocalToken","hasUser","loadNotifications","silent","arguments","length","undefined","使用的令牌前10位","substring","页码","每页数量","仅未读","result","pageSize","onlyUnread","params","per_page","unread_only","fetchNotifications","pages","current","unreadCount","_error$response","_error$response2","_error$response2$data","_error$config","_error$response3","状态码","response","status","错误消息","message","错误类型","name","请求URL","url","isAuthError","setTimeout","useEffect","handleNotificationClick","notification","put","notificationId","markNotificationAsRead","id","prev","map","related_url","includes","window","open","formatTime","timeString","date","Date","formatDistanceToNow","addSuffix","locale","zhCN","handleImageError","e","currentTarget","src","handleFilterChange","showUnreadOnly","_jsxs","className","children","_jsx","onClick","every","post","markAllNotificationsAsRead","disabled","handleRetry","RefreshCcw","_notification$actor","actor","avatar","alt","nickname","onError","created_at","content","Math","max","min","NotificationIcon","setUnreadCount","isOpen","setIsOpen","hasError","setHasError","errorCount","setErrorCount","shouldShow","setShouldShow","errorTimerRef","loadingRef","popoverRef","loadUnreadCount","count","_response","clearTimeout","intervalId","setInterval","clearInterval","handleClickOutside","event","contains","target","document","addEventListener","removeEventListener","ref","motion","button","toggleNotifications","then","catch","whileHover","scale","whileTap","strokeWidth","AnimatePresence","div","initial","opacity","y","animate","exit","transition","duration","ease","variants","hidden","show","NotificationPopover","newCount","NavLink","_ref2","to","title","location","useLocation","Link","preventDefault","preloadUrl","encodeURIComponent","newWindow","opener","String","path","pathname","startsWith","_ref3","logout","isLoading","toggleSidebar","useSidebar","queryClient","useQueryClient","openInNewTab","toggleOpenInNewTab","useLinkBehavior","menuRef","profileMenuRef","favoriteItems","loadingFavorites","useUserFavorites","handleFavoritesUpdated","useCallback","invalidateQueries","queryKey","writeTooltip","setWriteTooltip","shareTooltip","setShareTooltip","profileTooltip","setProfileTooltip","isWriteMenuOpen","setIsWriteMenuOpen","isProfileMenuOpen","setIsProfileMenuOpen","CustomLink","forceSameTab","style","fontFamily","_Fragment","xmlns","width","height","viewBox","fill","stroke","strokeLinecap","x","delay","CustomEvent","dispatchEvent","email","charAt","toUpperCase","stopPropagation","profileUrl","now","a","createElement","href","rel","body","appendChild","click","removeChild","state","from","DynamicTimelineView","lazy","contentVariants","type","closed","timelineVariants","visible","when","staggerChildren","childVariants","MainLayout","isTimelineOpen","closeTimeline","useTimeline","rendered","setRendered","hasReducedMotionListener","initPrefersReducedMotion","shouldReduceMotion","prefersReducedMotion","useReducedMotion","navbarHeight","setNavbarHeight","updateNavbarHeight","navbar","querySelector","offsetHeight","documentElement","setProperty","resizeObserver","ResizeObserver","observe","timeout","unobserve","disconnect","removeProperty","previousUrl","sessionStorage","removeItem","history","replaceState","background","zIndex","Navbar","willChange","position","Outlet","pointerEvents","touchAction","WebkitOverflowScrolling","top","Suspense","fallback"],"sourceRoot":""}