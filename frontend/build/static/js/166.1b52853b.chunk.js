"use strict";(self.webpackChunkai_tools_website_frontend=self.webpackChunkai_tools_website_frontend||[]).push([[166],{9166:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var a=s(5043),r=s(3216),o=s(5475),l=s(6625),n=s(6636),i=s(3248),c=s(6968),d=s(579);(0,a.memo)((e=>{let{items:t,locationPathname:s}=e;return(0,d.jsx)("div",{className:"mt-1 space-y-1",children:t.map((e=>(0,d.jsxs)(o.N_,{to:"topic"===e.type?`/community/topic/${e.slug}`:`/community/relationship-topic/${e.slug}`,className:"group flex items-center px-2 py-1.5 text-sm font-medium rounded-md transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] "+(s.endsWith(`/${e.slug}`)?"text-white bg-gradient-to-r from-green-200/30 to-blue-200/30 scale-103 opacity-100 shadow-inner":"text-gray-300 hover:bg-gradient-to-r hover:from-green-200/10 hover:to-blue-200/10 hover:scale-103 hover:opacity-90 hover:shadow-sm"),children:[(0,d.jsx)("span",{className:"mr-2.5 h-2 w-2 rounded-full flex-shrink-0 "+("topic"===e.type?"bg-gradient-to-r from-cyan-400 to-blue-500":"bg-gradient-to-r from-purple-400 to-pink-500")}),(0,d.jsx)("span",{className:"truncate",children:e.name})]},`${e.type}-${e.id}`)))})})).displayName="FavoriteList";const u=()=>{const{isSidebarOpen:e}=(0,n.c)(),{user:t,token:s}=((0,r.zy)(),(0,l.A)()),o=(0,i.jE)(),{data:d=[],isLoading:u}=(0,c.Q)(s),g=(0,a.useCallback)((()=>{o.invalidateQueries({queryKey:["userFavorites"]})}),[o]);(0,a.useEffect)((()=>(window.addEventListener("favoritesUpdated",g),()=>{window.removeEventListener("favoritesUpdated",g)})),[g]);return null};var g=s(4558),h=s(6213),m=s(2115);const x=e=>{let{isOpen:t,onClose:s,title:r,users:l,isLoading:n}=e;const[i,c]=(0,a.useState)(!1),[u,g]=(0,a.useState)(""),h=(0,a.useRef)(null);return(0,a.useEffect)((()=>(t?(c(!0),document.body.style.overflow="hidden",h.current=setTimeout((()=>{g("modal-enter-active")}),50)):(g("modal-exit-active"),h.current=setTimeout((()=>{c(!1),document.body.style.overflow=""}),600)),()=>{h.current&&clearTimeout(h.current)})),[t]),i?(0,d.jsx)("div",{className:`fixed inset-0 z-50 flex items-center justify-center ${u}`,onClick:s,style:{transition:"opacity 500ms ease-out",opacity:"modal-enter-active"===u?1:0},children:(0,d.jsxs)("div",{className:"\n          relative mb-16 \n          overflow-hidden flex flex-col \n          w-full max-w-lg max-h-[85vh]\n          rounded-2xl\n          border border-white/10 \n          shadow-[0_10px_40px_rgba(0,0,0,0.3)]\n        ",onClick:e=>e.stopPropagation(),style:{background:"linear-gradient(135deg, rgba(59, 73, 111, 0.85) 0%, rgba(45, 51, 77, 0.9) 100%)",backdropFilter:"blur(12px)",transform:"modal-enter-active"===u?"translateY(0) scale(1)":"translateY(80px) scale(0.95)",opacity:"modal-enter-active"===u?1:0,transition:"transform 700ms cubic-bezier(0.19, 1, 0.22, 1), opacity 700ms cubic-bezier(0.19, 1, 0.22, 1)"},children:[(0,d.jsx)("div",{className:"absolute -top-20 -right-20 w-40 h-40 rounded-full bg-indigo-500/20 blur-3xl pointer-events-none"}),(0,d.jsx)("div",{className:"absolute -bottom-20 -left-20 w-40 h-40 rounded-full bg-purple-500/20 blur-3xl pointer-events-none"}),(0,d.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10 relative z-10",children:[(0,d.jsx)("h2",{className:"text-lg font-medium text-white",children:r}),(0,d.jsx)("button",{onClick:s,className:"w-8 h-8 flex items-center justify-center rounded-full text-white/70 hover:text-white hover:bg-white/10 transition-all duration-300","aria-label":"\u5173\u95ed",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,d.jsx)("div",{className:"p-4 overflow-y-auto flex-grow relative z-10",children:n?(0,d.jsxs)("div",{className:"flex flex-col justify-center items-center h-40 text-white/80",children:[(0,d.jsx)("div",{className:"relative w-12 h-12 mb-4",children:(0,d.jsx)("div",{className:"absolute inset-0 rounded-full border-2 border-indigo-400/20 border-t-indigo-400 animate-spin"})}),(0,d.jsx)("p",{className:"text-sm font-light",children:"\u6b63\u5728\u52a0\u8f7d\u7528\u6237\u5217\u8868..."})]}):l.length>0?(0,d.jsx)("ul",{className:"space-y-1.5",children:l.map((e=>{var t;return(0,d.jsx)("li",{className:"group rounded-xl overflow-hidden hover:bg-white/10 transition-all duration-300",children:(0,d.jsxs)(o.N_,{to:`/profile/${e.id}`,className:"p-3 flex items-center space-x-3",onClick:s,children:[(0,d.jsxs)("div",{className:"relative flex-shrink-0",children:[e.avatar?(0,d.jsx)("img",{src:e.avatar,alt:`${e.nickname}\u7684\u5934\u50cf`,className:"w-10 h-10 rounded-full object-cover border-2 border-transparent group-hover:border-indigo-400/60 transition-all duration-300"}):(0,d.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-400 to-purple-500 flex items-center justify-center text-white text-lg font-medium border-2 border-transparent group-hover:border-indigo-400/60 transition-all duration-300 shadow-inner",children:(null===(t=e.nickname)||void 0===t?void 0:t.charAt(0).toUpperCase())||"U"}),(0,d.jsx)("div",{className:"absolute inset-0 rounded-full bg-black/0 group-hover:bg-black/10 transition-colors duration-300"})]}),(0,d.jsx)("div",{className:"flex-grow overflow-hidden",children:(0,d.jsx)("p",{className:"font-medium text-white truncate group-hover:text-indigo-300 transition-colors duration-300",children:e.nickname||"\u672a\u8bbe\u7f6e\u6635\u79f0"})}),(0,d.jsx)("div",{className:"text-white/40 group-hover:text-indigo-300 transform translate-x-0 group-hover:translate-x-2 transition-all duration-500 ease-out",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},e.id)}))}):(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center py-14 text-center",children:[(0,d.jsx)("div",{className:"w-16 h-16 rounded-full bg-white/10 flex items-center justify-center mb-4",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white/40",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),(0,d.jsx)("p",{className:"text-white/60 font-light",children:"\u6682\u65e0\u7528\u6237"})]})})]})}):null},p=e=>{let{targetUserId:t,isOwnProfile:s}=e;const{user:r,token:o}=(0,l.A)(),[n,i]=(0,a.useState)(null),[c,u]=(0,a.useState)(null),[p,v]=(0,a.useState)(!1),[f,y]=(0,a.useState)(!0),[w,b]=(0,a.useState)(!0),[j,N]=(0,a.useState)(!1),[k,$]=(0,a.useState)(!1),[S,C]=(0,a.useState)(""),[P,A]=(0,a.useState)([]),[R,L]=(0,a.useState)(!1),[U,E]=(0,a.useState)(null),z=(0,a.useCallback)((async()=>{y(!0);try{const[e,s]=await Promise.all([h.A.get(`${g.JR}/api/users/${t}/followers/count`),h.A.get(`${g.JR}/api/users/${t}/following/count`)]);i(e.data.count),u(s.data.count)}catch(e){i(0),u(0)}finally{y(!1)}}),[t]),_=(0,a.useCallback)((async()=>{if(!o||s)return b(!1),void v(!1);b(!0);try{const e=await h.A.get(`${g.JR}/api/users/${t}/follow-status`,{headers:{Authorization:`Bearer ${o}`}});v(e.data.isFollowing)}catch(e){v(!1)}finally{b(!1)}}),[t,o,s]);(0,a.useEffect)((()=>{z(),_()}),[t,z,_]);const B=(0,a.useCallback)((async e=>{if(t){L(!0),A([]),E(e),C("following"===e?"\u5173\u6ce8\u5217\u8868":"\u7c89\u4e1d\u5217\u8868"),$(!0);try{const s=await h.A.get(`${g.JR}/api/users/${t}/${e}`,{params:{page:1,limit:50}});s.data&&s.data.users?A(s.data.users):A([])}catch(s){m.oR.error(`\u52a0\u8f7d${"following"===e?"\u5173\u6ce8":"\u7c89\u4e1d"}\u5217\u8868\u5931\u8d25`),A([]),$(!1)}finally{L(!1)}}}),[t]),D=(e,t,s)=>{const a=f,r=null!==e&&void 0!==e?e:0;return(0,d.jsxs)("button",{className:"text-center cursor-pointer group disabled:cursor-default",onClick:s,disabled:a||0===r,title:a?"\u52a0\u8f7d\u4e2d":r>0?`\u67e5\u770b${t}\u5217\u8868`:`\u6682\u65e0${t}`,children:[(0,d.jsx)("span",{className:"block text-base font-semibold text-white group-hover:text-indigo-300 transition-colors "+(a||0===r?"text-gray-500 group-hover:text-gray-500":""),children:a?"...":r}),(0,d.jsx)("span",{className:"block text-xs group-hover:text-gray-200 transition-colors "+(a||0===r?"text-gray-600 group-hover:text-gray-600":"text-gray-400"),children:t})]})};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"mt-4 flex items-center justify-center space-x-4 p-2",children:[D(c,"\u5173\u6ce8",(()=>B("following"))),(0,d.jsx)("div",{className:"h-6 w-px bg-gray-500/40"}),D(n,"\u7c89\u4e1d",(()=>B("followers"))),!s&&r&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"h-6 w-px bg-gray-500/40"}),(0,d.jsx)("button",{onClick:p?async()=>{if(o&&!j&&!s){N(!0);try{const s=await h.A.delete(`${g.JR}/api/users/${t}/follow`,{headers:{Authorization:`Bearer ${o}`}});var e;if(200!==s.status)throw new Error((null===(e=s.data)||void 0===e?void 0:e.error)||"\u53d6\u6d88\u5173\u6ce8\u5931\u8d25");v(!1),i((e=>null!==e&&e>0?e-1:0)),m.oR.info("\u5df2\u53d6\u6d88\u5173\u6ce8")}catch(l){var a,r;m.oR.error(`\u53d6\u6d88\u5173\u6ce8\u5931\u8d25: ${(null===(a=l.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.error)||l.message}`)}finally{N(!1)}}}:async()=>{if(o&&!j&&!s){N(!0);try{const s=await h.A.post(`${g.JR}/api/users/${t}/follow`,{},{headers:{Authorization:`Bearer ${o}`}});var e;if(201!==s.status&&200!==s.status)throw new Error((null===(e=s.data)||void 0===e?void 0:e.error)||"\u5173\u6ce8\u5931\u8d25");v(!0),i((e=>null!==e?e+1:1)),m.oR.success("\u5173\u6ce8\u6210\u529f\uff01")}catch(l){var a,r;m.oR.error(`\u5173\u6ce8\u5931\u8d25: ${(null===(a=l.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.error)||l.message}`)}finally{N(!1)}}},disabled:w||j,className:`px-3 py-1 rounded-md text-xs font-medium transition-colors duration-200 flex items-center justify-center min-w-[70px] ${j?"opacity-50 cursor-not-allowed":""} ${p?"bg-gray-600/70 text-gray-300 hover:bg-gray-500/70":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:w?(0,d.jsxs)("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,d.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):j?p?"\u53d6\u6d88\u4e2d...":"\u5173\u6ce8\u4e2d...":p?"\u5df2\u5173\u6ce8":"+ \u5173\u6ce8"})]})]}),(0,d.jsx)(x,{isOpen:k,onClose:()=>$(!1),title:S,users:P,isLoading:R})]})},v=e=>{let{currentPage:t,totalPages:s,onPageChange:a,isLoading:r}=e;if(s<1)return console.warn("[Pagination] totalPages is less than 1, not rendering.",{totalPages:s}),null;return(0,d.jsxs)("div",{className:"fixed bottom-4 left-0 right-0 z-50 flex items-center justify-center pointer-events-none",children:[(0,d.jsxs)("div",{className:"flex items-center justify-center space-x-6 py-2 px-4 rounded-full pointer-events-auto min-w-[100px]",children:[s>1&&(0,d.jsx)("button",{onClick:()=>!r&&t>1&&a(t-1),disabled:1===t||r,className:"text-2xl transition-colors duration-200 flex-shrink-0 "+(1===t||r?"text-gray-600 cursor-not-allowed":"text-gray-200 hover:text-indigo-300"),"aria-label":"\u4e0a\u4e00\u9875",children:(0,d.jsx)("span",{children:"\u2039"})}),(0,d.jsx)("div",{className:"flex-grow flex items-center justify-center space-x-4",children:(()=>{const e=[];if(1===s)return[1];if(s<=5)for(let t=1;t<=s;t++)e.push(t);else{e.push(1);let a=Math.max(2,t-1),r=Math.min(s-1,t+1);r-a+1<3&&(2===a?r=Math.min(s-1,a+2):r===s-1&&(a=Math.max(2,r-2))),a>2&&e.push("...");for(let t=a;t<=r;t++)e.push(t);r<s-1&&e.push("..."),s>1&&e.push(s)}return e})().map(((e,s)=>(0,d.jsx)("button",{onClick:()=>r||"number"!==typeof e?null:a(e),disabled:"number"!==typeof e||r||e===t,className:"text-lg transition-colors duration-200 min-w-[24px] text-center "+(e===t?"text-indigo-300 font-bold cursor-default":"number"===typeof e?"text-gray-200 hover:text-indigo-300":"text-gray-500 cursor-default"),children:e},s)))}),s>1&&(0,d.jsx)("button",{onClick:()=>!r&&t<s&&a(t+1),disabled:t===s||r,className:"text-2xl transition-colors duration-200 flex-shrink-0 "+(t===s||r?"text-gray-600 cursor-not-allowed":"text-gray-200 hover:text-indigo-300"),"aria-label":"\u4e0b\u4e00\u9875",children:(0,d.jsx)("span",{children:"\u203a"})})]}),r&&(0,d.jsx)("div",{className:"absolute -top-7 left-1/2 transform -translate-x-1/2 flex items-center pointer-events-none",children:(0,d.jsxs)("div",{className:"px-3 py-1 bg-gray-800/50 rounded-full flex items-center",children:[(0,d.jsx)("div",{className:"w-3 h-3 rounded-full bg-indigo-400 animate-ping mr-2 opacity-75"}),(0,d.jsx)("span",{className:"text-xs text-gray-300",children:"\u52a0\u8f7d\u4e2d"})]})})]})},f=e=>{let{isMe:t}=e;const{user:s,token:i,logout:c,updateUser:x}=(0,l.A)(),{userId:f}=(0,r.g)(),{isSidebarOpen:y}=(0,n.c)(),[w,b]=(0,a.useState)(null),[j,N]=(0,a.useState)(null),[k,$]=(0,a.useState)(null),[S,C]=(0,a.useState)([]),[P,A]=(0,a.useState)([]),[R,L]=(0,a.useState)([]),[U,E]=(0,a.useState)([]),[z,_]=(0,a.useState)(!0),[B,D]=(0,a.useState)(!1),[I,T]=(0,a.useState)(!1),[M,J]=(0,a.useState)(!1),[F,W]=(0,a.useState)(!1),[O,H]=(0,a.useState)(""),V=(0,r.Zp)(),[K,q]=(0,a.useState)(!1),[G,Q]=(0,a.useState)(""),[Y,Z]=(0,a.useState)(!1),[X,ee]=(0,a.useState)(null),[te,se]=(0,a.useState)(!1),[ae,re]=(0,a.useState)(""),[oe,le]=(0,a.useState)(!1),[ne,ie]=(0,a.useState)(null),[ce,de]=(0,a.useState)(!1),[ue,ge]=(0,a.useState)([]),[he,me]=(0,a.useState)(""),[xe,pe]=(0,a.useState)(!1),[ve,fe]=(0,a.useState)(null),ye=(0,a.useRef)(null),[we,be]=(0,a.useState)("articles"),[je,Ne]=(0,a.useState)(null),[ke,$e]=(0,a.useState)(!1),[Se,Ce]=(0,a.useState)(null),Pe=(0,a.useRef)(null);(0,a.useEffect)((()=>{console.log("Determining targetUserId and isOwnProfile...");let e=null,a=!1;if(t){if(console.log("isMe is true, using currentUser.id"),!s)return console.warn("isMe is true but currentUser is null, redirecting to login"),void V("/login");e=s.id,a=!0}else{if(!f)return console.error("No user ID found (isMe=false, no userId in URL)"),H("\u672a\u6307\u5b9a\u7528\u6237\u3002"),void _(!1);{console.log(`Raw userIdFromUrl is: ${f}`);const t=f.split(":")[0].trim();console.log(`Cleaned userId string: ${t}`);const r=parseInt(t,10);if(isNaN(r))return console.error(`Invalid userId after cleaning: ${f} -> ${t}`),H("\u65e0\u6548\u7684\u7528\u6237ID\u683c\u5f0f\u3002"),void _(!1);console.log(`Parsed target user ID: ${r}`),e=r,a=!!s&&s.id===r}}console.log(`Setting targetUserId=${e}, isOwnProfile=${a}`),N(e),b(a)}),[t,f,s,V]);const Ae=(0,a.useCallback)((async()=>{if(null===j)return void console.log("fetchUserData: targetUserId is null, skipping fetch.");console.log(`fetchUserData called for targetUserId: ${j}, isOwnProfile: ${w}`),_(!0),H(""),$(null);let e="",t={};w?(console.log("Fetching own profile data..."),e=`${g.JR}/api/users/profile`,i&&(t.Authorization=`Bearer ${i}`)):(console.log("Fetching public profile data for user:",j),e=`${g.JR}/api/users/public/${j}`,console.log("Constructed public API URL:",e));try{var s;console.log(`Making API request to: ${e}`);const a=await h.A.get(e,{headers:t});console.log("API Response received:",a);let r=null,o=!1;if(w)200===a.status&&a.data&&a.data.user&&a.data.user.id?(r=a.data.user,o=!0):(console.warn("[Self Profile] Invalid response structure or missing user data:",a.data),H("\u65e0\u6cd5\u52a0\u8f7d\u60a8\u7684\u4e2a\u4eba\u8d44\u6599\u3002"));else{console.log("[Public Profile] Checking response data:",a.data),console.log("[Public Profile] Type of response.data:",typeof a.data);const e=a.data;200===a.status&&e&&"object"===typeof e&&"number"===typeof e.id&&e.id>0?(console.log("[Public Profile] Condition PASSED."),r=e,o=!0):(console.warn("[Public Profile] Condition FAILED. Checking details:",{isStatusOK:200===a.status,isDataPresent:!!e,isDataAnObject:"object"===typeof e,isIdANumber:"number"===typeof(null===e||void 0===e?void 0:e.id),isIdPositive:(null===e||void 0===e?void 0:e.id)>0,responseData:e}),H("\u65e0\u6cd5\u52a0\u8f7d\u8be5\u7528\u6237\u7684\u516c\u5f00\u8d44\u6599\u3002"))}console.log(`[Final Check] Before final if: isValidResponse = ${o}, userObject ID = ${null===(s=r)||void 0===s?void 0:s.id}`),o&&r?(console.log("[Final Check] Entering final if block. User data processed successfully:",r),$(r),H(""),w&&(Q(r.bio||""),re(r.nickname||""),ge(r.tags||[]))):console.warn("[Final Check] Final if condition FAILED.",{isValidResponse:o,userObject:r})}catch(m){var a,r,o,l,n;if(console.error("\u83b7\u53d6\u7528\u6237\u8d44\u6599\u5931\u8d25:",m),h.A.isAxiosError(m))if(console.error("Axios error details:",null===(a=m.response)||void 0===a?void 0:a.status,null===(r=m.response)||void 0===r?void 0:r.data),404===(null===(o=m.response)||void 0===o?void 0:o.status))H("\u65e0\u6cd5\u627e\u5230\u8be5\u7528\u6237\u3002");else if(401!==(null===(l=m.response)||void 0===l?void 0:l.status)||w)if(401===(null===(n=m.response)||void 0===n?void 0:n.status)&&w)H("\u8ba4\u8bc1\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\u3002"),c(),V("/login");else{var d,u;H((null===(d=m.response)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.error)||"\u52a0\u8f7d\u7528\u6237\u4fe1\u606f\u65f6\u51fa\u9519\u3002")}else H("\u65e0\u6cd5\u8bbf\u95ee\u8be5\u7528\u6237\u4fe1\u606f\uff0c\u53ef\u80fd\u9700\u8981\u6743\u9650\u3002");else H("\u52a0\u8f7d\u7528\u6237\u4fe1\u606f\u65f6\u53d1\u751f\u672a\u77e5\u9519\u8bef\u3002");$(null)}finally{console.log("Finished fetching user data, setting isLoadingProfile to false"),_(!1)}}),[j,w,i,V,c]);(0,a.useEffect)((()=>{null!==j?(console.log("targetUserId changed or component mounted with targetUserId. Resetting content and fetching profile."),Ae(),console.log("Resetting content lists because targetUserId changed."),be("articles"),C([]),A([]),L([]),E([]),Le(1),Te(1),Ke(1),De(0),He(0),Xe(0)):console.log("targetUserId is null, waiting...")}),[j]),(0,a.useEffect)((()=>{if(null===w||null===j)return;(async()=>{_(!0);try{let s;if(w){if(!i)return H("\u8bf7\u5148\u767b\u5f55\u4ee5\u67e5\u770b\u60a8\u7684\u4e2a\u4eba\u8d44\u6599"),void _(!1);console.log("\u83b7\u53d6\u81ea\u5df1\u7684\u8d44\u6599 /api/users/profile"),s=await h.A.get(`${g.JR}/api/users/profile`,{headers:{Authorization:`Bearer ${i}`}})}else{if(!j)throw new Error("\u65e0\u6cd5\u786e\u5b9a\u8981\u83b7\u53d6\u7684\u7528\u6237 ID");console.log(`\u83b7\u53d6\u7528\u6237 ${j} \u7684\u516c\u5f00\u8d44\u6599 /api/users/public/${j}`),s=await h.A.get(`${g.JR}/api/users/public/${j}`)}var e,t;if(s.data&&s.data.user)if($(s.data.user),H(""),w)Q((null===(e=s.data.user)||void 0===e?void 0:e.bio)||""),re((null===(t=s.data.user)||void 0===t?void 0:t.nickname)||"")}catch(r){if(console.error("\u83b7\u53d6\u7528\u6237\u8d44\u6599\u5931\u8d25:",r),r.response&&401===r.response.status&&w)localStorage.removeItem("token"),localStorage.removeItem("authUser"),H("\u767b\u5f55\u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55");else if(r.response&&404===r.response.status)H("\u7528\u6237\u4e0d\u5b58\u5728\u6216\u672a\u516c\u5f00");else{var s,a;const e=(null===(s=r.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.error)||r.message||"\u83b7\u53d6\u7528\u6237\u8d44\u6599\u5931\u8d25";H(e)}$(null)}finally{_(!1)}})()}),[w,j,i]);const[Re,Le]=(0,a.useState)(1),[Ue,Ee]=(0,a.useState)(!0),[ze,_e]=(0,a.useState)(!1),[Be,De]=(0,a.useState)(1),[Ie,Te]=(0,a.useState)(1),[Me,Je]=(0,a.useState)(!0),[Fe,We]=(0,a.useState)(!1),[Oe,He]=(0,a.useState)(1),[Ve,Ke]=(0,a.useState)(1),[qe,Ge]=(0,a.useState)(!0),[Qe,Ye]=(0,a.useState)(!1),[Ze,Xe]=(0,a.useState)(1),et=(0,a.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=null;if(null!==j){if(1===e)s=setTimeout((()=>D(!0)),300);else{if(!t&&ze)return;s=setTimeout((()=>_e(!0)),300)}try{const t=10,a=await h.A.get(`${g.JR}/api/users/${j}/articles`,{params:{page:e,limit:t}});s&&clearTimeout(s);const r=a.data.articles||[],o=a.data.pages,l=a.data.total;let n=1;void 0!==o&&o>0?n=o:void 0!==l&&l>=0&&(n=Math.max(1,Math.ceil(l/t))),C(r),Le(e),Ee(e<n),De(n)}catch(a){s&&clearTimeout(s),console.error("\u83b7\u53d6\u6587\u7ae0\u5931\u8d25:",a),H((e=>e||"\u83b7\u53d6\u6587\u7ae0\u5217\u8868\u5931\u8d25")),Ee(!1),1===e&&C([])}finally{s&&clearTimeout(s),D(!1),_e(!1)}}}),[j,ze]);(0,a.useEffect)((()=>{null!==j&&"articles"===we&&(console.log("[ProfilePage] Articles tab active, initiating fetch page 1."),et(1,!1))}),[j,we,et]),(0,a.useEffect)((()=>{if(null===j)return;(async()=>{T(!0);try{const e=await h.A.get(`${g.JR}/api/users/${j}/posts`);A(e.data.posts||[])}catch(e){console.error("\u83b7\u53d6\u5e16\u5b50\u5931\u8d25:",e),H("\u83b7\u53d6\u5e16\u5b50\u5217\u8868\u5931\u8d25")}finally{T(!1)}})()}),[j]),(0,a.useEffect)((()=>{if(null===j)return;(async()=>{J(!0);try{const e=await h.A.get(`${g.JR}/api/users/${j}/dynamics`);L(e.data.dynamics||[])}catch(e){console.error("\u83b7\u53d6\u52a8\u6001\u5931\u8d25:",e),H("\u83b7\u53d6\u52a8\u6001\u5217\u8868\u5931\u8d25")}finally{J(!1)}})()}),[j]),(0,a.useEffect)((()=>{if(null===j||!w)return;(async()=>{if(i){W(!0);try{const e=await h.A.get(`${g.JR}/api/users/series`,{headers:{Authorization:`Bearer ${i}`}});E(e.data.series||[])}catch(e){console.error("\u83b7\u53d6\u7cfb\u5217\u5217\u8868\u5931\u8d25:",e)}finally{W(!1)}}})()}),[j,w,i]);const tt=e=>{if(!e)return"\u65e5\u671f\u672a\u77e5";try{const t=new Date(e);return isNaN(t.getTime())?(console.warn(`[formatDate] Invalid date string received: ${e}`),"\u65e0\u6548\u65e5\u671f"):t.toLocaleDateString("zh-CN")}catch(O){return console.error(`[formatDate] Error parsing date string: ${e}`,O),"\u65e5\u671f\u9519\u8bef"}},st=(0,a.useCallback)((async()=>{if(k&&i){console.log("[handleSaveBio] Starting save. Current userData:",k),Z(!0),ee(null);try{const t=await h.A.put(`${g.JR}/api/users/profile`,{bio:G},{headers:{Authorization:`Bearer ${i}`}});var e;if(console.log("[handleSaveBio] Received response:",t),200!==t.status||!t.data.user)throw new Error((null===(e=t.data)||void 0===e?void 0:e.error)||"\u4fdd\u5b58\u7b80\u4ecb\u5931\u8d25");if(console.log("[handleSaveBio] PUT Success. User data from response:",t.data.user),$((e=>{if(console.log("[handleSaveBio] Updating local userData. PrevData:",e),!e)return t.data.user;const s={...e,bio:t.data.user.bio};return console.log("[handleSaveBio] New local userData will be:",s),s})),x&&s){console.log("[handleSaveBio] Updating global currentUser. Prev currentUser:",s);const e={...s,bio:t.data.user.bio};console.log("[handleSaveBio] New global currentUser will be:",e),x(e)}q(!1),m.oR.success("\u4e2a\u6027\u7b7e\u540d\u5df2\u4fdd\u5b58\uff01")}catch(r){var t,a;console.error("Error saving bio:",r);const e=(null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||r.message||"\u4fdd\u5b58\u7b80\u4ecb\u65f6\u51fa\u9519";ee(e),m.oR.error(`\u4fdd\u5b58\u5931\u8d25: ${e}`)}finally{Z(!1)}}}),[k,i,G,x,s]);(0,a.useEffect)((()=>{w&&null!==k&&void 0!==k&&k.tags?ge(k.tags):ge(w?[]:(null===k||void 0===k?void 0:k.tags)||[]),de(!1),me(""),fe(null)}),[k,w]);const at=(0,a.useCallback)((()=>{const e=he.trim();fe(null),e&&(e.length>15?fe("\u5355\u4e2a\u6807\u7b7e\u4e0d\u80fd\u8d85\u8fc715\u4e2a\u5b57\u7b26"):e.includes(",")?fe("\u5355\u4e2a\u6807\u7b7e\u4e0d\u80fd\u5305\u542b\u9017\u53f7"):ue.length>=20?fe("\u6700\u591a\u53ea\u80fd\u6dfb\u52a020\u4e2a\u6807\u7b7e"):ue.some((t=>t.toLowerCase()===e.toLowerCase()))?fe("\u8be5\u6807\u7b7e\u5df2\u5b58\u5728"):(ge([...ue,e]),me("")))}),[he,ue]),rt=(0,a.useCallback)((e=>{ge((t=>t.filter((t=>t!==e)))),fe(null)}),[]),ot=(0,a.useCallback)((async()=>{if(ce&&w&&i&&!xe)if(ue.length>20)fe("\u6700\u591a\u53ea\u80fd\u6dfb\u52a020\u4e2a\u6807\u7b7e");else{console.log("[handleSaveTags] Starting save. Current userData:",k),console.log("[handleSaveTags] Tags to save:",ue),pe(!0),fe(null);try{const t=await fetch(`${g.JR}/api/users/update-tags`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({tags:ue})});if(console.log("[handleSaveTags] Received fetch response object:",t),!t.ok){const s=await t.text();console.error("[handleSaveTags] Save failed. Status:",t.status,"Body:",s);let a="\u4fdd\u5b58\u6807\u7b7e\u5931\u8d25";try{const e=JSON.parse(s);a=e.message||e.error||a}catch(e){}throw new Error(a)}const a=await t.json();console.log("[handleSaveTags] PUT Success. Parsed JSON response:",a);const r=a.user;if(console.log("[handleSaveTags] User data from response:",r),$((e=>{if(console.log("[handleSaveTags] Updating local userData. PrevData:",e),!e)return r;const t={...e,tags:(null===r||void 0===r?void 0:r.tags)||[]};return console.log("[handleSaveTags] New local userData will be:",t),t})),x&&s){console.log("[handleSaveTags] Updating global currentUser. Prev currentUser:",s);const e={...s,tags:(null===r||void 0===r?void 0:r.tags)||[]};console.log("[handleSaveTags] New global currentUser will be:",e),x(e)}ge((null===r||void 0===r?void 0:r.tags)||[]),console.log("[ProfilePage] Set tagsArray to:",(null===r||void 0===r?void 0:r.tags)||[]),de(!1),me(""),m.oR.success("\u6807\u7b7e\u5df2\u6210\u529f\u4fdd\u5b58\uff01")}catch(O){console.error("\u4fdd\u5b58\u6807\u7b7e\u51fa\u9519:",O);const t=O instanceof Error?O.message:"\u4fdd\u5b58\u6807\u7b7e\u5931\u8d25";fe(t),m.oR.error(`\u4fdd\u5b58\u6807\u7b7e\u5931\u8d25: ${t}`)}finally{pe(!1)}}}),[ce,w,i,ue,xe,x,s,k]);(0,a.useEffect)((()=>{if(!ce||xe||!w)return;const e=e=>{ye.current&&!ye.current.contains(e.target)&&(console.log("[ProfilePage - Click Outside] Saving tags..."),ot())};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[ce,xe,ot,w]);const lt=async e=>{if(!e||!i)return void Ce("\u6ca1\u6709\u9009\u62e9\u6587\u4ef6\u6216\u7528\u6237\u672a\u767b\u5f55");$e(!0),Ce(null);const t=new FormData;t.append("avatar",e);try{const e=await h.A.post(`${g.JR}/api/users/avatar`,t,{headers:{Authorization:`Bearer ${i}`,"Content-Type":"multipart/form-data"}});if(200!==e.status||!e.data.avatar_url)throw new Error(e.data.message||"\u5934\u50cf\u4e0a\u4f20\u5931\u8d25");{const t=e.data.avatar_url;$((e=>e?{...e,avatar:t}:null)),x&&s&&x({...s,avatar:t}),m.oR.success("\u5934\u50cf\u4e0a\u4f20\u6210\u529f\uff01"),Ne(null)}}catch(o){var a,r;console.error("\u5934\u50cf\u4e0a\u4f20\u5931\u8d25:",o);const e=(null===(a=o.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.error)||o.message||"\u5934\u50cf\u4e0a\u4f20\u5931\u8d25";Ce(e),m.oR.error(`\u5934\u50cf\u4e0a\u4f20\u5931\u8d25: ${e}`)}finally{$e(!1)}},nt=e=>{if(e){if(e.startsWith("http://")||e.startsWith("https://"))return e.includes("cos.ap-shanghai.myqcloud.com")?`/api/proxy-image?url=${encodeURIComponent(e)}`:e;if(e.startsWith("/static")){const t=g.JR.split("/");return`${`${t[0]}//${t[2]}`}${e}`}if(e.startsWith("uploads/")){const t=g.JR.split("/");return`${`${t[0]}//${t[2]}`}/static/${e}`}return e}},it=(0,a.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t&&e>1&&Fe)return;if(null===j)return;console.log(`[ProfilePage] Fetching posts page ${e}, forceRefresh: ${t}`);let s=null;1===e?(s=setTimeout((()=>{T(!0)}),300),t||console.log("[ProfilePage] Preparing to load page 1.")):s=setTimeout((()=>{We(!0)}),300);try{const t=10,a=await h.A.get(`${g.JR}/api/users/${j}/posts`,{params:{page:e,limit:t}});s&&clearTimeout(s);const r=a.data.posts||[],o=a.data.pages,l=a.data.total;let n=1;void 0!==o&&o>0?n=o:void 0!==l&&l>=0?n=Math.max(1,Math.ceil(l/t)):console.warn("[Fetch posts] API did not return 'pages' or 'total'. Assuming 1 page."),console.log("[Fetch posts] API Response Data:",a.data),console.log(`[Fetch posts] Calculated Total Pages: ${n}`),A(r),Te(e),Je(e<n),He(n)}catch(a){s&&clearTimeout(s),console.error("\u83b7\u53d6\u5e16\u5b50\u5931\u8d25:",a),H((e=>e||"\u83b7\u53d6\u5e16\u5b50\u5217\u8868\u5931\u8d25")),Je(!1),1===e&&A([])}finally{s&&clearTimeout(s),T(!1),We(!1)}}),[j,Fe]);(0,a.useEffect)((()=>{null!==j&&"posts"===we&&(console.log("[ProfilePage] Posts tab active, initiating fetch page 1."),it(1,!1))}),[j,we,it]);const ct=(0,a.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t&&e>1&&Qe)return;if(null===j)return;console.log(`[ProfilePage] Fetching dynamics page ${e}, forceRefresh: ${t}`);let s=null;1===e?(s=setTimeout((()=>{J(!0)}),300),t||console.log("[ProfilePage] Preparing to load page 1.")):s=setTimeout((()=>{Ye(!0)}),300);try{const t=10,a=await h.A.get(`${g.JR}/api/users/${j}/dynamics`,{params:{page:e,limit:t}});s&&clearTimeout(s);const r=a.data.dynamics||[],o=r.filter((e=>!e.is_deleted));console.log(`[Fetch dynamics] \u8fc7\u6ee4\u524d: ${r.length}\u4e2a\u52a8\u6001, \u8fc7\u6ee4\u540e: ${o.length}\u4e2a\u52a8\u6001`);const l=a.data.pages,n=a.data.total;let i=1;void 0!==l&&l>0?i=l:void 0!==n&&n>=0?i=Math.max(1,Math.ceil(n/t)):console.warn("[Fetch dynamics] API did not return 'pages' or 'total'. Assuming 1 page."),console.log("[Fetch dynamics] API Response Data:",a.data),console.log(`[Fetch dynamics] Calculated Total Pages: ${i}`),L(o),Ke(e),Ge(e<i),Xe(i)}catch(a){s&&clearTimeout(s),console.error("\u83b7\u53d6\u52a8\u6001\u5931\u8d25:",a),H((e=>e||"\u83b7\u53d6\u52a8\u6001\u5217\u8868\u5931\u8d25")),Ge(!1),1===e&&L([])}finally{s&&clearTimeout(s),J(!1),Ye(!1)}}),[j,Qe]);(0,a.useEffect)((()=>{null!==j&&"dynamics"===we&&(console.log("[ProfilePage] Dynamics tab active, initiating fetch page 1."),ct(1,!1))}),[j,we,ct]),(0,a.useEffect)((()=>{console.log(`[ProfilePage] Active tab changed to: ${we}. Resetting pages.`),Le(1),Te(1),Ke(1)}),[we]);const dt=(0,a.useRef)(null),ut=(0,a.useRef)(null);return(0,a.useEffect)((()=>{if(!K||Y||!w)return;const e=e=>{ut.current&&!ut.current.contains(e.target)&&(console.log("[ProfilePage - Click Outside Bio] Attempting to save and exit..."),st(),q(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[K,Y,st,w,ut]),(0,d.jsx)("div",{className:"flex flex-col min-h-screen text-white",children:(0,d.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,d.jsx)(u,{}),(0,d.jsxs)("main",{ref:dt,className:`flex-1 transition-all duration-500 ease-out overflow-y-auto ${y?"ml-48":"ml-0"} p-6 pb-16`,children:[z&&(0,d.jsx)("p",{className:"text-center py-10",children:"\u6b63\u5728\u52a0\u8f7d\u4e2a\u4eba\u8d44\u6599..."}),k?(0,d.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,d.jsx)("div",{className:"mb-12",children:(0,d.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start md:space-x-8",children:[(0,d.jsxs)("div",{className:"flex flex-col items-center mb-6 md:mb-0",children:[(0,d.jsxs)("div",{className:"relative "+(w?"group cursor-pointer":""),onClick:w?()=>{var e;null===(e=Pe.current)||void 0===e||e.click()}:void 0,title:w?"\u70b9\u51fb\u66f4\u6362\u5934\u50cf":void 0,children:[w&&(0,d.jsx)("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:ke?(0,d.jsxs)("svg",{className:"animate-spin h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,d.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),k.avatar?(0,d.jsx)("img",{src:k.avatar,alt:`${k.nickname||"User"}'s avatar`,className:"w-32 h-32 rounded-full object-cover border-2 border-indigo-600/50"}):(0,d.jsx)("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-indigo-500 to-purple-700 flex items-center justify-center text-white text-3xl font-bold border-2 border-indigo-600/50",children:(k.nickname||k.email||"U").charAt(0).toUpperCase()})]}),null!==j&&null!==w&&(0,d.jsx)(p,{targetUserId:j,isOwnProfile:w}),w&&(0,d.jsx)("input",{type:"file",ref:Pe,onChange:e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0];if(t.size>5242880)return void Ce("\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7 5MB");if(!["image/jpeg","image/png","image/gif"].includes(t.type))return void Ce("\u8bf7\u9009\u62e9 JPG, PNG, \u6216 GIF \u683c\u5f0f\u7684\u56fe\u7247");Ne(t),Ce(null),lt(t)}else Ne(null)},accept:"image/*",className:"hidden"}),Se&&(0,d.jsx)("p",{className:"text-xs text-red-400 mt-1 text-center",children:Se})]}),(0,d.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,d.jsxs)("div",{className:"group relative mb-3 "+(w?"":"pointer-events-none"),children:[(0,d.jsx)("div",{className:"flex items-center",children:(0,d.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-white inline",children:k.nickname||(0,d.jsx)("span",{className:"italic text-gray-400",children:"\u672a\u8bbe\u7f6e\u6635\u79f0"})})}),w&&(0,d.jsx)("button",{onClick:()=>se(!0),className:"absolute -right-6 top-1/2 -translate-y-1/2 ml-2 text-blue-400 hover:text-blue-300 opacity-0 group-hover:opacity-100 transition-opacity duration-200",title:"\u7f16\u8f91\u6635\u79f0",hidden:te,children:(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[" ",(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})," "]})})]}),w&&te&&(0,d.jsxs)("div",{className:"mt-2 mb-3 flex items-center space-x-2",children:[(0,d.jsx)("input",{type:"text",value:ae,onChange:e=>re(e.target.value),placeholder:"\u8bbe\u7f6e\u60a8\u7684\u6635\u79f0",maxLength:50,className:"flex-grow max-w-xs px-3 py-1.5 bg-gray-700/60 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 sm:text-lg text-white"}),(0,d.jsx)("button",{onClick:async()=>{if(k){console.log("[handleSaveNickname] Starting save. Current userData:",k),le(!0),ie(null);try{if(ae.length>50)throw new Error("\u6635\u79f0\u4e0d\u80fd\u8d85\u8fc7 50 \u4e2a\u5b57\u7b26");const t=await h.A.put(`${g.JR}/api/users/profile`,{nickname:ae||null},{headers:{Authorization:`Bearer ${i}`}});var e;if(console.log("[handleSaveNickname] Received response:",t),200!==t.status)throw new Error((null===(e=t.data)||void 0===e?void 0:e.error)||"\u4fdd\u5b58\u6635\u79f0\u5931\u8d25");if(console.log("[handleSaveNickname] PUT Success. User data from response:",t.data.user),$((e=>{if(console.log("[handleSaveNickname] Updating local userData. PrevData:",e),!e)return t.data.user;const s={...e,nickname:t.data.user.nickname};return console.log("[handleSaveNickname] New local userData will be:",s),s})),x&&s){console.log("[handleSaveNickname] Updating global currentUser. Prev currentUser:",s);const e={...s,nickname:t.data.user.nickname};console.log("[handleSaveNickname] New global currentUser will be:",e),x(e)}se(!1)}catch(r){var t,a;console.error("Error saving nickname:",r),ie((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||r.message||"\u4fdd\u5b58\u6635\u79f0\u65f6\u51fa\u9519")}finally{le(!1)}}},disabled:oe,className:"px-3 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-xs transition-colors "+(oe?"opacity-50 cursor-not-allowed":""),children:oe?"\u4fdd\u5b58\u4e2d":"\u4fdd\u5b58"}),(0,d.jsx)("button",{onClick:()=>{se(!1),re((null===k||void 0===k?void 0:k.nickname)||""),ie(null)},className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 text-white rounded-md text-xs transition-colors",children:"\u53d6\u6d88"})]}),ne&&!te&&(0,d.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ne}),(0,d.jsxs)("p",{className:"text-sm text-gray-400 mt-1 mb-4",children:["\u7528\u6237 ID: ",k.id," \xb7 \u7528\u6237\u81ea ",new Date(k.created_at).toLocaleDateString("zh-CN")," \u52a0\u5165"]}),(0,d.jsx)("div",{ref:ut,className:"mt-2 group relative max-w-xl "+(w&&!K?"cursor-pointer":""),onClick:()=>{w&&!K&&(Q((null===k||void 0===k?void 0:k.bio)||""),q(!0),ee(null))},children:K?(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("textarea",{value:G,onChange:e=>Q(e.target.value),placeholder:"\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u81ea\u5df1...",rows:3,className:"w-full p-2 text-sm text-white bg-gray-700/30 border border-gray-600/50 rounded-md focus:outline-none resize-y placeholder-gray-400",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&st()}}),X&&(0,d.jsx)("p",{className:"text-xs text-red-400 mt-0.5",children:X})]}):(0,d.jsx)("p",{className:"whitespace-pre-wrap break-words text-gray-300 "+(k.bio?"":"italic text-gray-500"),title:w?"\u70b9\u51fb\u7f16\u8f91\u4e2a\u6027\u7b7e\u540d":void 0,children:k.bio||(w?"\u70b9\u51fb\u6dfb\u52a0\u4e2a\u6027\u7b7e\u540d":"\u8fd8\u6ca1\u6709\u4e2a\u6027\u7b7e\u540d")})}),(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)("div",{className:"flex items-center mb-2",children:w&&!ce&&(!ue||0===ue.length)&&(0,d.jsx)("h3",{className:"text-sm text-gray-400 mr-2",children:"\u6807\u7b7e"})}),ce?(0,d.jsxs)("div",{ref:ye,className:"space-y-1",children:[(0,d.jsxs)("div",{className:"flex flex-wrap items-center gap-1 p-1.5 border border-gray-600/50 rounded-md bg-gray-700/30",children:[ue.map(((e,t)=>(0,d.jsxs)("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs font-medium text-indigo-100 rounded-full bg-indigo-500/80",children:[e,(0,d.jsx)("button",{onClick:()=>rt(e),className:"ml-1 -mr-0.5 p-0.5 rounded-full inline-flex items-center justify-center text-indigo-200 hover:bg-indigo-400/50 hover:text-white focus:outline-none","aria-label":`\u79fb\u9664\u6807\u7b7e ${e}`,children:(0,d.jsx)("svg",{className:"h-2.5 w-2.5",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeWidth:"1.5",d:"M1 1l6 6m0-6L1 7"})})})]},t))),ue.length<20&&(0,d.jsx)("input",{type:"text",value:he,onChange:e=>me(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),at())},placeholder:"\u6dfb\u52a0...",maxLength:15,className:"inline-block flex-grow min-w-[60px] h-5 px-1 py-0.5 bg-transparent focus:outline-none sm:text-xs text-white placeholder-gray-400"}),ue.length>=20&&(0,d.jsx)("span",{className:"text-xs text-gray-400 italic",children:"\u5df2\u8fbe\u4e0a\u9650"})]}),ve&&(0,d.jsx)("p",{className:"text-xs text-red-400 mt-0.5",children:ve})]}):(0,d.jsxs)("div",{className:"flex flex-wrap gap-1 "+(w?"cursor-pointer min-h-[20px]":"min-h-[20px]"),onClick:()=>w&&de(!0),title:w?"\u70b9\u51fb\u7f16\u8f91\u6807\u7b7e":void 0,children:[(w?ue:k.tags||[]).map(((e,t)=>(0,d.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium text-indigo-100 rounded-full bg-indigo-600/70",children:e},t))),w&&(!ue||0===ue.length)&&(0,d.jsx)("span",{className:"text-gray-500 text-xs italic",children:"\u70b9\u51fb\u6dfb\u52a0\u6807\u7b7e"}),!w&&(!k.tags||0===k.tags.length)&&(0,d.jsx)("span",{className:"text-gray-500 text-xs italic",children:"\u6682\u65e0\u6807\u7b7e"})]})]})]})]})}),(0,d.jsx)("div",{className:"mt-10 mb-8 border-b border-gray-700/50",children:(0,d.jsx)("nav",{className:"-mb-px flex space-x-6 justify-center md:justify-start","aria-label":"Tabs",children:(w?["articles","posts","dynamics","series"]:["articles","posts","dynamics"]).map((e=>(0,d.jsx)("button",{onClick:()=>be(e),className:`whitespace-nowrap pb-3 px-1 border-b-2 font-medium text-sm transition-colors duration-200 \n                         ${we===e?"border-indigo-400 text-indigo-300":"border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-500"}\n                  `,children:"articles"===e?"\u6587 \u7ae0":"posts"===e?"\u5e16 \u5b50":"dynamics"===e?"\u52a8 \u6001":"\u7cfb \u5217"},e)))})}),(0,d.jsxs)("div",{className:"mt-8",children:["articles"===we&&(0,d.jsxs)("div",{className:"space-y-3 min-h-[300px] relative pb-16",children:[(0,d.jsx)("div",{className:"transition-opacity duration-300 "+(B?"opacity-70":"opacity-100"),children:S.length>0?S.map((e=>(0,d.jsxs)("div",{className:"py-2 px-2 border-b border-gray-700/30 flex justify-between items-center group relative hover:bg-gray-700/20 rounded-md transition-colors duration-150",children:[(0,d.jsxs)(o.N_,{to:`/article/${e.slug}`,className:"text-gray-200 hover:text-blue-300 truncate flex-grow mr-4",title:e.title,children:[e.series_name&&(0,d.jsxs)("span",{className:"text-xs text-purple-300 mr-1",children:["[",e.series_name,"]"]}),e.title]}),(0,d.jsxs)("div",{className:"flex items-center space-x-3 flex-shrink-0",children:[(0,d.jsx)("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:tt(e.created_at)}),w&&(0,d.jsxs)("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[(0,d.jsx)("button",{onClick:()=>V(`/edit-article/${e.slug}`),className:"text-blue-400 hover:text-blue-300 p-1 rounded hover:bg-gray-600/50",title:"\u7f16\u8f91\u6587\u7ae0",children:(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[" ",(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})," "]})}),(0,d.jsx)("button",{onClick:()=>(async(e,t,s)=>{if(i&&w&&window.confirm(`\u60a8\u786e\u5b9a\u8981\u5220\u9664\u6587\u7ae0 "${s}" \u5417\uff1f\u6b64\u64cd\u4f5c\u65e0\u6cd5\u64a4\u9500\u3002`))try{const s=await h.A.delete(`${g.JR}/api/articles/${t}`,{headers:{Authorization:`Bearer ${i}`},validateStatus:function(e){return!0}});if(200===s.status||204===s.status)C((t=>t.filter((t=>t.id!==e)))),m.oR.success("\u6587\u7ae0\u5df2\u6210\u529f\u5220\u9664\uff01");else{var a;if(401!==s.status)throw new Error((null===(a=s.data)||void 0===a?void 0:a.error)||"\u5220\u9664\u6587\u7ae0\u5931\u8d25\uff1a\u670d\u52a1\u5668\u8fd4\u56de\u975e\u6210\u529f\u72b6\u6001\u7801");console.warn("\u5220\u9664\u6587\u7ae0\u65f6\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\uff0c\u4f46\u4e0d\u81ea\u52a8\u767b\u51fa"),m.oR.error("\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u540e\u91cd\u8bd5\u3002")}}catch(l){var r,o;console.error(`\u5220\u9664\u6587\u7ae0 ${t} \u5931\u8d25:`,l);const e=(null===(r=l.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.error)||l.message||"\u5220\u9664\u6587\u7ae0\u65f6\u51fa\u9519";m.oR.error(`\u5220\u9664\u5931\u8d25: ${e}`)}})(e.id,e.slug,e.title),className:"text-red-500 hover:text-red-400 p-1 rounded hover:bg-gray-600/50",title:"\u5220\u9664\u6587\u7ae0",children:(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[" ",(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})," "]})})]})]})]},e.id))):B?null:(0,d.jsx)("p",{className:"text-gray-400 text-center py-4",children:w?"\u60a8\u8fd8\u6ca1\u6709\u53d1\u5e03\u4efb\u4f55\u6587\u7ae0\u3002":"\u8be5\u7528\u6237\u8fd8\u6ca1\u6709\u53d1\u5e03\u4efb\u4f55\u6587\u7ae0\u3002"})}),B&&0===S.length&&(0,d.jsx)("div",{className:"absolute inset-0 flex justify-center items-center",children:(0,d.jsxs)("div",{className:"flex flex-col items-center",children:[(0,d.jsxs)("svg",{className:"animate-spin h-8 w-8 text-indigo-400 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,d.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,d.jsx)("p",{className:"text-gray-400",children:"\u52a0\u8f7d\u6587\u7ae0\u4e2d..."})]})})]}),"posts"===we&&(0,d.jsxs)("div",{className:"space-y-3 min-h-[300px] relative pb-16",children:[(0,d.jsx)("div",{className:"transition-opacity duration-300 "+(I?"opacity-70":"opacity-100"),children:P.length>0?P.map((e=>(0,d.jsxs)("div",{className:"py-2 px-2 border-b border-gray-700/30 flex justify-between items-center group relative hover:bg-gray-700/20 rounded-md transition-colors duration-150",children:[(0,d.jsx)(o.N_,{to:`/posts/${e.slug}`,className:"text-gray-200 hover:text-blue-300 truncate flex-grow mr-4",title:e.title,children:e.title}),(0,d.jsxs)("div",{className:"flex items-center space-x-3 flex-shrink-0",children:[(0,d.jsx)("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:tt(e.created_at)}),w&&(0,d.jsxs)("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[(0,d.jsx)("button",{onClick:()=>V(`/edit-post/${e.id}`),className:"text-blue-400 hover:text-blue-300 p-1 rounded hover:bg-gray-600/50",title:"\u7f16\u8f91\u5e16\u5b50",children:(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[" ",(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})," "]})}),(0,d.jsx)("button",{onClick:()=>(async(e,t)=>{if(i&&w&&window.confirm(`\u60a8\u786e\u5b9a\u8981\u5220\u9664\u5e16\u5b50 "${t}" \u5417\uff1f\u6b64\u64cd\u4f5c\u65e0\u6cd5\u64a4\u9500\u3002`))try{const a=await h.A.delete(`${g.JR}/api/posts/${e}`,{headers:{Authorization:`Bearer ${i}`},validateStatus:function(e){return!0}});if(200===a.status||204===a.status)A((t=>t.filter((t=>t.id!==e)))),m.oR.success(`\u5e16\u5b50 "${t}" \u5df2\u5220\u9664\u3002`);else{var s;if(401!==a.status)throw new Error((null===(s=a.data)||void 0===s?void 0:s.error)||"\u5220\u9664\u5e16\u5b50\u5931\u8d25\uff1a\u670d\u52a1\u5668\u8fd4\u56de\u975e\u6210\u529f\u72b6\u6001\u7801");console.warn("\u5220\u9664\u5e16\u5b50\u65f6\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\uff0c\u4f46\u4e0d\u81ea\u52a8\u767b\u51fa"),m.oR.error("\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u540e\u91cd\u8bd5\u3002")}}catch(o){var a,r;console.error("\u5220\u9664\u5e16\u5b50\u5931\u8d25:",o);const e=(null===(a=o.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.error)||o.message||"\u5220\u9664\u5e16\u5b50\u5931\u8d25";m.oR.error(`\u5220\u9664\u5931\u8d25: ${e}`)}})(e.id,e.title),className:"text-red-500 hover:text-red-400 p-1 rounded hover:bg-gray-600/50",title:"\u5220\u9664\u5e16\u5b50",children:(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[" ",(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})," "]})})]})]})]},e.id))):I?null:(0,d.jsx)("p",{className:"text-gray-400 text-center py-4",children:w?"\u60a8\u8fd8\u6ca1\u6709\u53d1\u5e03\u4efb\u4f55\u5e16\u5b50\u3002":"\u8be5\u7528\u6237\u8fd8\u6ca1\u6709\u53d1\u5e03\u4efb\u4f55\u5e16\u5b50\u3002"})}),I&&0===P.length&&(0,d.jsx)("div",{className:"absolute inset-0 flex justify-center items-center",children:(0,d.jsxs)("div",{className:"flex flex-col items-center",children:[(0,d.jsxs)("svg",{className:"animate-spin h-8 w-8 text-indigo-400 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,d.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,d.jsx)("p",{className:"text-gray-400",children:"\u52a0\u8f7d\u5e16\u5b50\u4e2d..."})]})})]}),"dynamics"===we&&(0,d.jsxs)("div",{className:"space-y-3 min-h-[300px] relative pb-16",children:[(0,d.jsx)("div",{className:"transition-opacity duration-300 "+(M?"opacity-70":"opacity-100"),children:R.length>0?R.map((e=>(0,d.jsxs)("div",{className:"py-3 px-2 border-b border-gray-700/30 flex justify-between items-start group relative hover:bg-gray-700/20 rounded-md transition-colors duration-150",children:[(0,d.jsx)("div",{className:"flex-grow mr-4",children:"user"===e.target_type?(console.log("ProfilePage: Rendering original dynamic:",JSON.stringify(e)),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-sm text-green-400",children:"\u53d1\u5e03\u4e86\u539f\u521b\u52a8\u6001"}),e.share_comment&&(0,d.jsx)("p",{className:"text-gray-200 text-sm mt-1 whitespace-pre-wrap break-words",children:e.share_comment}),e.images&&e.images.length>0&&(0,d.jsxs)("div",{className:"mt-2",children:[(0,d.jsx)("img",{src:nt(e.images[0]),alt:"\u52a8\u6001\u56fe\u7247",className:"max-h-32 rounded-md object-cover"}),e.images.length>1&&(0,d.jsxs)("span",{className:"text-xs text-gray-400 ml-2",children:["\u8fd8\u6709 ",e.images.length-1," \u5f20\u56fe\u7247"]})]})]})):(0,d.jsxs)("div",{children:[(0,d.jsxs)("span",{className:"text-sm text-gray-400",children:["\u5206\u4eab\u4e86 ","article"===e.target_type?"\u6587\u7ae0:":"post"===e.target_type?"\u5e16\u5b50:":"\u5185\u5bb9:"]}),e.target_slug&&e.target_title&&e.target_type&&(0,d.jsxs)(o.N_,{to:"article"===e.target_type?`/article/${e.target_slug}`:`/posts/${e.target_slug}`,className:"text-blue-300 hover:text-blue-200 hover:underline ml-1 font-medium",children:['"',e.target_title,'"']}),e.share_comment&&(0,d.jsx)("p",{className:"text-gray-200 text-sm mt-1 pl-2 border-l-2 border-gray-600/50 whitespace-pre-wrap break-words",children:e.share_comment})]})}),(0,d.jsxs)("div",{className:"flex flex-col items-end flex-shrink-0 space-y-1",children:[(0,d.jsx)("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:tt(e.shared_at)}),w&&(0,d.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm(`\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u6761\u52a8\u6001\u5417\uff1f\n"${t.substring(0,50)}${t.length>50?"...":""}"`))try{const t=await h.A.delete(`${g.JR}/api/actions/${e}`,{headers:{Authorization:`Bearer ${i}`},validateStatus:function(e){return!0}});if(200===t.status||204===t.status)L((t=>t.filter((t=>t.action_id!==e)))),m.oR.success("\u52a8\u6001\u5df2\u5220\u9664\u3002");else{var s;if(401!==t.status)throw new Error((null===(s=t.data)||void 0===s?void 0:s.error)||"\u5220\u9664\u52a8\u6001\u5931\u8d25\uff1a\u670d\u52a1\u5668\u8fd4\u56de\u975e\u6210\u529f\u72b6\u6001\u7801");console.warn("\u5220\u9664\u52a8\u6001\u65f6\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\uff0c\u4f46\u4e0d\u81ea\u52a8\u767b\u51fa"),m.oR.error("\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u540e\u91cd\u8bd5\u3002")}}catch(o){var a,r;console.error("\u5220\u9664\u52a8\u6001\u5931\u8d25:",o);const e=(null===(a=o.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.error)||o.message||"\u5220\u9664\u52a8\u6001\u5931\u8d25";m.oR.error(`\u5220\u9664\u5931\u8d25: ${e}`)}})(e.action_id,e.share_comment||""),className:"text-red-500 hover:text-red-400 p-1 rounded hover:bg-gray-600/50 opacity-0 group-hover:opacity-100 transition-opacity duration-200",title:"\u5220\u9664\u52a8\u6001",children:(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[" ",(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})," "]})})]})]},e.action_id))):M?null:(0,d.jsx)("p",{className:"text-gray-400 text-center py-4",children:w?"\u60a8\u8fd8\u6ca1\u6709\u53d1\u5e03\u4efb\u4f55\u52a8\u6001\u3002":"\u8be5\u7528\u6237\u8fd8\u6ca1\u6709\u53d1\u5e03\u4efb\u4f55\u52a8\u6001\u3002"})}),M&&0===R.length&&(0,d.jsx)("div",{className:"absolute inset-0 flex justify-center items-center",children:(0,d.jsxs)("div",{className:"flex flex-col items-center",children:[(0,d.jsxs)("svg",{className:"animate-spin h-8 w-8 text-indigo-400 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,d.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,d.jsx)("p",{className:"text-gray-400",children:"\u52a0\u8f7d\u52a8\u6001\u4e2d..."})]})})]}),"series"===we&&w&&(0,d.jsx)("div",{className:"space-y-3",children:F?(0,d.jsx)("p",{className:"text-gray-400 text-center py-4",children:"\u52a0\u8f7d\u7cfb\u5217\u4e2d..."}):U.length>0?U.map(((e,t)=>(0,d.jsx)("div",{className:"py-2 border-b border-gray-700/30",children:(0,d.jsx)("span",{className:"text-gray-200",children:e})},t))):(0,d.jsx)("p",{className:"text-gray-400 text-center py-4",children:"\u60a8\u8fd8\u6ca1\u6709\u521b\u5efa\u4efb\u4f55\u7cfb\u5217\u3002"})})]}),"articles"===we&&Be>1||"posts"===we&&Oe>1||"dynamics"===we&&Ze>1?(0,d.jsx)(v,{currentPage:"articles"===we?Re:"posts"===we?Ie:Ve,totalPages:"articles"===we?Be:"posts"===we?Oe:Ze,onPageChange:e=>{"articles"===we?et(e,!1):"posts"===we?it(e,!1):"dynamics"===we&&ct(e,!1)},isLoading:"articles"===we?B||ze:"posts"===we?I||Fe:M||Qe}):null]}):!z&&(0,d.jsx)("p",{className:"text-center text-red-400 py-10",children:O||"\u65e0\u6cd5\u52a0\u8f7d\u7528\u6237\u4fe1\u606f"})]})]})})}}}]);
//# sourceMappingURL=166.1b52853b.chunk.js.map