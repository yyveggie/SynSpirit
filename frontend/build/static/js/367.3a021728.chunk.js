"use strict";(self.webpackChunkai_tools_website_frontend=self.webpackChunkai_tools_website_frontend||[]).push([[367],{6367:(e,a,s)=>{s.r(a),s.d(a,{default:()=>d});var t=s(5043),n=s(3216),i=s(6213),l=s(6625),r=s(4558),o=s(579);const d=()=>{var e;const a=(0,n.zy)(),[s,d]=(0,t.useState)("/register"===a.pathname),c=(0,n.Zp)(),{login:u,token:h}=(0,l.A)(),[p,v]=(0,t.useState)(""),[m,g]=(0,t.useState)(""),[x,j]=(0,t.useState)(""),[y,f]=(0,t.useState)(""),[b,S]=(0,t.useState)(!1),[w,N]=(0,t.useState)(""),[k,C]=(0,t.useState)(""),[_,q]=(0,t.useState)(""),[A,E]=(0,t.useState)(""),[J,R]=(0,t.useState)(!1),[$,B]=(0,t.useState)(!1),D=()=>{j(""),f(""),E("")},I=(null===(e=a.state)||void 0===e?void 0:e.from)||"/";(0,t.useEffect)((()=>(document.body.classList.add("auth-active"),()=>{document.body.classList.remove("auth-active")})),[]),(0,t.useEffect)((()=>{h&&c(I)}),[h,c,I]),(0,t.useEffect)((()=>{"/register"===a.pathname?(d(!0),D()):"/login"===a.pathname&&(d(!1),D())}),[a.pathname]);return(0,o.jsxs)("div",{className:"auth-page-container",children:[" ",(0,o.jsxs)("div",{className:"container "+(s?"right-panel-active":""),id:"auth-container",children:[(0,o.jsx)("div",{className:"form-container sign-up-container",children:(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),D(),E(""),k===_){R(!0);try{await i.A.post(`${r.JR}/api/auth/register`,{email:w,password:k}),d(!1),v(w),C(""),q(""),E(""),f("\u6ce8\u518c\u6210\u529f\uff01\u8bf7\u4f7f\u7528\u4e0a\u9762\u9884\u586b\u7684\u90ae\u7bb1\u767b\u5f55\u3002")}catch(t){var a,s;E((null===(a=t.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||t.message||"\u6ce8\u518c\u5931\u8d25")}finally{R(!1)}}else E("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4")},children:[(0,o.jsx)("h1",{children:"\u521b\u5efa\u8d26\u6237"}),(0,o.jsx)("input",{type:"email",placeholder:"\u90ae\u7bb1",value:w,onChange:e=>N(e.target.value),required:!0}),(0,o.jsx)("input",{type:"password",placeholder:"\u5bc6\u7801",value:k,onChange:e=>C(e.target.value),required:!0}),(0,o.jsx)("input",{type:"password",placeholder:"\u786e\u8ba4\u5bc6\u7801",value:_,onChange:e=>q(e.target.value),required:!0}),A&&(0,o.jsx)("p",{className:"error-message",children:A}),(0,o.jsx)("button",{type:"submit",disabled:J||$,children:J?"\u6ce8\u518c\u4e2d...":"\u7acb\u5373\u6ce8\u518c"})]})}),(0,o.jsx)("div",{className:"form-container sign-in-container",children:(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),D(),S(!0);try{const e=await i.A.post(`${r.JR}/api/auth/login`,{email:p,password:m});(await u(e.data.token,e.data.user)).success&&c(I)}catch(t){var a,s;j((null===(a=t.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||t.message||"\u767b\u5f55\u5931\u8d25")}finally{S(!1)}},children:[(0,o.jsx)("h1",{children:"\u767b\u5f55"}),(0,o.jsx)("input",{type:"email",placeholder:"\u90ae\u7bb1",value:p,onChange:e=>{v(e.target.value),f(""),j("")},required:!0}),(0,o.jsx)("input",{type:"password",placeholder:"\u5bc6\u7801",value:m,onChange:e=>{g(e.target.value),f(""),j("")},required:!0}),x&&(0,o.jsx)("p",{className:"error-message",children:x}),y&&(0,o.jsx)("p",{className:"success-message",children:y}),(0,o.jsx)("button",{type:"submit",disabled:b||$,children:b?"\u767b\u5f55\u4e2d...":"\u7acb\u5373\u767b\u5f55"}),(0,o.jsx)("button",{type:"button",onClick:async()=>{B(!0),j(""),E("");try{const e=await i.A.post(`${r.JR}/api/auth/guest-login`),a={id:0,email:"guest@example.com",nickname:"\u6e38\u5ba2",is_admin:!1,avatar:null,bio:null,tags:[]};await u(e.data.token,a),localStorage.setItem("isGuest","true"),c(I)}catch(l){var e,a,t,n;if(s)E((null===(e=l.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"\u6e38\u5ba2\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5");else j((null===(t=l.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"\u6e38\u5ba2\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")}finally{B(!1)}},disabled:b||J||$,className:"ghost guest-login-button",children:$?"\u5904\u7406\u4e2d...":"\u4f5c\u4e3a\u6e38\u5ba2\u7ee7\u7eed"})]})}),(0,o.jsx)("div",{className:"overlay-container",children:(0,o.jsxs)("div",{className:"overlay",children:[(0,o.jsxs)("div",{className:"overlay-panel overlay-left",children:[(0,o.jsx)("h1",{children:"\u6b22\u8fce\u56de\u6765\uff01"}),(0,o.jsx)("p",{children:"\u8981\u4e0e\u6211\u4eec\u4fdd\u6301\u8054\u7cfb\uff0c\u8bf7\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u767b\u5f55"}),(0,o.jsx)("button",{className:"ghost",id:"signInButton",onClick:()=>{d(!1),D()},children:"\u767b\u5f55"})]}),(0,o.jsxs)("div",{className:"overlay-panel overlay-right",children:[(0,o.jsx)("h1",{children:"\u4f60\u597d\uff0c\u670b\u53cb\uff01"}),(0,o.jsx)("p",{children:"\u8f93\u5165\u60a8\u7684\u4e2a\u4eba\u8be6\u7ec6\u4fe1\u606f\uff0c\u4e0e\u6211\u4eec\u4e00\u8d77\u5f00\u59cb\u65c5\u7a0b"}),(0,o.jsx)("button",{className:"ghost",id:"signUpButton",onClick:()=>{d(!0),D()},children:"\u6ce8\u518c"})]})]})})]})]})}}}]);
//# sourceMappingURL=367.3a021728.chunk.js.map