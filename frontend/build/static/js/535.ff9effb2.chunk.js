"use strict";(self.webpackChunkai_tools_website_frontend=self.webpackChunkai_tools_website_frontend||[]).push([[535],{2188:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(5043),s=n(7950),r=n(579);const i=e=>{let{images:t,initialIndex:n=0,onClose:i,isOpen:l}=e;const[o,c]=(0,a.useState)(n);(0,a.useEffect)((()=>{l&&c(n)}),[l,n]),(0,a.useEffect)((()=>{const e=e=>{"Escape"===e.key?i():"ArrowRight"===e.key?d():"ArrowLeft"===e.key&&m()};return l&&window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[l,i]);const d=(0,a.useCallback)((()=>{c((e=>(e+1)%t.length))}),[t.length]),m=(0,a.useCallback)((()=>{c((e=>(e-1+t.length)%t.length))}),[t.length]);if(!l||!t.length)return null;const u=(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/75",onClick:i,children:(0,r.jsxs)("div",{className:"relative bg-black p-1 sm:p-2 rounded-lg shadow-xl max-w-[95vw] sm:max-w-2xl md:max-w-3xl lg:max-w-4xl",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("img",{src:t[o],alt:`View ${o+1} of ${t.length}`,style:{maxWidth:"calc(100vw - 40px)",maxHeight:"calc(100vh - 80px)",objectFit:"contain",borderRadius:"4px"}})}),t.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{"aria-label":"Previous image",className:"absolute left-2 sm:left-3 top-1/2 -translate-y-1/2 w-10 h-10 flex items-center justify-center text-white text-3xl rounded-full bg-black/40 hover:bg-black/60 transition-all",onClick:e=>{e.stopPropagation(),m()},children:"\u2039"}),(0,r.jsx)("button",{"aria-label":"Next image",className:"absolute right-2 sm:right-3 top-1/2 -translate-y-1/2 w-10 h-10 flex items-center justify-center text-white text-3xl rounded-full bg-black/40 hover:bg-black/60 transition-all",onClick:e=>{e.stopPropagation(),d()},children:"\u203a"}),(0,r.jsxs)("div",{className:"absolute bottom-2 sm:bottom-3 left-1/2 -translate-x-1/2 px-3 py-1 text-sm text-white bg-black/50 rounded-md",children:[o+1," / ",t.length]})]})]})});return(0,s.createPortal)(u,document.body)}},4535:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var a=n(5043),s=n(6213),r=n(8775),i=n(4558),l=n(8560),o=n(6625),c=n(2115),d=n(5369),m=n(2127),u=n(6199),p=n(4383),x=n(3248),h=n(8261),y=n(7097),g=n(8899),b=n(579);const v=(0,a.memo)((e=>{var t,n,s,r,l,o;let{comment:x,currentUser:h,depth:y=0,isLastReply:g=!1,token:f,replyToCommentId:w,setReplyToCommentId:j,replyContent:k,setReplyContent:C,handleReplySubmit:N,submittingReply:R,formatCommentDate:S,handleDeleteComment:I,forceExpandCommentId:_,handleLikeComment:E,scrollToCommentId:A,onScrolledToComment:L}=e;const $=x.is_ai_generated,T=$?(null===(t=x.user)||void 0===t?void 0:t.nickname)||"Lynn":(null===(n=x.user)||void 0===n?void 0:n.nickname)||(null===(s=x.user)||void 0===s||null===(r=s.email)||void 0===r?void 0:r.split("@")[0])||"\u533f\u540d\u7528\u6237",z=$?i.k_:null===(l=x.user)||void 0===l?void 0:l.avatar,D=$||null===(o=x.user)||void 0===o?void 0:o.id,P={paddingLeft:1.5*y+"rem"},[K,q]=(0,a.useState)(y>=3),W=w===x.id,B=h&&x.user&&h.id===x.user.id&&!x.is_deleted&&!$,F=x.replies&&x.replies.length>0,U=(0,a.useRef)(null),Q=(0,a.useRef)(null),[J,M]=(0,a.useState)(x.is_liked||!1),[V,O]=(0,a.useState)(x.likes_count||0),[Y,H]=(0,a.useState)(!1),[G,X]=(0,a.useState)(!1),Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.length;for(const n of e)n.replies&&n.replies.length>0&&(t+=Z(n.replies));return t},ee=(0,a.useMemo)((()=>Z(x.replies||[])),[x.replies]);return(0,a.useEffect)((()=>{if(!W)return;const e=e=>{U.current&&!U.current.contains(e.target)&&(j(null),C(""))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[W,j,C]),(0,a.useEffect)((()=>{_===x.id&&q(!1)}),[_,x.id]),(0,a.useEffect)((()=>{M(x.is_liked||!1),O(x.likes_count||0)}),[x.is_liked,x.likes_count]),(0,a.useEffect)((()=>{X(!0)}),[]),(0,a.useEffect)((()=>{W&&U.current&&U.current.scrollIntoView({behavior:"smooth",block:"nearest"})}),[W]),(0,a.useEffect)((()=>{x.id===A&&Q.current&&(Q.current.scrollIntoView({behavior:"smooth",block:"center"}),null===L||void 0===L||L())}),[x.id,A,L,Q]),(0,b.jsxs)("div",{ref:Q,className:"comment-item text-gray-200",style:{opacity:G?1:0,transition:"opacity 0.15s ease-in-out"},children:[(0,b.jsxs)("div",{style:P,className:"comment-content-wrapper",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,b.jsx)(u.A,{userId:D,username:T,avatar:z,size:"sm",showName:!1}),(0,b.jsx)("span",{className:"text-sm font-medium "+($?"text-purple-400":x.user?"text-gray-100":"text-gray-400"),children:T}),(0,b.jsx)("span",{className:"text-gray-400 text-xs pt-0.5 ml-auto",children:S(x.created_at)})]}),(0,b.jsxs)("div",{className:"pl-8 "+(F&&K?"pb-0":"pb-1"),children:[(0,b.jsx)("p",{className:"text-sm whitespace-pre-wrap break-words mb-1.5 "+(x.is_deleted?"text-gray-500 italic":$?"text-purple-50":"text-gray-100"),children:x.content}),!x.is_deleted&&(0,b.jsxs)("div",{className:"flex items-center space-x-3 text-xs mt-1",children:[F&&(0,b.jsx)("button",{onClick:()=>q(!K),className:"text-xs text-blue-400 hover:text-blue-300 focus:outline-none min-w-[36px] text-left",children:K?`[+${ee}]`:"[-]"}),(0,b.jsx)("button",{onClick:()=>{W?(j(null),C("")):j(x.id)},className:"flex items-center text-gray-400 hover:text-blue-400 p-0.5 rounded",children:(0,b.jsx)(m.zDP,{})}),(0,b.jsxs)("button",{onClick:async()=>{if(!f||Y||x.is_deleted)return;H(!0);const e=J,t=V;M(!J),O(J?V-1:V+1);try{await E(x.id,e)}catch(n){M(e),O(t),c.oR.error("\u70b9\u8d5e\u5931\u8d25")}finally{H(!1)}},disabled:Y,className:"flex items-center p-0.5 rounded "+(J?"text-pink-500 hover:text-pink-400":"text-gray-400 hover:text-pink-400"),children:[J?(0,b.jsx)(d.Mbv,{}):(0,b.jsx)(d.sOK,{}),(0,b.jsx)("span",{className:"ml-1 text-xs tabular-nums",style:{visibility:V>0?"visible":"hidden"},children:V>0?V:"0"})]}),B&&(0,b.jsx)("button",{onClick:()=>I(x.id),className:"flex items-center text-gray-400 hover:text-red-400 p-0.5 rounded",children:(0,b.jsx)(m.WeY,{})})]}),(0,b.jsx)(p.P.div,{className:"relative overflow-hidden mt-2",initial:!1,animate:{height:W?"auto":0,opacity:W?1:0},transition:{duration:.25,ease:"easeInOut"},children:(0,b.jsxs)("div",{ref:U,children:[" ",(0,b.jsx)("textarea",{value:W?k:"",onChange:e=>{W&&C(e.target.value)},placeholder:`\u56de\u590d ${T}...`,rows:2,className:"w-full px-2 py-1.5 text-sm rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 resize-none bg-black/10 backdrop-blur-md text-gray-100 placeholder-gray-400",autoFocus:W,tabIndex:W?0:-1}),(0,b.jsx)("button",{onClick:async()=>{W&&await N(x.id)},disabled:!k.trim()||R,className:"absolute bottom-2 right-2 p-1 rounded-md "+(!k.trim()||R?"text-gray-500 cursor-not-allowed":"text-blue-400 hover:text-blue-300"),tabIndex:W?0:-1,children:R?(0,b.jsx)(d.hW,{className:"animate-spin h-4 w-4"}):(0,b.jsx)(m.zDP,{className:"h-4 w-4"})})]})})]})]}),!K&&x.replies&&x.replies.length>0&&(0,b.jsx)("div",{className:"replies-container mt-1",children:x.replies.map(((e,t)=>(0,b.jsx)(v,{comment:e,currentUser:h,depth:y+1,isLastReply:t===x.replies.length-1,token:f,replyToCommentId:w,setReplyToCommentId:j,replyContent:k,setReplyContent:C,handleReplySubmit:N,submittingReply:R,formatCommentDate:S,handleDeleteComment:I,forceExpandCommentId:_,handleLikeComment:E,scrollToCommentId:A,onScrolledToComment:L},e.id)))})]})})),f=(0,a.memo)((e=>{let{actionId:t,wrapperClassName:n,wrapperStyle:r}=e;const{user:l,token:m}=(0,o.A)(),u=(0,x.jE)(),[f,w]=(0,a.useState)(""),[j,k]=(0,a.useState)(!1),[C,N]=(0,a.useState)(null),[R,S]=(0,a.useState)(""),[I,_]=(0,a.useState)(!1),[E,A]=(0,a.useState)(null),L=(0,a.useRef)(null),[$,T]=(0,a.useState)(!1),[z,D]=(0,a.useState)(0),[P,K]=(0,a.useState)("latest"),[q,W]=(0,a.useState)(null),B=e=>new Date(e).toLocaleString("zh-CN"),F=(0,a.useMemo)((()=>["actionComments",t,P]),[t,P]),{data:U,isLoading:Q,isError:J,error:M,refetch:V}=(0,h.I)({queryKey:F,queryFn:async()=>(await s.A.get(`${i.JR}/api/actions/${t}/comments?sort_by=${P}`,{headers:m?{Authorization:`Bearer ${m}`}:{}})).data,enabled:!!t,placeholderData:e=>e}),O=(null===U||void 0===U?void 0:U.comments)||[],Y=J?(null===M||void 0===M?void 0:M.message)||"\u52a0\u8f7d\u8bc4\u8bba\u5931\u8d25":null,H=e=>{K(e),c.oR.info("latest"===e?"\u6309\u6700\u65b0\u6392\u5e8f":"\u6309\u70ed\u95e8\u6392\u5e8f")},G=(0,y.n)({mutationFn:async e=>{let{content:n,mentionLynn:a}=e;const r=`${i.JR}/api/actions/${t}/comments`,l={content:n.trim()};a&&(l.mention_lynn=!0);return(await s.A.post(r,l,{headers:{Authorization:`Bearer ${m}`}})).data},onSuccess:()=>{u.invalidateQueries({queryKey:["actionComments",t]}),w(""),c.oR.success("\u8bc4\u8bba\u53d1\u8868\u6210\u529f\uff01")},onError:e=>{console.error("\u63d0\u4ea4\u52a8\u6001\u8bc4\u8bba\u5931\u8d25:",e),c.oR.error(e.message||"\u8bc4\u8bba\u63d0\u4ea4\u5931\u8d25")},onSettled:()=>{k(!1)}}),X=()=>{if(!m||!f.trim())return void c.oR.warn("\u8bc4\u8bba\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a\u4e14\u9700\u8981\u767b\u5f55\u3002");k(!0);const e=f.toLowerCase().includes("@lynn");G.mutate({content:f,mentionLynn:e})},Z=(0,y.n)({mutationFn:async e=>{let{parentId:n,content:a,mentionLynn:r}=e;const l=`${i.JR}/api/actions/${t}/comments`,o={content:a.trim(),parent_id:n};r&&(o.mention_lynn=!0);return(await s.A.post(l,o,{headers:{Authorization:`Bearer ${m}`}})).data},onSuccess:e=>{u.invalidateQueries({queryKey:["actionComments",t]}),S(""),N(null),c.oR.success("\u56de\u590d\u6210\u529f\uff01"),e&&e.id&&(W(e.id),e.parent_id&&A(e.parent_id))},onError:e=>{console.error("\u63d0\u4ea4\u52a8\u6001\u56de\u590d\u5931\u8d25:",e),c.oR.error(e.message||"\u56de\u590d\u63d0\u4ea4\u5931\u8d25")},onSettled:()=>{_(!1)}}),ee=async e=>{if(!m||!R.trim())return void c.oR.warn("\u56de\u590d\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a\u4e14\u9700\u8981\u767b\u5f55\u3002");_(!0);const t=R.toLowerCase().includes("@lynn");await Z.mutate({parentId:e,content:R,mentionLynn:t})},te=(0,a.useCallback)((async e=>{if(m&&window.confirm("\u5220\u9664\u8bc4\u8bba?"))try{await s.A.delete(`${i.JR}/api/comments/${e}`,{headers:{Authorization:`Bearer ${m}`}}),u.invalidateQueries({queryKey:["actionComments",t]}),c.oR.success("\u5df2\u5220\u9664")}catch(n){c.oR.error("\u5220\u9664\u5931\u8d25")}}),[m,t,u]),ne=(0,a.useCallback)((async(e,n)=>{if(!m)return;const a=`${i.JR}/api/comments/${e}/like?target_type=action`;try{n?await s.A.delete(a,{headers:{Authorization:`Bearer ${m}`}}):await s.A.post(a,{},{headers:{Authorization:`Bearer ${m}`}}),u.invalidateQueries({queryKey:["actionComments",t]})}catch(r){throw c.oR.error("\u70b9\u8d5e\u64cd\u4f5c\u5931\u8d25"),r}}),[m,t,u]),ae=(0,a.useCallback)((e=>{N(e),null!==e&&A(e)}),[N,A]);return(0,b.jsxs)("div",{className:`action-comment-section ${n||""}`,style:r,children:[l&&m&&(0,b.jsxs)("div",{className:"mb-6 flex items-center space-x-2",children:[(0,b.jsxs)("div",{className:"relative flex-grow",children:[(0,b.jsx)("textarea",{ref:L,value:f,onChange:e=>{w(e.target.value)},onFocus:()=>{T(!0)},onBlur:()=>{T(!1)},className:"w-full px-3 py-2 pb-10 bg-black/10 backdrop-blur-md rounded-lg \n                                focus:outline-none focus:ring-1 focus:ring-blue-500 text-gray-100 text-sm \n                                border border-gray-700/50 transition-all duration-300 ease-in-out \n                                overflow-y-auto resize-none \n                                "+($||f.trim()?"h-20":"h-12"),placeholder:"\u6dfb\u52a0\u8bc4\u8bba...",rows:$||f.trim()?3:1,disabled:G.isPending,onKeyDown:e=>{(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&f.trim()&&X()}}),($||f.trim())&&(0,b.jsx)("button",{onClick:X,disabled:G.isPending||!f.trim(),className:"absolute bottom-2 right-2 z-20 p-1.5 text-blue-400 hover:text-blue-300 disabled:text-gray-500 disabled:cursor-not-allowed transition-colors duration-150 rounded-md hover:bg-gray-700/50 active:bg-gray-600/40 focus:outline-none",title:"\u53d1\u9001 (Cmd/Ctrl+Enter)",children:G.isPending?(0,b.jsx)(d.hW,{className:"animate-spin h-4 w-4"}):(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transform rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h10a8 8 0 018 8v2M3 10l4-4m-4 4l4 4"})})})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1.5 flex-shrink-0",children:[" ",(0,b.jsx)("button",{onClick:()=>H("latest"),className:"px-3 py-1.5 rounded-full border transition-colors text-xs font-medium "+("latest"===P?"bg-gray-700/60 border-gray-500 text-gray-200":"bg-transparent border-gray-600 text-gray-400 hover:border-gray-400 hover:text-gray-300"),children:"\u6700\u65b0"}),(0,b.jsx)("button",{onClick:()=>H("popular"),className:"px-3 py-1.5 rounded-full border transition-colors text-xs font-medium "+("popular"===P?"bg-gray-700/60 border-gray-500 text-gray-200":"bg-transparent border-gray-600 text-gray-400 hover:border-gray-400 hover:text-gray-300"),children:"\u70ed\u95e8"}),(0,b.jsx)("button",{onClick:()=>{V(),D((e=>e+1)),c.oR.info("\u6b63\u5728\u5237\u65b0\u8bc4\u8bba...")},disabled:Q,className:"p-1.5 text-gray-400 hover:text-blue-300 active:text-blue-500 transition-colors duration-150 rounded-full hover:bg-gray-700/40 active:bg-gray-600/40 focus:outline-none",title:"\u5237\u65b0\u8bc4\u8bba",children:Q?(0,b.jsx)(d.hW,{className:"animate-spin h-4 w-4"}):(0,b.jsx)(p.P.div,{initial:{rotate:0},animate:{rotate:360},transition:{duration:.4,ease:"linear"},style:{display:"flex"},children:(0,b.jsx)(g.A,{className:"h-4 w-4 block"})},`action-comment-refresh-${z}`)})]})]}),(0,b.jsxs)("div",{className:"relative",children:[Q&&!O.length&&(0,b.jsxs)("div",{className:"flex justify-center items-center py-8",children:[(0,b.jsx)(d.hW,{className:"animate-spin h-6 w-6 text-blue-400"}),(0,b.jsx)("p",{className:"ml-2 text-gray-300",children:"\u6b63\u5728\u52a0\u8f7d\u8bc4\u8bba..."})]}),J&&(0,b.jsx)("div",{className:"text-center py-4 text-red-400",children:(0,b.jsx)("p",{children:Y||"\u52a0\u8f7d\u8bc4\u8bba\u51fa\u9519\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u6216\u5237\u65b0\u9875\u9762\u3002"})}),!Q&&!J&&0===O.length&&(0,b.jsx)("div",{className:"py-6"}),O.length>0&&(0,b.jsx)("div",{className:"comments-list space-y-2 md:space-y-3 pt-3",children:O.map(((e,t)=>(0,b.jsx)(v,{comment:e,currentUser:l,token:m,replyToCommentId:C,setReplyToCommentId:ae,replyContent:R,setReplyContent:S,handleReplySubmit:ee,submittingReply:I,formatCommentDate:B,handleDeleteComment:te,forceExpandCommentId:E,handleLikeComment:ne,scrollToCommentId:q,onScrolledToComment:()=>W(null),isLastReply:t===O.length-1},e.id)))})]})]})}));var w=n(2188),j=n(4960);const k=()=>(0,b.jsx)("div",{children:Array.from({length:3}).map(((e,t)=>(0,b.jsx)("div",{className:"animate-pulse bg-gray-200 h-16 rounded mb-3"},t)))}),C=async(e,t)=>{if(!e)return null;const n=await s.A.get(`${i.JR}/api/actions/${e}/timeline`,{headers:t?{Authorization:`Bearer ${t}`}:{}});return n.data&&Array.isArray(n.data)?n.data.reverse():n.data},N=()=>{const{selectedDynamicId:e,closeTimeline:t,selectedDynamicData:n}=(0,r.x)(),[s,i]=(0,a.useState)(!1),[c,d]=(0,a.useState)([]),[m,u]=(0,a.useState)(0),{token:y}=(0,o.A)(),g=(0,x.jE)(),{data:v,isLoading:N,isFetching:R,error:S,status:I}=(0,h.I)({queryKey:["timeline",e],queryFn:()=>e?C(e,y||void 0):Promise.resolve(null),enabled:!!e,staleTime:3e5,gcTime:6e5,placeholderData:()=>{if(n&&n.action_id)return[n]}}),_=(e,t)=>{d(e.filter((e=>e))),u(t),i(!0),document.body.setAttribute("data-scroll-position",window.scrollY.toString())},E=()=>{i(!1);const e=document.body.getAttribute("data-scroll-position");e&&setTimeout((()=>{window.scrollTo({top:parseInt(e,10),behavior:"auto"})}),100)},A=!!(v&&v.length>0),L=N&&!A&&"pending"===I,$=(0,a.useCallback)((()=>{e&&(console.log("\u64cd\u4f5c\u5b8c\u6210\uff0c\u5237\u65b0\u65f6\u95f4\u7ebf\u6570\u636e:",e),g.invalidateQueries({queryKey:["timeline",e]}),g.invalidateQueries({queryKey:["dynamics"]}))}),[e,g]);(0,a.useEffect)((()=>{}),[e,g]);(0,a.useEffect)((()=>{const e=e=>{if(window.location.pathname.startsWith("/dynamic/")&&(!e.state||!e.state.dynamicId)){console.log("\u68c0\u6d4b\u5230popstate\u4e8b\u4ef6\uff0c\u5173\u95ed\u65f6\u95f4\u7ebf"),t();const e=sessionStorage.getItem("previousUrl")||"/";sessionStorage.removeItem("previousUrl"),window.history.replaceState(null,"",e)}};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}}),[t]);return(0,b.jsxs)("div",{className:"w-full px-0 text-white relative h-full overflow-y-auto scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-transparent",children:[(0,b.jsx)("button",{onClick:()=>{if(t(),window.location.pathname.startsWith("/dynamic/")){const e=sessionStorage.getItem("previousUrl")||"/";console.log("\u5f3a\u5236\u6062\u590dURL\u4ece",window.location.pathname,"\u5230",e),sessionStorage.removeItem("previousUrl"),window.history.replaceState(null,"",e)}},className:"fixed right-4 top-[var(--navbar-height,0px)] z-50 p-1.5 rounded-full text-white bg-blue-600/60 hover:bg-blue-500/80 transition-all duration-150 backdrop-blur-sm shadow-md","aria-label":"\u5173\u95ed\u65f6\u95f4\u7ebf",title:"\u5173\u95ed\u65f6\u95f4\u7ebf",children:(0,b.jsx)(j.WQq,{className:"h-4 w-4"})}),L?(0,b.jsx)(k,{}):(()=>{const e=null!==v&&void 0!==v?v:n&&n.action_id?[n]:null;return"error"===I?(console.log("[TimelineView] Render: Error"),(0,b.jsx)("div",{className:"relative px-1 pt-2 pb-2",children:(0,b.jsx)("div",{className:"p-4 text-red-400",children:S.message||"\u83b7\u53d6\u65f6\u95f4\u7ebf\u6570\u636e\u5931\u8d25"})})):e&&0===e.length?(console.log("[TimelineView] Render: Empty Data"),(0,b.jsx)("div",{className:"relative px-1 pt-2 pb-2",children:(0,b.jsx)("div",{className:"p-4 text-gray-500",children:"\u672a\u80fd\u52a0\u8f7d\u65f6\u95f4\u7ebf\u6570\u636e\u6216\u6b64\u52a8\u6001\u6ca1\u6709\u66f4\u591a\u4e0a\u4e0b\u6587\u3002"})})):(0,b.jsxs)("div",{className:"relative px-1 pt-2 pb-2",children:[(()=>{const t=null===e||void 0===e?void 0:e.filter((e=>!e.is_deleted));return t&&0!==t.length?(0,b.jsx)(p.P.div,{className:"relative space-y-5 mt-0 w-full",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:t.map(((e,n)=>(0,b.jsx)(p.P.div,{className:"w-full relative "+(n===t.length-1?"mb-0":""),variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},children:(0,b.jsxs)("div",{className:"w-full flex flex-col gap-3 relative",children:[(0,b.jsx)(l.A,{dynamic:e,variant:"timeline",onImageClick:_,forceExpandContent:!0,onActionComplete:$,className:"w-[750px] max-w-[750px] pr-0 mx-auto z-10"}),(0,b.jsx)(f,{actionId:e.action_id,wrapperClassName:"relative w-[750px] max-w-[750px] mx-auto mt-1 max-h-[450px] overflow-y-auto pr-0 bg-opacity-5 bg-purple-900 rounded-md p-2",wrapperStyle:{scrollbarWidth:"thin"}})]})},e.action_id)))}):(0,b.jsx)("div",{className:"p-4 text-gray-500",children:"\u672a\u80fd\u52a0\u8f7d\u65f6\u95f4\u7ebf\u6570\u636e\u6216\u6b64\u52a8\u6001\u5df2\u88ab\u5220\u9664\u3002"})})(),s&&(0,b.jsx)(w.A,{images:c,initialIndex:m,onClose:E,isOpen:s})]})})()]})}}}]);
//# sourceMappingURL=535.ff9effb2.chunk.js.map