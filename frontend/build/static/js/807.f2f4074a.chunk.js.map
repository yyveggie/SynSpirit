{"version":3,"file":"static/js/807.f2f4074a.chunk.js","mappings":"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","sources":["components/Chatbot.tsx","hooks/useToolsQueries.ts","components/Skeletons/ToolDetailSkeleton.tsx","pages/ToolDetailPage.tsx"],"sourcesContent":["/**\n * 此文件定义了 Chatbot 组件，提供一个悬浮的聊天机器人界面。\n *\n * 主要功能:\n * - 根据 isOpen prop 控制聊天窗口的显示和隐藏。\n * - 提供聊天输入框和消息显示区域。\n * - 与后端聊天 API 进行交互，发送用户消息并接收 AI 响应。\n * - 可能包含一些预设问题或功能按钮。\n * - 作为一个独立的、可嵌入到不同页面的组件。\n *\n * 注意: 如果新增、删除或修改功能，必须在这开头的注释中同步修改，\n * 如发现功能与注释描述不同，也可以在确定后修改。\n */\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useChatLogic, Message } from '../hooks/useChatLogic'; // 导入Hook和Message类型\nimport { API_BASE_URL } from '../config'; // 仍然需要API_BASE_URL用于测试重连\nimport { useAuth } from '../context/AuthContext'; // 添加 useAuth 导入\n\ninterface ChatbotProps {\n  isOpen: boolean;\n  onClose: () => void;\n  toolName?: string;\n  toolDescription?: string;\n  /** 启用内联模式，适用于嵌入在其他组件中而非悬浮显示 */\n  inlineMode?: boolean;\n}\n\n// Quick message interface (可以考虑移到共享文件)\ninterface QuickMessage {\n  label: string;\n  value: string;\n}\n\nconst Chatbot: React.FC<ChatbotProps> = ({ isOpen, onClose, inlineMode = false }) => {\n  const { token, user } = useAuth(); // 获取用户认证信息\n  const [input, setInput] = useState('');\n  const [isSmallScreen, setIsSmallScreen] = useState(window.innerWidth < 768);\n  \n  // 使用自定义Hook管理核心聊天逻辑\n  const {\n    messages, \n    setMessages, // 可能需要用于重试逻辑\n    currentConversationId,\n    setCurrentConversationId, // 可能需要用于导航逻辑\n    isLoading,\n    apiError,\n    isTyping,\n    messagesEndRef,\n    handleSend: sendChatMessage, // 重命名以避免与内部函数冲突\n    loadConversation,\n    createNewChat, // Chatbot本身可能不需要这个\n    handleRetry: retryApiConnection // 重命名\n  } = useChatLogic(); // 初始对话ID由Hook管理\n\n  const closeRef = useRef(onClose);\n  \n  useEffect(() => {\n    closeRef.current = onClose;\n  }, [onClose]);\n  \n  // 处理重试连接（现在使用Hook中的逻辑，但需要额外fetch测试）\n  const handleRetry = () => {\n    retryApiConnection(); // 调用Hook中的清理错误状态逻辑\n    \n    // 这里保留测试连接的逻辑，或者可以将其移入Hook?\n    // 为了简单起见，暂时保留在这里，但理想情况是Hook处理所有API交互\n    setMessages(prev => [...prev.filter(msg => !msg.content.includes('无法连接到聊天服务') && !msg.content.includes('正在尝试重新连接')),\n      { role: 'assistant', content: '正在尝试重新连接...', displayContent: '正在尝试重新连接...' }]);\n      \n    fetch(`${API_BASE_URL}/api/chat`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ message: '测试连接', conversation_id: null })\n    })\n    .then(response => {\n      if (response.ok) {\n        setMessages(prev => [...prev.filter(msg => msg.content !== '正在尝试重新连接...'),\n          { role: 'assistant', content: '连接已恢复！请问有什么需要帮助的？🥰', displayContent: '连接已恢复！请问有什么需要帮助的？🥰' }]);\n        const reader = response.body?.getReader();\n        if (reader) reader.cancel();\n      } else {\n        throw new Error('API仍然无法连接');\n      }\n    })\n    .catch(error => {\n      console.error('重试连接失败:', error);\n      setMessages(prev => [...prev.filter(msg => msg.content !== '正在尝试重新连接...'),\n        { role: 'assistant', content: '抱歉，服务器仍然无法连接。请检查后端服务是否正常运行。', displayContent: '抱歉，服务器仍然无法连接。请检查后端服务是否正常运行。' }]);\n      // Hook内部已经处理了apiError状态\n    });\n  };\n\n  // 处理发送消息（调用Hook中的函数）\n  const handleSend = async () => {\n    if (input.trim() === '' || isLoading) return;\n    const currentInput = input;\n    setInput(''); // 清空输入框\n    const newConvId = await sendChatMessage(currentInput);\n    if (newConvId && !currentConversationId) {\n      // 如果Hook创建了新对话，更新本地状态（如果需要）\n      setCurrentConversationId(newConvId);\n    }\n    // 注意：isLoading, messages, isTyping等状态由Hook自动管理\n  };\n  \n  // 处理键盘事件\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n  \n  // 快速消息（保持不变，因为这是UI特定部分）\n  const quickMessages: QuickMessage[] = [\n    { label: '推荐AI绘画工具?', value: '推荐AI绘画工具?' },\n    { label: '生成视频的AI?', value: '有什么好用的AI视频生成工具？' },\n    { label: '写代码的AI助手?', value: '有哪些适合写代码的AI助手？' }\n  ];\n\n  // --- UI Rendering ---\n  if (inlineMode) {\n    return (\n      <div className={`${isOpen ? 'block' : 'hidden'} h-full`}>\n        <motion.div \n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={isOpen ? { opacity: 1, scale: 1 } : { opacity: 0, scale: 0.95 }}\n          transition={{ duration: 0.2 }}\n          className=\"h-full\"\n        >\n          <div className=\"bg-white rounded-lg shadow-xl overflow-hidden flex flex-col w-full h-full\">\n            {/* Header */} \n            <div className=\"bg-gray-100 px-4 py-3 flex justify-between items-center border-b border-gray-200 flex-shrink-0\">\n              <h3 className=\"text-gray-800 font-medium text-lg\">Lynn</h3>\n              <div className=\"flex space-x-3 items-center\">\n                {apiError && (\n                  <span className=\"text-xs text-red-500\" title={apiError}>连接错误</span>\n                )}\n                <button \n                  onClick={onClose}\n                  className=\"text-gray-500 hover:text-gray-800 transition-colors\"\n                  title=\"关闭\"\n                >\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                    <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n\n            {/* Message list */}\n            <div ref={messagesEndRef} className=\"flex-grow overflow-y-auto p-4 space-y-4 bg-gray-100\">\n              {messages.map((msg, index) => (\n                <div key={msg.id ?? `temp-${msg.role}-${index}`} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>\n                  <div className={`max-w-[80%] px-4 py-2 rounded-lg text-sm shadow ${msg.role === 'user' ? 'bg-gray-200 text-black' : 'bg-white text-black'}`}>\n                    {(msg.displayContent || '').split('\\n').map((line, i) => (\n                      <span key={i} className=\"block\">{line}</span>\n                    ))}\n                    {msg.role === 'assistant' && isTyping && index === messages.length - 1 && (\n                      <span className=\"inline-block w-2 h-4 bg-gray-500 ml-0.5 animate-pulse\"></span>\n                    )}\n                    {msg.role === 'assistant' && apiError && msg.content.includes('无法连接到聊天服务') && (\n                      <button onClick={handleRetry} className=\"mt-2 text-xs text-blue-600 hover:underline\">\n                        重试连接\n                      </button>\n                    )}\n                    {msg.role === 'assistant' && apiError && !msg.content.includes('无法连接到聊天服务') && msg.content.includes('出错啦') && (\n                      <span className=\"block mt-1 text-xs text-red-500\">错误: {apiError}</span>\n                    )}\n                  </div>\n                </div>\n              ))}\n              {isLoading && !isTyping && (\n                <div className=\"flex justify-start\">\n                  <div className=\"bg-white text-black px-4 py-2 rounded-lg text-sm shadow\">\n                    <span className=\"italic text-gray-500\">Lynn 正在思考...</span>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Quick messages */} \n            {messages.length <= 1 && !isLoading && ( \n              <div className=\"flex-shrink-0 p-2 border-t border-gray-200 bg-white flex flex-wrap gap-2 justify-center\">\n                {quickMessages.map((qm) => (\n                  <button\n                    key={`qm-${qm.label}-${qm.value}`}\n                    onClick={() => { setInput(qm.value); handleSend(); }} \n                    className=\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs hover:bg-gray-200 transition-colors\"\n                  >\n                    {qm.label}\n                  </button>\n                ))}\n              </div>\n            )}\n\n            {/* Input area */} \n            <div className=\"p-4 border-t border-gray-200 bg-white flex-shrink-0\">\n              <div className=\"flex items-center space-x-2\">\n                <input\n                  type=\"text\"\n                  value={input}\n                  onChange={(e) => setInput(e.target.value)}\n                  onKeyDown={handleKeyDown}\n                  placeholder=\"输入你的需求...\"\n                  className=\"flex-grow px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-gray-400 text-black text-sm\"\n                  disabled={isLoading}\n                />\n                <button\n                  onClick={handleSend}\n                  className=\"px-3 py-2 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 disabled:opacity-50 text-sm\"\n                  disabled={isLoading || input.trim() === ''}\n                >\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"> <path d=\"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 16.571V11.69l3.226-3.225a.5.5 0 01.707 0l1.293 1.293a.5.5 0 010 .707L10.07 13.69V16.57a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z\" /> </svg>\n                </button>\n              </div>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n    );\n  }\n\n  // 浮动窗口模式\n  return (\n    <div className=\"fixed bottom-6 right-6 z-50\">\n      <div className={`${isOpen ? 'block' : 'hidden'}`}>\n        <motion.div \n          initial={{ opacity: 0, y: 50, scale: 0.9 }}\n          animate={isOpen ? { opacity: 1, y: 0, scale: 1 } : { opacity: 0, y: 50, scale: 0.9 }}\n          transition={{ duration: 0.2 }}\n        >\n          <div className=\"bg-white rounded-lg shadow-xl overflow-hidden flex flex-col w-96 max-h-[80vh]\"\n            style={{ height: '600px' }}\n          >\n            {/* Header */} \n            <div className=\"bg-gray-100 px-4 py-3 flex justify-between items-center border-b border-gray-200 flex-shrink-0\">\n              <h3 className=\"text-gray-800 font-medium text-lg\">Lynn</h3>\n              <div className=\"flex space-x-3 items-center\">\n                {apiError && (\n                  <span className=\"text-xs text-red-500\" title={apiError}>连接错误</span>\n                )}\n                <button \n                  onClick={onClose}\n                  className=\"text-gray-500 hover:text-gray-800 transition-colors\"\n                  title=\"关闭\"\n                >\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                    <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n\n            {/* Message list */}\n            <div ref={messagesEndRef} className=\"flex-grow overflow-y-auto p-4 space-y-4 bg-gray-100\">\n              {messages.map((msg, index) => (\n                <div key={msg.id ?? `temp-${msg.role}-${index}`} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>\n                  <div className={`max-w-[80%] px-4 py-2 rounded-lg text-sm shadow ${msg.role === 'user' ? 'bg-gray-200 text-black' : 'bg-white text-black'}`}>\n                    {(msg.displayContent || '').split('\\n').map((line, i) => (\n                      <span key={i} className=\"block\">{line}</span>\n                    ))}\n                    {msg.role === 'assistant' && isTyping && index === messages.length - 1 && (\n                      <span className=\"inline-block w-2 h-4 bg-gray-500 ml-0.5 animate-pulse\"></span>\n                    )}\n                    {msg.role === 'assistant' && apiError && msg.content.includes('无法连接到聊天服务') && (\n                      <button onClick={handleRetry} className=\"mt-2 text-xs text-blue-600 hover:underline\">\n                        重试连接\n                      </button>\n                    )}\n                    {msg.role === 'assistant' && apiError && !msg.content.includes('无法连接到聊天服务') && msg.content.includes('出错啦') && (\n                      <span className=\"block mt-1 text-xs text-red-500\">错误: {apiError}</span>\n                    )}\n                  </div>\n                </div>\n              ))}\n              {isLoading && !isTyping && (\n                <div className=\"flex justify-start\">\n                  <div className=\"bg-white text-black px-4 py-2 rounded-lg text-sm shadow\">\n                    <span className=\"italic text-gray-500\">Lynn 正在思考...</span>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Quick messages */} \n            {messages.length <= 1 && !isLoading && ( \n              <div className=\"flex-shrink-0 p-2 border-t border-gray-200 bg-white flex flex-wrap gap-2 justify-center\">\n                {quickMessages.map((qm) => (\n                  <button\n                    key={`qm-${qm.label}-${qm.value}`}\n                    onClick={() => { setInput(qm.value); handleSend(); }} \n                    className=\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs hover:bg-gray-200 transition-colors\"\n                  >\n                    {qm.label}\n                  </button>\n                ))}\n              </div>\n            )}\n\n            {/* Input area */} \n            <div className=\"p-4 border-t border-gray-200 bg-white flex-shrink-0\">\n              <div className=\"flex items-center space-x-2\">\n                <input\n                  type=\"text\"\n                  value={input}\n                  onChange={(e) => setInput(e.target.value)}\n                  onKeyDown={handleKeyDown}\n                  placeholder=\"输入你的需求...\"\n                  className=\"flex-grow px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-gray-400 text-black text-sm\"\n                  disabled={isLoading}\n                />\n                <button\n                  onClick={handleSend}\n                  className=\"px-3 py-2 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 disabled:opacity-50 text-sm\"\n                  disabled={isLoading || input.trim() === ''}\n                >\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"> <path d=\"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 16.571V11.69l3.226-3.225a.5.5 0 01.707 0l1.293 1.293a.5.5 0 010 .707L10.07 13.69V16.57a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z\" /> </svg>\n                </button>\n              </div>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n    </div>\n  );\n};\n\nexport default Chatbot;\n","/**\n * @file useToolsQueries.ts\n * @description 自定义 Hooks，用于封装工具页面 (ToolsPage) 的数据获取和缓存逻辑。\n *              使用 TanStack Query (useQuery) 管理工具列表、分类和标签数据。\n */\nimport { useQuery } from '@tanstack/react-query';\nimport axios from 'axios';\nimport { API_BASE_URL } from '../config';\n\n// --- 类型定义 ---\n// Tool 类型 (与 ToolsPage.tsx 中保持一致或从共享类型文件导入)\nexport interface Tool {\n    id: number;\n    name: string;\n    description: string;\n    slug: string;\n    screenshot_url?: string | null;\n    source_url?: string | null;\n    category?: { id: number; name: string };\n    tags?: string[];\n}\n\n// Category 类型\nexport interface Category {\n    id: number;\n    name: string;\n}\n\n// --- 新增: ToolDetail 类型定义 ---\n// (与 ToolDetailPage.tsx 中保持一致)\nexport interface ToolDetail {\n  id: number;\n  name: string;\n  description: string;\n  slug: string;\n  content?: string | null;\n  screenshot_url?: string | null;\n  source_url?: string | null;\n  category?: { id: number; name: string };\n  tags?: string[];\n  is_free?: boolean;\n  features?: string[];\n  use_cases?: string[];\n  pros?: string[];\n  cons?: string[];\n  pricing_info?: any; // Adjust type if needed\n  installation_steps?: string | null;\n  created_at: string;\n  updated_at: string;\n}\n\n// --- API 获取函数 ---\n\n// 获取分类列表\nconst fetchCategories = async (): Promise<Category[]> => {\n    console.log(\"[fetchCategories] Fetching categories...\");\n    const response = await axios.get<Category[]>(`${API_BASE_URL}/api/categories/`);\n    // 添加数据校验\n    if (!Array.isArray(response.data)) {\n        console.error(\"Invalid categories data format:\", response.data);\n        throw new Error(\"无法获取分类列表，数据格式错误。\");\n    }\n    return response.data;\n};\n\n// 获取所有标签\nconst fetchTags = async (): Promise<string[]> => {\n    console.log(\"[fetchTags] Fetching all tags...\");\n    const response = await axios.get<{ tags: string[] }>(`${API_BASE_URL}/api/tools/tags`);\n     // 添加数据校验\n    if (!response.data || !Array.isArray(response.data.tags)) {\n        console.error(\"Invalid tags data format:\", response.data);\n        throw new Error(\"无法获取标签列表，数据格式错误。\");\n    }\n    return response.data.tags;\n};\n\n// 获取工具列表（支持筛选）\nconst fetchTools = async (categoryId: number | 'all', tag: string | 'all'): Promise<Tool[]> => {\n    console.log(`[fetchTools] Fetching tools with category: ${categoryId}, tag: ${tag}...`);\n    let toolsUrl = `${API_BASE_URL}/api/tools/?`;\n\n    // --- 优先使用标签筛选 ---\n    if (tag !== 'all') {\n        toolsUrl += `tag=${encodeURIComponent(tag)}&`;\n    } else if (categoryId !== 'all') { // 否则使用分类筛选\n        toolsUrl += `category_id=${categoryId}&`;\n    }\n    // --- 结束修改 ---\n\n    // 按创建时间降序排序\n    toolsUrl += `sort_by=created_at&sort_order=desc`;\n\n    // 添加 Cache-Control headers 可能不是最佳实践，因为 TanStack Query 会处理缓存\n    // 如果确实需要绕过浏览器缓存，可以添加时间戳\n    // toolsUrl += `&_=${new Date().getTime()}`;\n\n    const response = await axios.get<{ tools: Tool[]; total: number }>(toolsUrl);\n    // 添加数据校验\n    if (!response.data || !Array.isArray(response.data.tools)) {\n        console.error(\"Invalid tools data format:\", response.data);\n        throw new Error(\"无法获取工具列表，数据格式错误。\");\n    }\n    return response.data.tools;\n};\n\n// --- 新增: API 获取函数 for Tool Detail ---\nconst fetchToolDetailBySlug = async (slug: string): Promise<ToolDetail> => {\n    // 添加 slug 检查，虽然 useQuery 的 enabled 也会处理\n    if (!slug) {\n        throw new Error(\"Tool slug is required.\");\n    }\n    console.log(`[fetchToolDetailBySlug] Fetching tool detail for slug: ${slug}...`);\n    const response = await axios.get<ToolDetail>(`${API_BASE_URL}/api/tools/slug/${slug}`);\n    // 基本的数据校验\n    if (!response.data || typeof response.data.id !== 'number') {\n        console.error(\"Invalid tool detail data format:\", response.data);\n        // 考虑根据状态码抛出特定错误，例如 404\n        throw new Error(\"无法获取工具详情，数据格式错误。\");\n    }\n    return response.data;\n};\n\n// --- 自定义 Hooks ---\n\n/**\n * Hook: useCategories\n * 获取并缓存分类列表。\n * 数据被视为长时间有效 (staleTime: Infinity)，因为分类不常变动。\n */\nexport const useCategories = () => {\n    return useQuery<Category[], Error>({\n        queryKey: ['categories'], // 缓存键\n        queryFn: fetchCategories, // 获取数据的函数\n        staleTime: Infinity, // 数据永不过期，除非手动 invalidate\n        gcTime: Infinity, // 缓存永不回收，除非手动 invalidate\n        refetchOnWindowFocus: false, // 窗口聚焦时不重新获取\n    });\n};\n\n/**\n * Hook: useTags\n * 获取并缓存所有可用标签的列表。\n * 数据被视为长时间有效 (staleTime: 1 小时)。\n */\nexport const useTags = () => {\n    return useQuery<string[], Error>({\n        queryKey: ['tags'],\n        queryFn: fetchTags,\n        staleTime: 1000 * 60 * 60, // 1 小时内数据新鲜\n        gcTime: 1000 * 60 * 60 * 2, // 2 小时不活跃后回收\n        refetchOnWindowFocus: false,\n    });\n};\n\n/**\n * Hook: useTools\n * 获取并缓存工具列表，根据选定的分类和标签进行筛选。\n * 当 categoryId 或 tag 变化时，会自动重新获取数据。\n * \n * @param {number | 'all'} categoryId 选中的分类 ID 或 'all'\n * @param {string | 'all'} tag 选中的标签或 'all'\n */\nexport const useTools = (categoryId: number | 'all', tag: string | 'all') => {\n    return useQuery<Tool[], Error>({\n        // queryKey 包含筛选条件，当它们变化时，查询会自动更新\n        queryKey: ['tools', { category: categoryId, tag: tag }], \n        queryFn: () => fetchTools(categoryId, tag),\n        // 可以设置 staleTime 和 gcTime，例如 5 分钟\n        staleTime: 1000 * 60 * 5, // 5 分钟\n        gcTime: 1000 * 60 * 10, // 10 分钟\n        refetchOnWindowFocus: true, // 窗口聚焦时重新获取（可选）\n    });\n};\n\n// --- 新增: 自定义 Hook for Tool Detail ---\n\n/**\n * Hook: useToolDetail\n * 获取并缓存单个工具的详细信息。\n * 当 slug 变化时，会自动重新获取数据。\n * \n * @param {string | undefined} slug 工具的 slug\n */\nexport const useToolDetail = (slug: string | undefined) => {\n    return useQuery<ToolDetail, Error>({\n        // queryKey 包含 slug，确保每个工具详情都有独立的缓存\n        queryKey: ['toolDetail', slug], \n        // 只有当 slug 存在时才执行查询\n        queryFn: () => fetchToolDetailBySlug(slug!), // 使用 non-null assertion 因为 enabled 确保了 slug 存在\n        enabled: !!slug, // 关键：只有当 slug 有效（非 null/undefined/空字符串）时才触发查询\n        staleTime: 1000 * 60 * 10, // 10 分钟内数据新鲜\n        gcTime: 1000 * 60 * 30, // 30 分钟不活跃后回收\n        refetchOnWindowFocus: false, // 窗口聚焦时不重新获取详情（通常不需要）\n    });\n}; ","import React from 'react';\n\nconst ToolDetailSkeleton: React.FC = () => {\n  const skeletonStyle: React.CSSProperties = {\n    width: '100%',\n    minHeight: '100vh',\n    backgroundColor: 'var(--bg-base-color)', \n    backgroundImage: 'var(--bg-gradient)',\n    padding: '20px', \n    boxSizing: 'border-box',\n    color: 'white',\n  };\n\n  const placeholderBaseStyle: React.CSSProperties = {\n    backgroundColor: 'rgba(255, 255, 255, 0.1)',\n    borderRadius: '4px',\n    marginBottom: '12px',\n    animation: 'pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite',\n  };\n  \n  const keyframesStyle = `\n    @keyframes pulse {\n      0%, 100% {\n        opacity: 0.6;\n      }\n      50% {\n        opacity: 0.3;\n      }\n    }\n  `;\n\n  return (\n    <>\n      <style>{keyframesStyle}</style>\n      <div style={skeletonStyle} aria-busy=\"true\" aria-live=\"polite\" role=\"status\" aria-label=\"正在加载工具详情...\">\n        {/* 模拟工具名称 */}\n        <div style={{ ...placeholderBaseStyle, height: '36px', width: '60%', marginBottom: '24px' }}></div>\n        \n        {/* 模拟工具分类和标签 */}\n        <div style={{ display: 'flex', gap: '10px', marginBottom: '24px' }}>\n          <div style={{ ...placeholderBaseStyle, height: '24px', width: '100px', borderRadius: '12px' }}></div>\n          <div style={{ ...placeholderBaseStyle, height: '24px', width: '80px', borderRadius: '12px' }}></div>\n        </div>\n        \n        {/* 模拟工具描述 */}\n        <div style={{ ...placeholderBaseStyle, height: '18px', width: '100%', marginBottom: '8px' }}></div>\n        <div style={{ ...placeholderBaseStyle, height: '18px', width: '90%', marginBottom: '24px' }}></div>\n\n        {/* 模拟工具主操作区域/iframe占位 */}\n        <div style={{ ...placeholderBaseStyle, height: '300px', width: '100%', marginBottom: '24px' }}></div>\n\n        {/* 模拟其他信息或按钮 */}\n        <div style={{ ...placeholderBaseStyle, height: '40px', width: '150px' }}></div>\n      </div>\n    </>\n  );\n};\n\nexport default ToolDetailSkeleton; ","/**\n * \n * 注意: 导航栏组件(Navbar和SideNavbar)已移至全局布局，不需要在页面组件中引入\n * @file ToolDetailPage.tsx\n * @description 显示单个工具的详细信息页面。\n *              使用 TanStack Query (通过自定义 Hook: useToolDetail) \n *              进行数据获取和缓存管理。\n */\nimport React, { useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\n// 已移除: import Navbar from \"../components/Navbar\";\nimport SideNavbar from '../components/SideNavbar';\nimport Chatbot from '../components/Chatbot';\nimport { API_BASE_URL } from '../config';\nimport { useSidebar } from '../contexts/SidebarContext';\nimport { useToolDetail, ToolDetail } from '../hooks/useToolsQueries';\nimport { getCosImageUrl } from '../utils/imageUrl';\nimport ToolDetailSkeleton from '../components/Skeletons/ToolDetailSkeleton';\nimport { motion } from 'framer-motion';\n\nconst ToolDetailPage: React.FC = () => {\n    const { slug } = useParams<{ slug: string }>();\n    const { isSidebarOpen } = useSidebar();\n    const [isChatOpen, setIsChatOpen] = useState(false);\n\n    const { data: tool, isLoading, error: queryError } = useToolDetail(slug);\n    \n    const effectiveError = queryError ? queryError.message : null;\n\n    // Helper to render markdown-like text (newlines to <br>, simple lists)\n    const renderFormattedText = (text: string | null | undefined) => {\n        if (!text) return null;\n        // 将换行符替换为 <br>\n        const lines = text.split('\\n');\n        return (\n            <ul className=\"list-disc list-inside space-y-1 text-sm text-gray-300\">\n                {lines.map((line, index) => (\n                    <li key={index}>{line.trim()}</li>\n                ))}\n            </ul>\n        );\n    };\n\n    // Helper to render markdown-like text (newlines to <br>, simple lists)\n    const renderFormattedTextSmall = (text: string | null | undefined) => {\n        if (!text) return null;\n        // 将换行符替换为 <br>\n        const lines = text.split('\\n');\n        return (\n            <ul className=\"list-disc list-inside space-y-1 text-xs text-gray-300\">\n                {lines.map((line, index) => (\n                    <li key={index}>{line.trim()}</li>\n                ))}\n            </ul>\n        );\n    };\n\n    if (isLoading) {\n        return <ToolDetailSkeleton />;\n    }\n\n    if (effectiveError && !tool) {\n        return (\n          <div \n            className=\"flex flex-col items-center justify-center min-h-screen text-white p-4\"\n            style={{backgroundColor: 'var(--bg-base-color)', backgroundImage: 'var(--bg-gradient)'}}\n          >\n            <h2 className=\"text-2xl font-semibold mb-4\">无法加载工具详情</h2>\n            <p className=\"text-gray-400 mb-8\">{effectiveError || '工具可能已被删除或链接无效。'}</p>\n            <Link to=\"/tools\" className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-white transition-colors\">\n              返回所有工具\n            </Link>\n          </div>\n        );\n    }\n    \n    if (!tool) {\n        return (\n            <div \n              className=\"flex flex-col items-center justify-center min-h-screen text-white p-4\"\n              style={{backgroundColor: 'var(--bg-base-color)', backgroundImage: 'var(--bg-gradient)'}}\n            >\n              <h2 className=\"text-2xl font-semibold mb-4\">未找到工具</h2>\n              <p className=\"text-gray-400 mb-8\">无法找到您请求的工具信息。</p>\n              <Link to=\"/tools\" className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-white transition-colors\">\n                返回所有工具\n              </Link>\n            </div>\n          );\n    }\n\n    return (\n        <div className=\"flex flex-col min-h-screen text-white bg-transparent\">\n            <div className=\"flex flex-1 overflow-hidden\">\n              <main className={`flex-1 transition-all duration-300 ease-in-out overflow-y-auto ${isSidebarOpen ? 'lg:ml-56' : 'ml-0'} px-6 md:px-8 pb-24 pt-6`}>\n                <motion.div\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    transition={{ duration: 0.4, delay: 0.1 }}\n                    className=\"max-w-6xl mx-auto\"\n                >\n                        <div className=\"mb-4 flex flex-wrap items-center gap-x-3 gap-y-2\">\n                           {tool.category && (\n                                <span className=\"inline-block bg-indigo-500/30 text-indigo-200 px-3 py-1 rounded-full text-sm font-medium\">\n                                    {tool.category.name}\n                                </span>\n                            )}\n                            {tool.tags && tool.tags.length > 0 && (\n                                <div className=\"flex flex-wrap gap-2\">\n                                    {tool.tags.map((tag) => (\n                                        <span key={tag} className=\"bg-gray-600/50 text-gray-300 text-xs font-medium px-2.5 py-0.5 rounded-full\">\n                                            {tag}\n                                        </span>\n                                    ))}\n                                </div>\n                            )}\n                        </div>\n                        \n                        <header className=\"mb-8 pb-5 border-b border-gray-700/40\">\n                            <h1 className=\"text-4xl md:text-5xl font-bold text-white mb-4\">{tool.name}</h1>\n                            <div className=\"flex flex-wrap items-center gap-x-5 gap-y-2 text-sm text-gray-400\">\n                                {tool.source_url && (\n                                    <a href={tool.source_url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"hover:text-indigo-300 transition-colors flex items-center\">\n                                        访问官网 \n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-3.5 w-3.5 ml-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}> <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" /> </svg>\n                                    </a>\n                                )}\n                                {tool.is_free && (\n                                    <span className=\"text-green-400 font-medium\">免费</span>\n                                )}\n                                <span>最后更新: {new Date(tool.updated_at).toLocaleDateString('zh-CN', { year:'numeric', month:'numeric', day:'numeric' })}</span>\n                             </div>\n                        </header>\n                        \n                        <div className=\"md:flex md:space-x-6 mb-6\">\n                            <div className=\"md:w-1/3 mb-6 md:mb-0\">\n                                <div className=\"bg-gray-800/50 backdrop-blur-sm rounded-lg shadow-lg p-6 md:p-8 h-full\">\n                                    <p className=\"text-base md:text-lg leading-relaxed text-gray-200 mb-8\">{tool.description}</p>\n                            {tool.screenshot_url && (\n                                <img \n                                            src={getCosImageUrl(tool.screenshot_url) || undefined}\n                                    alt={`${tool.name} screenshot`} \n                                            className=\"rounded-lg shadow-lg w-full max-h-[600px] object-contain border border-gray-700/50\"\n                                />\n                            )}\n                                </div>\n                            </div>\n\n                        {(tool.features || tool.use_cases || tool.pros || tool.cons || tool.pricing_info) && (\n                                <div className=\"md:w-2/3\">\n                                    <section className=\"bg-gray-800/50 backdrop-blur-sm rounded-lg shadow-lg p-6 md:p-8 h-full\">\n                                        <h2 className=\"text-xl md:text-2xl font-bold text-blue-300 pb-3 mb-5 border-b border-gray-700/40\">详细信息</h2>\n                                        <div className=\"mt-5 grid grid-cols-1 md:grid-cols-2 gap-x-10 gap-y-8\">\n                                    {tool.features && tool.features.length > 0 && (\n                                        <div>\n                                                    <h3 className=\"text-lg font-semibold mb-2 text-gray-200\">主要功能</h3>\n                                                    {renderFormattedTextSmall(tool.features.join('\\n'))}\n                                        </div>\n                                    )}\n                                    {tool.use_cases && tool.use_cases.length > 0 && (\n                                        <div>\n                                                    <h3 className=\"text-lg font-semibold mb-2 text-gray-200\">使用场景</h3>\n                                                    {renderFormattedTextSmall(tool.use_cases.join('\\n'))}\n                                        </div>\n                                    )}\n                                    {tool.pros && tool.pros.length > 0 && (\n                                        <div>\n                                                    <h3 className=\"text-lg font-semibold mb-2 text-gray-200\">优点</h3>\n                                                    {renderFormattedTextSmall(tool.pros.join('\\n'))}\n                                        </div>\n                                    )}\n                                    {tool.cons && tool.cons.length > 0 && (\n                                        <div>\n                                                    <h3 className=\"text-lg font-semibold mb-2 text-gray-200\">缺点</h3>\n                                                    {renderFormattedTextSmall(tool.cons.join('\\n'))}\n                                        </div>\n                                    )}\n                                        </div>\n                                    </section>\n                                </div>\n                            )}\n                        </div>\n\n                        {tool.content && (\n                            <section className=\"bg-gray-800/50 backdrop-blur-sm rounded-lg shadow-lg p-6 md:p-8 mb-6\">\n                                <h2 className=\"text-2xl md:text-3xl font-bold text-blue-300 pb-4 mb-6 border-b border-gray-700/40\">详细介绍</h2>\n                                <div \n                                    className=\"prose prose-lg prose-invert max-w-none ck-content-output text-gray-300 prose-headings:font-bold prose-headings:text-white prose-a:text-blue-400 prose-strong:text-white mt-6\"\n                                    dangerouslySetInnerHTML={{ __html: tool.content }}\n                                />\n                            </section>\n                        )}\n\n                        {tool.installation_steps && (\n                            <section className=\"bg-gray-800/50 backdrop-blur-sm rounded-lg shadow-lg p-6 md:p-8 mb-6\">\n                                <h2 className=\"text-2xl md:text-3xl font-bold text-blue-300 pb-4 mb-6 border-b border-gray-700/40\">安装流程</h2>\n                                <div className=\"prose prose-invert max-w-none text-gray-300 mt-6\">\n                                    {renderFormattedText(tool.installation_steps)}\n                                </div>\n                            </section>\n                        )}\n                </motion.div>\n\n                <div className=\"fixed bottom-6 right-6 z-50\">\n            <button\n                        onClick={() => setIsChatOpen(!isChatOpen)} \n                        className=\"bg-white/20 backdrop-blur-md text-white rounded-full p-3 shadow-lg z-50 transition-colors hover:bg-white/30\"\n                        title=\"AI助手\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z\" />\n              </svg>\n            </button>\n                    {isChatOpen && tool && (\n                        <Chatbot \n                            isOpen={isChatOpen}\n                            toolName={tool.name} \n                            toolDescription={tool.description} \n                            onClose={() => setIsChatOpen(false)} \n                        />\n                    )}\n                 </div>\n              </main>\n            </div>\n        </div>\n    );\n};\n\nexport default ToolDetailPage;\n"],"names":["_ref","isOpen","onClose","inlineMode","token","user","useAuth","input","setInput","useState","isSmallScreen","setIsSmallScreen","window","innerWidth","messages","setMessages","currentConversationId","setCurrentConversationId","isLoading","apiError","isTyping","messagesEndRef","handleSend","sendChatMessage","loadConversation","createNewChat","handleRetry","retryApiConnection","useChatLogic","closeRef","useRef","useEffect","current","prev","filter","msg","content","includes","role","displayContent","fetch","API_BASE_URL","method","headers","body","JSON","stringify","message","conversation_id","then","response","ok","Error","_response$body","reader","getReader","cancel","catch","error","console","async","trim","currentInput","newConvId","handleKeyDown","e","key","shiftKey","preventDefault","quickMessages","label","value","_jsx","className","children","motion","div","initial","opacity","scale","animate","transition","duration","_jsxs","title","onClick","xmlns","viewBox","fill","fillRule","d","clipRule","ref","map","index","_msg$id","split","line","i","length","id","qm","type","onChange","target","onKeyDown","placeholder","disabled","y","style","height","_msg$id2","fetchCategories","log","axios","get","Array","isArray","data","fetchTags","tags","useCategories","useQuery","queryKey","queryFn","staleTime","Infinity","gcTime","refetchOnWindowFocus","useTags","useTools","categoryId","tag","category","toolsUrl","encodeURIComponent","tools","fetchTools","useToolDetail","slug","fetchToolDetailBySlug","enabled","ToolDetailSkeleton","placeholderBaseStyle","backgroundColor","borderRadius","marginBottom","animation","_Fragment","width","minHeight","backgroundImage","padding","boxSizing","color","display","gap","ToolDetailPage","useParams","isSidebarOpen","useSidebar","isChatOpen","setIsChatOpen","tool","queryError","effectiveError","renderFormattedTextSmall","text","lines","Link","to","delay","name","source_url","href","rel","stroke","strokeWidth","strokeLinecap","strokeLinejoin","is_free","Date","updated_at","toLocaleDateString","year","month","day","description","screenshot_url","src","getCosImageUrl","undefined","alt","features","use_cases","pros","cons","pricing_info","join","dangerouslySetInnerHTML","__html","installation_steps","renderFormattedText","Chatbot","toolName","toolDescription"],"sourceRoot":""}