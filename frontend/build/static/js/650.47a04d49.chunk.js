"use strict";(self.webpackChunkai_tools_website_frontend=self.webpackChunkai_tools_website_frontend||[]).push([[650],{119:()=>{},7650:(e,t,o)=>{o.r(t),o.d(t,{default:()=>j});var r=o(5043),i=o(3216),s=o(5475),l=o(4558),a=o(6625),n=o(6636),c=o(6213),d=o(2104),u=(o(119),o(9774)),m=o(2115),h=(o(2342),o(6376)),g=o(4383),x=o(3248),p=o(104),v=o(1502),f=o(579);const b=()=>{const e={backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"4px",marginBottom:"12px",animation:"pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite"};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("style",{children:"\n    @keyframes pulse {\n      0%, 100% {\n        opacity: 0.6;\n      }\n      50% {\n        opacity: 0.3;\n      }\n    }\n  "}),(0,f.jsxs)("div",{style:{width:"100%",minHeight:"100vh",backgroundColor:"var(--bg-base-color)",backgroundImage:"var(--bg-gradient)",padding:"20px",boxSizing:"border-box",color:"white"},"aria-busy":"true","aria-live":"polite",role:"status","aria-label":"\u6b63\u5728\u52a0\u8f7d\u6587\u7ae0\u8be6\u60c5...",children:[(0,f.jsx)("div",{style:{...e,height:"40px",width:"80%",marginBottom:"28px"}}),(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"28px"},children:[(0,f.jsx)("div",{style:{...e,width:"48px",height:"48px",borderRadius:"50%",marginRight:"16px"}}),(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{style:{...e,height:"18px",width:"150px",marginBottom:"8px"}}),(0,f.jsx)("div",{style:{...e,height:"14px",width:"100px"}})]})]}),(0,f.jsx)("div",{style:{...e,height:"22px",width:"100%",marginBottom:"16px"}}),(0,f.jsx)("div",{style:{...e,height:"22px",width:"100%",marginBottom:"16px"}}),(0,f.jsx)("div",{style:{...e,height:"22px",width:"90%",marginBottom:"16px"}}),(0,f.jsx)("div",{style:{...e,height:"22px",width:"95%",marginBottom:"30px"}}),(0,f.jsx)("div",{style:{...e,height:"180px",width:"100%",marginBottom:"30px"}}),(0,f.jsx)("div",{style:{...e,height:"22px",width:"100%",marginBottom:"16px"}}),(0,f.jsx)("div",{style:{...e,height:"22px",width:"85%",marginBottom:"16px"}})]})]})};var y=o(8027),w=o(953);const j=()=>{var e,t,o,j,k,N,_,A,S,$,C,E;(0,x.jE)();const{slug:R}=(0,i.g)(),{isSidebarOpen:I}=(0,n.c)(),[T,L]=(0,r.useState)([]),{token:B,user:M}=(0,a.A)(),U=(0,i.Zp)(),P=(0,i.zy)(),F=(0,r.useRef)(null),[q,z]=(0,r.useState)(0),[O,H]=(0,r.useState)(-1),[W,J]=(0,r.useState)(0),[D,V]=(0,r.useState)(-1),[Z,X]=(0,r.useState)(!1),[Y,G]=(0,r.useState)(""),[K,Q]=(0,r.useState)(null),[ee,te]=(0,r.useState)(!1),[oe,re]=(0,r.useState)(0),[ie,se]=(0,r.useState)(!1),le=(0,r.useRef)(null),[ae,ne]=(0,r.useState)([]),[ce,de]=(0,r.useState)(""),ue=(0,r.useRef)(null),[me,he]=(0,r.useState)(!1),[ge,xe]=(0,r.useState)(!1),[pe,ve]=(0,r.useState)({x:0,y:0}),{data:fe,isLoading:be,isError:ye,error:we}=(0,p._S)(R,B),je=(0,p.xf)(R),ke=(0,p.ui)(R),Ne=ye?"RateLimitExceeded"===(null===we||void 0===we?void 0:we.name)?"\u8bf7\u6c42\u9891\u7387\u8fc7\u9ad8\uff0c\u8bf7\u7b49\u5f85\u7247\u523b\u540e\u5237\u65b0\u9875\u9762\u3002":(null===we||void 0===we?void 0:we.message)||"\u83b7\u53d6\u6587\u7ae0\u8be6\u60c5\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002":null;(0,r.useEffect)((()=>{if(null!==fe&&void 0!==fe&&fe.content){const e=fe.content.match(/!\[(.*?)\]\((https?:\/\/[^)]+)\)/g);e&&e.forEach(((e,t)=>{console.log(`\u56fe\u7247${t+1}:`,e)}));$e(fe.content)}}),[null===fe||void 0===fe?void 0:fe.content]),(0,r.useEffect)((()=>{re(fe&&fe.share_count||0)}),[fe]),(0,r.useEffect)((()=>{if(!R||!me)return;let e=!1;console.log("\u521d\u59cb\u5316Socket.IO\u8fde\u63a5...");const t="http://localhost:5001";console.log("Socket.IO\u670d\u52a1\u5668\u5730\u5740:",t),le.current=(0,d.Ay)(t,{path:"/socket.io",transports:["websocket"],reconnectionAttempts:5,reconnectionDelay:1e3,timeout:1e4});const o=le.current;return o.on("connect",(()=>{console.log("Socket\u8fde\u63a5\u6210\u529f:",o.id),xe(!0),e=!1;const t=(null===M||void 0===M?void 0:M.nickname)||(null===M||void 0===M?void 0:M.email)||"Anonymous";o.emit("join",{room:R,username:t}),console.log(`\u52a0\u5165\u804a\u5929\u5ba4: ${R} \u7528\u6237\u540d: ${t}`)})),o.on("status",(e=>{console.log("\u670d\u52a1\u5668\u72b6\u6001\u4fe1\u606f:",e.msg),ne((t=>[...t,{username:"System",message:e.msg,room:R}]))})),o.on("receive_message",(e=>{e.room===R&&ne((t=>[...t,e]))})),o.on("connect_error",(t=>{e||(console.warn("\u804a\u5929\u670d\u52a1\u8fde\u63a5\u9519\u8bef\uff0c\u5c06\u81ea\u52a8\u91cd\u8bd5:",t.message),e=!0),xe(!1)})),o.on("disconnect",(e=>{console.log("Socket\u65ad\u5f00\u8fde\u63a5:",e),xe(!1)})),()=>{if(o&&o.connected){console.log(`\u79bb\u5f00\u804a\u5929\u5ba4: ${R}`);const e=(null===M||void 0===M?void 0:M.nickname)||(null===M||void 0===M?void 0:M.email)||"Anonymous";o.emit("leave",{room:R,username:e}),console.log("\u65ad\u5f00Socket\u8fde\u63a5..."),o.disconnect(),le.current=null,xe(!1)}}}),[R,M,me]),(0,r.useEffect)((()=>{ue.current&&(ue.current.scrollTop=ue.current.scrollHeight)}),[ae]),(0,r.useEffect)((()=>{(async()=>{try{const e=await c.A.get(`${l.JR}/api/tools?limit=6&sort_by=popularity&sort_order=desc`);L(e.data.tools||[])}catch(e){console.error("\u52a0\u8f7d\u70ed\u95e8\u5de5\u5177\u5931\u8d25:",e)}})()}),[]),(0,r.useEffect)((()=>{if(null!==fe&&void 0!==fe&&fe.series_articles&&fe.series_articles.length>0){const e=fe.series_articles.length,t=fe.series_articles.findIndex((e=>e.is_current));if(J(e),V(t),-1!==t){const o=Math.max(0,t-5),r=Math.min(e-1,t+5);z(o),H(r)}else z(0),H(Math.min(e-1,10))}else z(0),H(-1),J(0),V(-1)}),[null===fe||void 0===fe?void 0:fe.series_articles]);(0,r.useEffect)((()=>{if(null!==fe&&void 0!==fe&&fe.content&&F.current){(()=>{if(!F.current)return;F.current.querySelectorAll("img").forEach((e=>{const t=e.getAttribute("src"),o=e.getAttribute("data-original-src");if(o){console.log(`[ArticlePage useEffect img dataOriginalSrc] URL before fixImageUrl: ${o}`);const t=(0,w.o6)(o);e.src!==t&&(console.log(`(ArticlePage useEffect) Correcting src for ${o.substring(0,50)}... to ${t.substring(0,50)}...`),e.src=t,e.onerror=()=>((0,w.Mq)(o,e),!0))}else t&&t.startsWith("http")&&(console.log(`(ArticlePage useEffect) Initial processing for ${t.substring(0,50)}...`),e.setAttribute("data-original-src",t),console.log(`[ArticlePage useEffect img currentSrc] URL before fixImageUrl: ${t}`),e.src=(0,w.o6)(t),e.onerror=()=>((0,w.Mq)(t,e),!0));""===e.className&&(e.className="markdown-image"),""===e.style.maxWidth&&(e.style.maxWidth="100%"),""===e.style.margin&&(e.style.margin="10px auto"),""===e.style.display&&(e.style.display="block")}));F.current.querySelectorAll("*:not(script):not(style)").forEach((e=>{e.childNodes&&e.childNodes.length>0&&Array.from(e.childNodes).forEach((e=>{if(e.nodeType===Node.TEXT_NODE&&e.textContent){const o=e.textContent,r=/!\[(.*?)\]\((https?:\/\/[^)]+)\)/g;let i,s=0;const l=document.createDocumentFragment();let a=!1;for(;null!==(i=r.exec(o));){a=!0;const e=i.index,t=e+i[0].length;e>s&&l.appendChild(document.createTextNode(o.substring(s,e)));const r=document.createElement("img"),n=i[2];console.log(`(ArticlePage useEffect) Processing Markdown image from text node: ${n.substring(0,50)}...`),r.setAttribute("data-original-src",n),console.log(`[ArticlePage useEffect markdown] URL before fixImageUrl: ${n}`),r.src=(0,w.o6)(n),r.alt=i[1],r.className="markdown-image",r.style.maxWidth="100%",r.style.margin="10px auto",r.style.display="block",r.onerror=()=>((0,w.Mq)(n,r),!0),l.appendChild(r),s=t}var t;if(a)s<o.length&&l.appendChild(document.createTextNode(o.substring(s))),null===(t=e.parentNode)||void 0===t||t.replaceChild(l,e)}}))}))})()}}),[null===fe||void 0===fe?void 0:fe.content,w.o6]),(0,r.useEffect)((()=>{if(F.current&&null!==fe&&void 0!==fe&&fe.content){F.current.querySelectorAll("iframe").forEach((e=>{var t;if(null!==(t=e.parentElement)&&void 0!==t&&t.classList.contains("video-processed"))return;const o=e.parentElement;if(!o)return;o instanceof HTMLElement&&(o.style.cssText="",o.className="");const r=document.createElement("div");if(r.className="video-container video-processed",r.style.cssText="width: 100%; max-width: 800px; margin: 2em auto; position: relative; aspect-ratio: 16/9; background: #000; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); overflow: hidden;",e instanceof HTMLIFrameElement&&(e.style.cssText="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; border-radius: 12px;"),o.parentElement){const t=document.createElement("div");t.className="not-prose",t.style.cssText="all: initial; display: block; text-align: center; width: 100%; margin: 2em 0; font-family: inherit; color: inherit;",r.appendChild(e.cloneNode(!0)),t.appendChild(r),o.parentElement.replaceChild(t,o)}}))}}),[null===fe||void 0===fe?void 0:fe.content]);const _e=!!M,Ae=null===fe||void 0===fe?void 0:fe.author,Se=_e&&!!Ae&&M.id===Ae.id;if(be)return(0,f.jsx)(b,{});if(ye||!fe)return(0,f.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen text-white p-4",style:{backgroundColor:"var(--bg-base-color)",backgroundImage:"var(--bg-gradient)"},children:[(0,f.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"\u65e0\u6cd5\u52a0\u8f7d\u6587\u7ae0"}),(0,f.jsx)("p",{className:"text-gray-400 mb-8",children:Ne||"\u6587\u7ae0\u53ef\u80fd\u5df2\u88ab\u5220\u9664\u6216\u94fe\u63a5\u65e0\u6548\u3002"}),(0,f.jsx)("button",{onClick:()=>U(-1),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-white transition-colors",children:"\u8fd4\u56de"})]});const $e=e=>{if(!e)return"";let t=e.replace(/!\[(.*?)\]\((https?:\/\/[^)]+)\)/g,((e,t,o)=>{if(!o)return e;console.log(`[ArticlePage processContentForVideos] URL before fixImageUrl: ${o}`);return`<img src="${(0,w.o6)(o)}" data-original-src="${o}" alt="${t||"\u56fe\u7247"}" class="mx-auto my-4 max-w-full rounded-lg shadow-lg markdown-image" style="display: block; max-width: 100%; margin: 10px auto;" onerror="if(this.getAttribute('data-original-src')){window.handleImageLoadError?.(this.getAttribute('data-original-src'),this)}" />`}));return t=t.replace(/\[\u89c6\u9891\u5360\u4f4d\u7b26:\s*(https?:\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/watch\?v=)([a-zA-Z0-9_-]+))\]/g,((e,t,o)=>{if(!t||!o)return e;return`\n        <figure class="not-prose my-8">\n          <div class="aspect-w-16 aspect-h-9 relative rounded-lg overflow-hidden">\n            <iframe src="${`https://www.youtube.com/embed/${o}`}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen class="absolute inset-0 w-full h-full rounded-lg shadow-xl"></iframe>\n          </div>\n          <figcaption class="text-center text-sm text-gray-500 mt-2">YouTube \u89c6\u9891</figcaption>\n        </figure>\n      `})),t=t.replace(/\[\u89c6\u9891\u5360\u4f4d\u7b26:\s*(https?:\/\/(?:www\.)?bilibili\.com\/video\/([A-Za-z0-9]+)(?:\/)?.*?)\]/g,((e,t,o)=>{if(!t||!o)return e;return`\n        <figure class="not-prose my-8">\n          <div class="aspect-w-16 aspect-h-9 relative rounded-lg overflow-hidden">\n            <iframe src="${`https://player.bilibili.com/player.html?bvid=${o}&page=1&high_quality=1&danmaku=0`}" frameborder="0" scrolling="no" allowfullscreen class="absolute inset-0 w-full h-full rounded-lg shadow-xl"></iframe>\n          </div>\n          <figcaption class="text-center text-sm text-gray-500 mt-2">Bilibili \u89c6\u9891</figcaption>\n        </figure>\n      `})),t};return(0,f.jsxs)(g.P.div,{className:"article-detail-container bg-transparent text-white min-h-screen",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:.1},children:[(0,f.jsx)("main",{className:"flex-1 transition-all duration-300 ease-in-out overflow-y-auto px-4 sm:px-6 lg:px-8 py-8 w-full",children:(0,f.jsxs)("div",{className:"max-w-4xl mx-auto",children:[fe.cover_image&&(0,f.jsx)("div",{className:"mb-8 aspect-video overflow-hidden rounded-lg shadow-2xl bg-gray-800",children:(0,f.jsx)("img",{src:(e=>{if(e){if(e.startsWith("http")){const t="/api/upload/proxy/image",o=new URLSearchParams;return o.append("url",encodeURIComponent(e)),`${t}?${o.toString()}`}return e}})(fe.cover_image),alt:fe.title,className:"w-full h-full object-cover",onError:e=>e.currentTarget.style.display="none"})}),(0,f.jsxs)("header",{className:"mb-8",children:[(0,f.jsx)("div",{className:"mb-4",children:(0,f.jsxs)("h1",{className:"text-3xl md:text-4xl font-bold text-white break-words",children:[" ",fe.title]})}),(0,f.jsxs)("div",{className:"flex flex-wrap justify-between items-center text-sm text-gray-400 gap-x-4 gap-y-2",children:[(0,f.jsxs)("div",{className:"flex items-center flex-wrap gap-x-3 gap-y-1",children:[" ",(0,f.jsxs)("div",{className:"flex items-center relative",onMouseEnter:()=>{var e;null!==fe&&void 0!==fe&&fe.author&&(Q({nickname:fe.author.nickname||(null===(e=fe.author.email)||void 0===e?void 0:e.split("@")[0])||"\u533f\u540d\u7528\u6237",bio:fe.author.bio,tags:fe.author.tags,avatar:fe.author.avatar}),te(!0))},onMouseLeave:()=>{te(!1)},children:[(0,f.jsx)("img",{src:(null===(e=fe.author)||void 0===e?void 0:e.avatar)||`https://via.placeholder.com/40/374151/FFFFFF?text=${((null===(t=fe.author)||void 0===t?void 0:t.nickname)||(null===(o=fe.author)||void 0===o?void 0:o.email)||"U").charAt(0).toUpperCase()}`,alt:(null===(j=fe.author)||void 0===j?void 0:j.nickname)||(null===(k=fe.author)||void 0===k?void 0:k.email)||"\u4f5c\u8005\u5934\u50cf",className:"w-6 h-6 rounded-full mr-2 object-cover bg-gray-700"}),null!==(N=fe.author)&&void 0!==N&&N.id?(0,f.jsx)(s.N_,{to:`/profile/${fe.author.id}`,className:"text-blue-400 hover:text-blue-300 hover:underline",children:fe.author.nickname||(null===(_=fe.author.email)||void 0===_?void 0:_.split("@")[0])||"\u533f\u540d\u7528\u6237"}):(0,f.jsx)("span",{className:"text-blue-400",children:(null===(A=fe.author)||void 0===A?void 0:A.nickname)||(null===(S=fe.author)||void 0===S||null===($=S.email)||void 0===$?void 0:$.split("@")[0])||"\u533f\u540d\u7528\u6237"})]}),(0,f.jsx)("span",{className:"hidden sm:inline text-gray-500",children:"\u2022"})," ",(0,f.jsx)("span",{children:(Ce=fe.created_at,new Date(Ce).toLocaleString("zh-CN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}))}),void 0!==fe.view_count&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"hidden sm:inline text-gray-500",children:"\u2022"})," ",(0,f.jsxs)("span",{children:["\u9605\u8bfb\u91cf: ",fe.view_count]})]})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-4 flex-shrink-0",children:[fe.tags&&fe.tags.length>0&&(0,f.jsx)("div",{className:"flex flex-wrap gap-2",children:fe.tags.map((e=>(0,f.jsx)("span",{className:"bg-indigo-600 text-white text-xs font-medium px-2.5 py-1 rounded-full",children:e},e)))}),Se&&(0,f.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,f.jsx)("button",{onClick:()=>U(`/edit-article/${R}`),className:"px-3 py-1 text-xs font-medium text-gray-300 hover:text-white  bg-transparent border border-gray-500/70 hover:border-white/70  rounded-full transition-all duration-200  disabled:opacity-50 disabled:cursor-not-allowed",title:"\u7f16\u8f91\u6587\u7ae0",disabled:be||ie,children:"\u7f16\u8f91"}),(0,f.jsx)("button",{onClick:async()=>{if(!fe||!B||!M||!fe.author||M.id!==fe.author.id)return;const e=fe.slug,t=fe.title;if(window.confirm(`\u60a8\u786e\u5b9a\u8981\u5220\u9664\u6587\u7ae0 "${t}" \u5417\uff1f\u6b64\u64cd\u4f5c\u65e0\u6cd5\u64a4\u9500\u3002`)){se(!0);try{console.log(`\u5f00\u59cb\u5220\u9664\u6587\u7ae0 "${t}" (slug: ${e})`),console.log("\u4f7f\u7528\u7684API\u7aef\u70b9:",`${l.JR}/api/articles/${e}`);const r=await c.A.delete(`${l.JR}/api/articles/${e}`,{headers:{Authorization:`Bearer ${B}`,"Content-Type":"application/json"}});var o;if(console.log("\u5220\u9664\u8bf7\u6c42\u54cd\u5e94:",r.status,r.data),200!==r.status&&204!==r.status)throw new Error((null===(o=r.data)||void 0===o?void 0:o.error)||"\u5220\u9664\u6587\u7ae0\u5931\u8d25\uff0c\u72b6\u6001\u7801: "+r.status);console.log("\u5220\u9664\u6210\u529f\uff0c\u5c06\u8df3\u8f6c\u5230\u6587\u7ae0\u5217\u8868\u9875\u9762"),m.oR.success("\u6587\u7ae0\u5df2\u6210\u529f\u5220\u9664\uff01"),U("/articles")}catch(a){var r,i,s;console.error(`\u5220\u9664\u6587\u7ae0 ${e} \u5931\u8d25:`,a),console.error("\u9519\u8bef\u8be6\u60c5:",(null===(r=a.response)||void 0===r?void 0:r.data)||a.message),m.oR.error(`\u5220\u9664\u5931\u8d25: ${(null===(i=a.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.error)||a.message}`)}finally{se(!1)}}},className:"px-3 py-1 text-xs font-medium text-gray-300 hover:text-white  bg-transparent border border-gray-500/70 hover:border-white/70  rounded-full transition-all duration-200  disabled:opacity-50 disabled:cursor-not-allowed",title:"\u5220\u9664\u6587\u7ae0",disabled:be||ie,children:ie&&P.pathname.includes(R||"\u4e0d\u53ef\u80fd\u5339\u914d\u5230\u7684slug")?(0,f.jsxs)("svg",{className:"animate-spin h-3.5 w-3.5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,f.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,f.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"\u5220\u9664"})]})]})]})]}),(0,f.jsx)("div",{ref:F,className:"prose prose-lg prose-invert max-w-none article-content-actual mt-8 text-gray-200  prose-headings:text-white prose-headings:font-semibold  prose-a:text-blue-400 hover:prose-a:text-blue-300  prose-strong:text-gray-100 prose-code:text-pink-400 prose-code:bg-gray-800 prose-code:p-1 prose-code:rounded prose-blockquote:border-l-blue-500 prose-blockquote:text-gray-400 prose-blockquote:not-italic prose-img:rounded-md prose-img:shadow-lg prose-img:max-w-full prose-img:mx-auto prose-table:border-gray-700 prose-th:bg-gray-800 prose-th:text-white prose-td:border-gray-700 prose-ul:list-disc prose-ul:ml-5 prose-ol:list-decimal prose-ol:ml-5 leading-relaxed",dangerouslySetInnerHTML:{__html:$e(fe.content)}}),fe.series_articles&&fe.series_articles.length>0&&(0,f.jsxs)("div",{className:"mb-8 p-4 bg-gray-800/30 border border-gray-700/50 rounded-lg backdrop-blur-sm shadow-md",children:[" ",(0,f.jsxs)("h3",{className:"text-lg font-semibold mb-3 text-orange-300",children:["\u7cfb\u5217: ",fe.series_name||"\u672a\u547d\u540d\u7cfb\u5217"]}),q>0&&(0,f.jsx)("button",{onClick:()=>{const e=Math.max(0,q-11);z(e)},className:"text-xs text-blue-400 hover:text-blue-300 mb-2 block transition-colors",children:"\u2191 \u663e\u793a\u66f4\u65e9"}),(0,f.jsxs)("ul",{className:"space-y-1.5",children:[" ",null===(C=fe.series_articles)||void 0===C?void 0:C.slice(q,O+1).map(((e,t)=>(0,f.jsx)("li",{className:"text-sm transition-colors duration-150 "+(e.is_current?"font-semibold text-white bg-white/10 rounded px-2 py-0.5":"text-gray-400 hover:text-gray-200"),children:(0,f.jsxs)(s.N_,{to:`/article/${e.slug}`,className:"hover:underline flex items-center",title:e.title,children:[(0,f.jsxs)("span",{className:"mr-2 w-4 text-right",children:[e.series_order,"."]}),(0,f.jsx)("span",{className:"truncate",children:e.title})]})},e.id)))]}),O<W-1&&(0,f.jsx)("button",{onClick:()=>{const e=Math.min(W-1,O+11);H(e)},className:"text-xs text-blue-400 hover:text-blue-300 mt-2 block transition-colors",children:"\u2193 \u663e\u793a\u540e\u7eed"})]}),(0,f.jsxs)("div",{className:"mt-12",children:[" ",(0,f.jsx)(h.A,{targetType:"article",targetId:fe.id,apiBaseUrl:l.JR,token:B,currentUser:M,isLiked:fe.is_liked||!1,isCollected:fe.is_collected||!1,likeCount:fe.like_count||0,collectCount:fe.collect_count||0,shareCount:oe,handleLikeToggle:()=>{fe&&B?je.mutate({articleId:fe.id,token:B,currentActionState:fe.is_liked||!1,currentActionId:fe.like_action_id||null}):m.oR.warn("\u8bf7\u5148\u767b\u5f55\u518d\u64cd\u4f5c")},handleCollectToggle:()=>{fe&&B?ke.mutate({articleId:fe.id,token:B,currentActionState:fe.is_collected||!1,currentActionId:fe.collect_action_id||null}):m.oR.warn("\u8bf7\u5148\u767b\u5f55\u518d\u64cd\u4f5c")},handleShareClick:()=>X(!0),isSubmittingAction:je.isPending||ke.isPending})]})]})}),Z&&(0,f.jsx)(u.A,{isOpen:Z,onClose:()=>X(!1),children:(0,f.jsx)(v.A,{isOpen:Z,onClose:()=>X(!1),onSubmit:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!fe||!B)return void m.oR.warn("\u8bf7\u5148\u767b\u5f55\u518d\u5206\u4eab");se(!0);const o={action_type:"share",target_type:"article",target_id:fe.id,content:e,images:t};try{await c.A.post(`${l.JR}/api/actions`,o,{headers:{Authorization:`Bearer ${B}`}});X(!1),m.oR.success("\u5206\u4eab\u6210\u529f")}catch(s){var r,i;const e=(null===(r=s.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.error)||"\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5";m.oR.error(`\u5206\u4eab\u5931\u8d25: ${e}`),console.error(s)}finally{se(!1)}},comment:Y,setComment:G,error:null,isLoading:ie,dynamicToShare:fe,username:(null===M||void 0===M?void 0:M.nickname)||(null===M||void 0===M||null===(E=M.email)||void 0===E?void 0:E.split("@")[0])||"\u60a8",altText:`\u5206\u4eab\u6587\u7ae0: ${null===fe||void 0===fe?void 0:fe.title}`})}),K&&(0,f.jsx)(y.A,{nickname:K.nickname,bio:K.bio,tags:K.tags,avatar:K.avatar,isVisible:ee})]});var Ce}}}]);
//# sourceMappingURL=650.47a04d49.chunk.js.map