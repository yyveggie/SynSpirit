"use strict";(self.webpackChunkai_tools_website_frontend=self.webpackChunkai_tools_website_frontend||[]).push([[844],{9844:(e,l,t)=>{t.r(l),t.d(l,{default:()=>g});var a=t(5043),s=t(3216),r=t(5475),o=t(4558),i=t(6213),c=t(6636),n=t(8261),d=t(953),m=t(579);const x=["\u5168\u90e8","AI\u53d1\u5c55","\u6295\u8d44","\u672a\u6765","\u5fc3\u7406","\u7406\u6027","\u65f6\u95f4"],g=()=>{var e,l;const[t,g]=(0,a.useState)("all"),[u,b]=(0,a.useState)("all"),{isSidebarOpen:h}=(0,c.c)(),[p,v]=(0,a.useState)(1),f=(0,s.zy)();(0,a.useEffect)((()=>{const e=new URLSearchParams(f.search).get("category");e&&x.includes(e)?(g(e),b("all"),v(1)):g("all")}),[f.search]);const{data:y=[],isLoading:j,isError:w}=(0,n.I)({queryKey:["articleTags"],queryFn:async()=>(await i.A.get(`${o.JR}/api/articles/tags`)).data.tags||[],staleTime:18e5,gcTime:36e5}),{data:N,isLoading:k,isError:_,error:C,isFetching:S}=((e,l,t)=>{const a=["articles",{page:e,category:l,tag:t}];return(0,n.I)({queryKey:a,queryFn:async()=>{const a=15*(e-1);let s=`${o.JR}/api/articles/?limit=15&offset=${a}&fields=id,title,summary,content,category,tags,author,cover_image,slug,view_count,created_at,series_name,like_count,collect_count,share_count,comment_count`;return"all"!==t?s+=`&tag=${encodeURIComponent(t)}`:l&&"all"!==l&&(s+=`&category=${encodeURIComponent(l)}`),s+="&sort_by=created_at&sort_order=desc",(await i.A.get(s)).data},staleTime:3e5,gcTime:6e5,placeholderData:e=>e})})(p,t,u),T=null!==(e=null===N||void 0===N?void 0:N.articles)&&void 0!==e?e:[],$=null!==(l=null===N||void 0===N?void 0:N.total)&&void 0!==l?l:0,E=Math.ceil($/15);(0,a.useEffect)((()=>{v(1)}),[t,u]);const I=e=>{b(e),g("all")},R=e=>{e>=1&&e<=E&&(v(e),window.scrollTo(0,0))},q=e=>{if(e)return(0,d.o6)(e)},F=k&&!N,L=S,A=_?(null===C||void 0===C?void 0:C.message)||"\u52a0\u8f7d\u6587\u7ae0\u65f6\u51fa\u9519":null;return(0,m.jsx)("div",{className:"min-h-screen flex flex-col text-black",children:(0,m.jsx)("div",{className:"flex flex-1 overflow-hidden",children:(0,m.jsx)("main",{className:"flex-grow overflow-y-auto transition-all duration-300 ease-in-out "+(h?"lg:ml-56":"ml-0"),children:(0,m.jsxs)("div",{className:"container mx-auto px-4 pb-4 pt-4",children:[(0,m.jsx)("div",{className:"mb-6",children:(0,m.jsx)("div",{className:"flex flex-wrap gap-2",children:x.map((e=>(0,m.jsx)("button",{className:"px-4 py-1.5 rounded-full text-sm font-medium transition-colors "+(t===("\u5168\u90e8"===e?"all":e)&&"all"===u?"bg-blue-500/90 text-white shadow-md":"bg-gray-100/90 hover:bg-gray-200/90 text-gray-700 border border-gray-200/50"),onClick:()=>(e=>{g(e),b("all")})("\u5168\u90e8"===e?"all":e),children:e},e)))})}),!j&&!w&&y.length>0&&(0,m.jsxs)("div",{className:"mb-8 flex flex-wrap gap-2",children:[(0,m.jsx)("button",{onClick:()=>I("all"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-colors "+("all"===u?"bg-teal-500/90 text-white shadow-md":"bg-gray-100/90 hover:bg-gray-200/90 text-gray-700 border border-gray-200/50"),children:"# \u6240\u6709\u6807\u7b7e"}),y.map((e=>(0,m.jsxs)("button",{onClick:()=>I(e),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-colors "+(u===e?"bg-teal-500/90 text-white shadow-md":"bg-gray-100/90 hover:bg-gray-200/90 text-gray-700 border border-gray-200/50"),children:["# ",e]},e)))]}),j&&(0,m.jsx)("p",{className:"text-sm text-black mb-4",children:"\u6b63\u5728\u52a0\u8f7d\u6807\u7b7e..."}),w&&(0,m.jsx)("p",{className:"text-sm text-red-400 mb-4",children:"\u52a0\u8f7d\u6807\u7b7e\u5931\u8d25\u3002"}),F?(0,m.jsxs)("div",{className:"text-center py-10",children:[(0,m.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-black mx-auto"}),(0,m.jsx)("span",{className:"mt-3 text-black block",children:"\u6b63\u5728\u52a0\u8f7d\u6587\u7ae0..."})]}):A?(0,m.jsxs)("div",{className:"text-center py-10 bg-red-900/30 border border-red-700 text-black p-4 rounded",children:[(0,m.jsx)("strong",{className:"font-bold",children:"\u52a0\u8f7d\u5931\u8d25!"}),(0,m.jsxs)("span",{className:"block sm:inline",children:[" ",A]})]}):T.length>0?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:T.map((e=>{var l,t,a,s,o;return(0,m.jsxs)(r.N_,{to:`/article/${e.slug}`,className:"block bg-gray-850/70 hover:bg-gray-800/90 backdrop-blur-lg border border-gray-700/50 rounded-lg overflow-hidden shadow-lg transition-all duration-200 group",children:[e.cover_image&&(0,m.jsx)("div",{className:"h-40 w-full overflow-hidden",children:(0,m.jsx)("img",{src:null!==(l=q(e.cover_image))&&void 0!==l?l:"/placeholder.jpg",alt:e.title,className:"w-full h-full object-cover transition-transform duration-300 ease-in-out group-hover:scale-105",onError:e=>{e.target.src="/placeholder.jpg"}})}),(0,m.jsxs)("div",{className:"p-3 flex flex-col flex-grow",children:[(0,m.jsx)("h3",{className:"text-base font-semibold text-black mb-1.5 line-clamp-2 group-hover:text-black",title:e.title,children:e.title}),(0,m.jsx)("p",{className:"text-xs text-black mb-3 flex-grow "+(e.cover_image?"line-clamp-3":"line-clamp-6"),children:e.content||"\u65e0\u5185\u5bb9"}),(0,m.jsxs)("div",{className:"flex justify-between items-center text-xs text-black mt-auto pt-1.5 border-t border-gray-700/50",children:[(0,m.jsx)("span",{children:(null===(t=e.author)||void 0===t?void 0:t.nickname)||(null===(a=e.author)||void 0===a||null===(s=a.email)||void 0===s?void 0:s.split("@")[0])||"\u533f\u540d"}),(0,m.jsx)("div",{children:(o=e.created_at,new Date(o).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}))})]})]})]},e.id)}))}),E>1&&(0,m.jsxs)("div",{className:"mt-8 flex justify-center items-center space-x-4",children:[(0,m.jsx)("button",{onClick:()=>R(p-1),disabled:1===p||L,className:"px-3 py-1.5 bg-white/10 hover:bg-white/20 text-black rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:"\u4e0a\u4e00\u9875"}),(0,m.jsxs)("span",{className:"text-black text-sm",children:["\u7b2c ",p," / ",E," \u9875 ",L?"(\u52a0\u8f7d\u4e2d...)":""]}),(0,m.jsx)("button",{onClick:()=>R(p+1),disabled:p===E||L,className:"px-3 py-1.5 bg-white/10 hover:bg-white/20 text-black rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:"\u4e0b\u4e00\u9875"})]})]}):(0,m.jsx)("div",{className:"text-center py-10 text-black",children:(0,m.jsx)("p",{className:"text-lg",children:"\u8be5\u5206\u7c7b/\u6807\u7b7e\u4e0b\u6682\u65e0\u6587\u7ae0"})})]})})})})}}}]);
//# sourceMappingURL=844.0d08efbd.chunk.js.map