/*! For license information please see 376.575fd466.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkai_tools_website_frontend=self.webpackChunkai_tools_website_frontend||[]).push([[376],{6376:(e,t,r)=>{r.d(t,{A:()=>y});var s=r(5043),n=r(6213),i=r(2115),a=r(6264),l=r(2377),o=r(6625);const c=(0,r(7784).A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var d=r(6199),u=r(3248),m=r(8261),p=r(7097),x=r(4558),h=r(5369),g=r(4383),v=r(579);const y=e=>{let{targetType:t,targetId:r,apiBaseUrl:y,token:f,currentUser:w,isLiked:b,isCollected:k,likeCount:j,collectCount:_,shareCount:N,handleLikeToggle:$,handleCollectToggle:C,handleShareClick:R,isSubmittingAction:L}=e;const[S,z]=(0,s.useState)(""),[A,E]=(0,s.useState)(!1),[B,I]=(0,s.useState)(null),[J,M]=(0,s.useState)(""),[T,D]=(0,s.useState)(!1),[F,K]=(0,s.useState)(""),[Q,q]=(0,s.useState)("latest"),O=(0,s.useRef)({}),[P,U]=(0,s.useState)({}),[W,H]=(0,s.useState)(!1),{token:V,user:G}=(0,o.A)(),X=(0,s.useRef)(null),Y=(0,s.useRef)(null),Z=(0,u.jE)(),[ee,te]=(0,s.useState)(0),re=(0,s.useCallback)(((e,t,r)=>{e.forEach((e=>{e.replies&&e.replies.length>0&&(r[e.id]=!1,re(e.replies,t+1,r))}))}),[]),se=["comments",t,r,Q,(null===w||void 0===w?void 0:w.id)||"anonymous"],{data:ne=[],isLoading:ie,isError:ae,error:le,refetch:oe}=(0,m.I)({queryKey:se,queryFn:()=>(async(e,t,r,s)=>{let i="";if("article"===e)i=`${x.JR}/api/original-comments/articles/${t}/comments/tree`;else{if("post"!==e)return[];i=`${x.JR}/api/posts/${t}/comments`}const a=`${i}?sort_by=${r}`;let l=[];if("post"===e){var o;l=(null===(o=(await n.A.get(a,{headers:s?{Authorization:`Bearer ${s}`}:{}})).data)||void 0===o?void 0:o.comments)||[]}else{if("article"!==e)return[];l=(await n.A.get(a,{headers:s?{Authorization:`Bearer ${s}`}:{}})).data||[]}return l})(t,r,Q,V),staleTime:3e5,gcTime:6e5,placeholderData:e=>null!==e&&void 0!==e?e:[],enabled:!!r&&!!t});(0,s.useEffect)((()=>{console.log({isLoading:ie,isError:ae,commentsData:ne})}),[ne,ie,ae,le,t,r,Q]),(0,s.useEffect)((()=>{if(ne&&ne.length>0){const e={...O.current};ne.forEach((t=>{if(t.replies&&t.replies.length>0){void 0===e[t.id]&&(e[t.id]=!1);const r=t=>{t.forEach((t=>{t.replies&&t.replies.length>0&&(void 0===e[t.id]&&(e[t.id]=!1),r(t.replies))}))};r(t.replies)}})),O.current=e,U(e)}}),[ne]);const ce=(0,s.useCallback)((e=>{let t=0;for(const r of e)t++,r.replies&&r.replies.length>0&&(t+=ce(r.replies));return t}),[]),de=(0,p.n)({mutationFn:async e=>{let{content:s,mentionLynn:i}=e,a="";if("article"===t)a=`${x.JR}/api/original-comments/articles/${r}/comments`;else{if("post"!==t)throw new Error(`[Submit Comment] Unknown targetType: ${t}`);a=`${x.JR}/api/posts/${r}/comments`}const l={content:s.trim()};i&&(l.mention_lynn=!0);return(await n.A.post(a,l,{headers:{Authorization:`Bearer ${V}`}})).data},onSuccess:e=>{Z.invalidateQueries({queryKey:["comments",t,r]}),z(""),i.oR.success("\u8bc4\u8bba\u53d1\u8868\u6210\u529f\uff01")},onError:e=>{console.error("\u63d0\u4ea4\u8bc4\u8bba\u5931\u8d25:",e);const t=e.message||"\u8bc4\u8bba\u63d0\u4ea4\u5931\u8d25";i.oR.error(t)},onSettled:()=>{E(!1)}}),ue=()=>{if(!V||!S.trim())return void i.oR.warn("\u8bc4\u8bba\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a\u4e14\u9700\u8981\u767b\u5f55\u3002");E(!0);const e=S.toLowerCase().includes("@lynn");de.mutate({content:S,mentionLynn:e})},me=(0,p.n)({mutationFn:async e=>{let{parentId:s,content:i,mentionLynn:a}=e,l="";if("article"===t)l=`${x.JR}/api/original-comments/articles/${r}/comments/${s}/replies`;else{if("post"!==t)throw new Error(`[Submit Reply] Unknown targetType: ${t}`);l=`${x.JR}/api/posts/${r}/comments/${s}/replies`}const o={content:i.trim()};a&&(o.mention_lynn=!0);return(await n.A.post(l,o,{headers:{Authorization:`Bearer ${V}`}})).data},onMutate:async e=>{let{parentId:t,content:r}=e;await Z.cancelQueries({queryKey:se});const s=Z.getQueryData(se)||[],n={id:Date.now(),content:r,created_at:(new Date).toISOString(),user_id:(null===w||void 0===w?void 0:w.id)||null,parent_id:t,user:w,replies:[],likes_count:0,is_liked_by_current_user:!1,_isOptimistic:!0,is_ai_generated:!1};return Z.setQueryData(se,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const r=JSON.parse(JSON.stringify(e)),s=e=>e.map((e=>e.id===t?{...e,replies:[...e.replies||[],n]}:e.replies&&e.replies.length>0?{...e,replies:s(e.replies)}:e));return s(r)})),{previousComments:s}},onSuccess:(e,t)=>{Z.setQueryData(se,(function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!r.length)return Z.invalidateQueries({queryKey:se}),r;const s=JSON.parse(JSON.stringify(r)),n=r=>r.map((r=>r.id===t.parentId?{...r,replies:r.replies.map((t=>t._isOptimistic?e:t))}:r.replies&&r.replies.length>0?{...r,replies:n(r.replies)}:r));return n(s)})),M(""),I(null),i.oR.success("\u56de\u590d\u6210\u529f\uff01")},onError:(e,t,r)=>{console.error("\u63d0\u4ea4\u56de\u590d\u5931\u8d25:",e),i.oR.error(e.message||"\u56de\u590d\u63d0\u4ea4\u5931\u8d25"),null!==r&&void 0!==r&&r.previousComments&&Z.setQueryData(se,r.previousComments)},onSettled:()=>{D(!1)}}),pe=(0,p.n)({mutationFn:async e=>{let{commentId:s}=e,i="";if("article"===t)i=`${x.JR}/api/original-comments/articles/${r}/comments/${s}`;else{if("post"!==t)throw new Error(`[Delete Comment] Unknown targetType: ${t}`);i=`${x.JR}/api/posts/${r}/comments/${s}`}await n.A.delete(i,{headers:{Authorization:`Bearer ${V}`}})},onSuccess:()=>{Z.invalidateQueries({queryKey:["comments",t,r]}),i.oR.success("\u8bc4\u8bba\u5df2\u5220\u9664")},onError:e=>{console.error("\u5220\u9664\u8bc4\u8bba\u5931\u8d25:",e),i.oR.error(e.message||"\u5220\u9664\u8bc4\u8bba\u5931\u8d25")}}),xe=(0,p.n)({mutationFn:async e=>{let r,s,{commentId:i,isLiked:a}=e;var l;if("post"===t?r=`${x.JR}/api/posts/post_comments/${i}/like`:"article"===t?r=`${x.JR}/api/original-comments/comments/${i}/like`:(console.error(`[CommentSection ERROR] Unsupported targetType for like: ${t}`),r=`${x.JR}/api/comments/${i}/like?target_type=${t}`),s=a?await n.A.delete(r,{headers:{Authorization:`Bearer ${V}`}}):await n.A.post(r,{},{headers:{Authorization:`Bearer ${V}`}}),200!==s.status&&201!==s.status&&204!==s.status)throw new Error((null===(l=s.data)||void 0===l?void 0:l.message)||"Like/Unlike API Error");const o=s.data||{};return{likes_count:void 0!==o.likes_count?o.likes_count:o.like_count||0,is_liked_by_current_user:void 0!==o.is_liked_by_current_user?o.is_liked_by_current_user:o.is_liked}},onSuccess:(e,t)=>{Z.setQueryData(se,(function(){const r=s=>s.map((s=>s.id===t.commentId?{...s,likes_count:e.likes_count,is_liked_by_current_user:e.is_liked_by_current_user}:s.replies&&s.replies.length>0?{...s,replies:r(s.replies)}:s));return r(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])}))},onError:(e,t)=>{console.error("Like/Unlike\u5931\u8d25:",e),i.oR.error(`\u64cd\u4f5c\u5931\u8d25: ${e.message}`)}}),he=(e,t)=>{if(e.preventDefault(),e.stopPropagation(),Q!==t){var r;const e=(null===(r=ve.current)||void 0===r?void 0:r.scrollTop)||0;q((e=>(console.log(`\u5207\u6362\u6392\u5e8f\uff1a${e} -> ${t}`),t))),oe(),requestAnimationFrame((()=>{ve.current&&(ve.current.scrollTop=e)}))}},ge=e=>{M(e.target.value)},ve=(0,s.useRef)(null),ye=(0,s.useCallback)((()=>{ie||te((e=>e+1)),oe?(oe(),i.oR.info("\u6b63\u5728\u5237\u65b0\u8bc4\u8bba...")):(console.error("refetchComments function is not available."),i.oR.error("\u5237\u65b0\u529f\u80fd\u6682\u65f6\u65e0\u6cd5\u4f7f\u7528\u3002"))}),[ie,oe]),fe=function(e){var t,r,s,n,o,c,u;let m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const p=e.is_ai_generated?(null===(t=e.user)||void 0===t?void 0:t.nickname)||"Lynn":(null===(r=e.user)||void 0===r?void 0:r.nickname)||(null===(s=e.user)||void 0===s||null===(n=s.email)||void 0===n?void 0:n.split("@")[0])||"\u533f\u540d\u7528\u6237",x=B===e.id,h=w&&e.user&&w.id===e.user.id&&!e.is_deleted&&!e.is_ai_generated,g=e.is_liked_by_current_user,y=e.likes_count,f=!0===e.is_deleted,b=!0===P[e.id],k=e.replies&&e.replies.length>0,j=k?ce(e.replies):0;return(0,v.jsxs)("div",{className:`comment-item ${m>0?"ml-4 md:ml-6":""} py-3 relative`,children:[m>0&&(0,v.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-px bg-white/50 -ml-3 md:-ml-4",style:{top:"1.5rem",bottom:"0.5rem"}}),(0,v.jsxs)("div",{className:"flex items-start space-x-2 mb-1 user-info",children:[k&&(0,v.jsx)("button",{onClick:t=>((e,t)=>{null===t||void 0===t||t.stopPropagation();const r={...P,[e]:!P[e]};O.current=r,U(r)})(e.id,t),className:"text-gray-400 hover:text-white py-0 px-0.5 focus:outline-none font-mono text-xs flex items-center justify-center flex-shrink-0 mr-1",style:{marginLeft:m>0?"-2rem":"0",width:"2rem",textAlign:"center",minWidth:"2rem"},"aria-label":b?"\u5c55\u5f00\u56de\u590d":"\u6536\u8d77\u56de\u590d",children:b?`[+${j}]`:"[-]"}),(0,v.jsx)(d.A,{userId:null!==(o=null===(c=e.user)||void 0===c?void 0:c.id)&&void 0!==o?o:void 0,username:p,avatar:null===(u=e.user)||void 0===u?void 0:u.avatar,size:"sm",showName:!1}),(0,v.jsxs)("div",{className:"flex-grow flex items-baseline justify-between ml-2",children:[(0,v.jsx)("span",{className:"font-medium text-sm "+(e.is_ai_generated?"text-purple-400":e.user?"text-gray-100":"text-gray-400"),children:p}),(0,v.jsx)("span",{className:"text-xs text-gray-400 pt-1 ml-auto",children:(0,a.m)(new Date(e.created_at),{addSuffix:!0,locale:l.g})})]})]}),(0,v.jsxs)("div",{className:""+(m>0?"pl-8":"pl-0"),children:[(0,v.jsx)("p",{className:"text-sm mt-1 whitespace-pre-wrap break-words "+(f?"text-blue-400 italic":"text-gray-300"),children:e.content}),(0,v.jsx)("div",{className:"mt-2 flex items-center space-x-4",children:!f&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("button",{onClick:()=>{return t=e.id,r=p,void(B===t?(I(null),K(""),M("")):null!==B?(I(null),K(""),M(""),setTimeout((()=>{I(t),K(r),M(""),setTimeout((()=>{var e;null===(e=Y.current)||void 0===e||e.focus()}),10)}),10)):(I(t),K(r),M(""),setTimeout((()=>{var e;null===(e=Y.current)||void 0===e||e.focus()}),10)));var t,r},className:`text-xs ${x?"text-blue-400":"text-gray-400 hover:text-blue-400"} flex items-center`,disabled:!V,title:V?x?"\u53d6\u6d88\u56de\u590d":"\u56de\u590d":"\u8bf7\u5148\u767b\u5f55",children:(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,v.jsx)("path",{fillRule:"evenodd",d:"M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,v.jsxs)("button",{onClick:()=>{return V?g?(t=e.id,void(V?xe.mutate({commentId:t,isLiked:!0}):i.oR.warn("\u8bf7\u5148\u767b\u5f55"))):(e=>{V?xe.mutate({commentId:e,isLiked:!1}):i.oR.warn("\u8bf7\u5148\u767b\u5f55")})(e.id):i.oR.warn("\u8bf7\u5148\u767b\u5f55\u540e\u70b9\u8d5e");var t},className:"text-xs flex items-center transition-colors duration-200 "+(g?"text-pink-500 hover:text-pink-400":"text-gray-400 hover:text-pink-400"),disabled:!V||xe.isPending,title:V?g?"\u53d6\u6d88\u70b9\u8d5e":"\u70b9\u8d5e":"\u8bf7\u5148\u767b\u5f55",children:[g?(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,v.jsx)("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}):(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,v.jsx)("span",{className:"tabular-nums",style:{display:"inline-block",minWidth:"1rem",textAlign:"left",marginLeft:"0.125rem"},children:y>0?y:""})]}),h&&(0,v.jsx)("button",{onClick:()=>{return t=e.id,void(V?window.confirm("\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u6761\u8bc4\u8bba\u5417\uff1f\u5176\u4e0b\u7684\u56de\u590d\u5c06\u4fdd\u7559\uff0c\u4f46\u6b64\u8bc4\u8bba\u5185\u5bb9\u4f1a\u6d88\u5931\u3002")&&pe.mutate({commentId:t}):i.oR.error("\u8bf7\u5148\u767b\u5f55\u3002"));var t},className:"text-xs text-gray-400 hover:text-red-400 flex items-center",title:"\u5220\u9664\u8bc4\u8bba",children:(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,v.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})}),B===e.id&&(0,v.jsxs)("div",{className:"relative w-full mt-3",children:[(0,v.jsx)("textarea",{ref:Y,value:J,onChange:ge,placeholder:`\u56de\u590d ${F}...`,rows:2,className:"w-full p-3 pr-10 pb-3 bg-gray-800/90 rounded-md text-sm text-white placeholder-gray-400 resize-none h-16 shadow-inner border-0 outline-none",autoFocus:!0}),(0,v.jsx)("div",{className:"absolute bottom-2 right-2 flex items-center space-x-2",children:(0,v.jsx)("button",{onClick:()=>(e=>{if(!V||!J.trim())return void i.oR.warn("\u56de\u590d\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a\u4e14\u9700\u8981\u767b\u5f55\u3002");D(!0);const t=J.toLowerCase().includes("@lynn");me.mutate({parentId:e,content:J,mentionLynn:t})})(e.id),disabled:T||!J.trim(),title:"\u56de\u590d",className:"text-white hover:text-blue-300 disabled:text-gray-500 disabled:cursor-not-allowed transition-colors duration-200 p-1 rounded hover:bg-gray-700/50 "+(T?"animate-pulse":""),children:(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transform rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h10a8 8 0 018 8v2M3 10l4-4m-4 4l4 4"})})})})]})]}),k&&!b&&(0,v.jsx)("div",{className:"replies-container relative mt-2 space-y-3 ml-8",children:e.replies.map((e=>fe(e,m+1)))})]},e.id)};return(0,v.jsxs)("div",{className:"mt-10 pt-6 border-t border-gray-700/50",ref:ve,children:[(0,v.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,v.jsxs)("div",{className:"flex items-center text-gray-400 text-sm",children:[(0,v.jsx)(c,{size:16,className:"mr-1"}),(0,v.jsxs)("span",{className:"tabular-nums",children:["(",ce(ne),")"]})]}),(0,v.jsxs)("button",{onClick:$,className:`p-1.5 rounded-md text-sm font-medium flex items-center gap-1 transition-colors duration-300 \n                ${b?"text-pink-400 hover:text-pink-300 active:text-pink-500":"text-gray-400 hover:text-gray-200 active:text-gray-300"} \n                ${!f&&"opacity-50 cursor-not-allowed"}`,disabled:!f,title:f?b?"\u53d6\u6d88\u70b9\u8d5e":"\u70b9\u8d5e":"\u8bf7\u5148\u767b\u5f55",children:[(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,v.jsx)("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),(0,v.jsxs)("span",{className:"tabular-nums",children:["(",j,")"]})]}),(0,v.jsxs)("button",{onClick:C,className:`p-1.5 rounded-md text-sm font-medium flex items-center gap-1 transition-colors duration-300 \n                ${k?"text-yellow-400 hover:text-yellow-300 active:text-yellow-500":"text-gray-400 hover:text-gray-200 active:text-gray-300"} \n                ${!f&&"opacity-50 cursor-not-allowed"}`,disabled:!f,title:f?k?"\u53d6\u6d88\u6536\u85cf":"\u6536\u85cf":"\u8bf7\u5148\u767b\u5f55",children:[(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,v.jsx)("path",{d:"M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-3.5L5 18V4z"})}),(0,v.jsxs)("span",{className:"tabular-nums",children:["(",_,")"]})]}),(0,v.jsxs)("button",{onClick:R,className:`p-1.5 rounded-md text-sm font-medium flex items-center gap-1 transition-colors duration-300 \n                text-gray-400 hover:text-gray-200 active:text-gray-300 \n                ${!f&&"opacity-50 cursor-not-allowed"}`,disabled:!f,title:f?"\u5206\u4eab":"\u8bf7\u5148\u767b\u5f55",children:[(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),N>0&&(0,v.jsxs)("span",{className:"tabular-nums",children:["(",N,")"]})]})]}),(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsx)("button",{onClick:e=>he(e,"latest"),className:"px-4 py-1.5 rounded-full border transition-colors text-xs font-medium "+("latest"===Q?"bg-gray-700/50 border-gray-500 text-gray-300":"bg-transparent border-gray-600 text-gray-500 hover:border-gray-400 hover:text-gray-300"),children:"\u6700\u65b0"}),(0,v.jsx)("button",{onClick:e=>he(e,"popular"),className:"px-4 py-1.5 rounded-full border transition-colors text-xs font-medium "+("popular"===Q?"bg-gray-700/50 border-gray-500 text-gray-300":"bg-transparent border-gray-600 text-gray-500 hover:border-gray-400 hover:text-gray-300"),children:"\u70ed\u95e8"})]})]}),f&&w&&(0,v.jsxs)("div",{className:"mb-8 flex items-center space-x-2",children:[(0,v.jsxs)("div",{className:"relative flex-grow",children:[(0,v.jsx)("textarea",{ref:X,value:S,onChange:e=>{z(e.target.value)},onFocus:()=>H(!0),onBlur:()=>{S.trim()||H(!1)},className:"w-full px-4 py-3 pr-12 bg-gray-800/80 backdrop-blur-sm rounded-xl\n                focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-white text-sm \n                resize-none placeholder-gray-400 shadow-inner\n                transition-all duration-300 ease-in-out\n                "+(W||S.trim()?"h-24":"h-12"),rows:W||S.trim()?3:1,placeholder:W?"":"\u53d1\u8868\u8bc4\u8bba...",disabled:A,onKeyDown:e=>{(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&ue()}}),(0,v.jsx)("div",{className:"absolute bottom-3 right-3 flex items-center space-x-2\n                transition-opacity duration-300 ease-in-out\n                "+(W||S.trim()?"opacity-100":"opacity-0"),children:(0,v.jsx)("button",{onClick:ue,disabled:A||!S.trim()||de.isPending,className:"p-2 text-blue-400 hover:text-blue-300 rounded-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-blue-500 "+(A?"animate-pulse":""),title:"\u63d0\u4ea4\u8bc4\u8bba (Cmd/Ctrl+Enter)",children:de.isPending?(0,v.jsxs)("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,v.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,v.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transform rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h10a8 8 0 018 8v2M3 10l4-4m-4 4l4 4"})})})})]}),(0,v.jsx)("button",{onClick:ye,disabled:ie,className:"p-1.5 text-gray-400 hover:text-blue-300 active:text-blue-500 transition-colors duration-150 rounded-full hover:bg-gray-700/30 active:bg-gray-600/30 focus:outline-none flex-shrink-0",title:"\u5237\u65b0\u8bc4\u8bba",children:ie?(0,v.jsx)(h.hW,{className:"animate-spin h-4 w-4"}):(0,v.jsx)(g.P.div,{initial:{rotate:0},animate:{rotate:360},transition:{duration:.4,ease:"linear"},style:{display:"flex"},children:(0,v.jsx)(h.KP4,{className:"h-4 w-4 block"})},`outer-input-refresh-${ee}`)})]}),ie&&0===ne.length?(0,v.jsx)("div",{className:"text-center text-gray-500 py-8",children:"\u52a0\u8f7d\u8bc4\u8bba\u4e2d..."}):ae?(0,v.jsx)("div",{className:"text-center text-red-400 py-8",children:(null===le||void 0===le?void 0:le.message)||"\u52a0\u8f7d\u8bc4\u8bba\u5931\u8d25"}):ne.length>0?(0,v.jsx)("div",{className:"space-y-4 pb-8",children:ne.map((e=>fe(e)))}):(0,v.jsx)("div",{className:"text-center text-gray-500 py-8",children:(0,v.jsx)("p",{children:"\u6682\u65e0\u8bc4\u8bba\uff0c\u6765\u53d1\u8868\u7b2c\u4e00\u6761\u8bc4\u8bba\u5427"})})]})}}}]);
//# sourceMappingURL=376.575fd466.chunk.js.map